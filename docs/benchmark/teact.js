!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.teact=t():e.teact=t()}(this,(()=>(()=>{"use strict";var e={d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{Teact:()=>ut,TeactDOM:()=>dt});var n={};e.r(n),e.d(n,{DEBUG_resolveComponentName:()=>Ce,MountState:()=>A,VirtualType:()=>L,captureImmediateEffects:()=>oe,createContext:()=>ve,default:()=>Se,hasElementChanged:()=>ce,isParentElement:()=>P,memo:()=>be,mountComponent:()=>ae,renderComponent:()=>se,unmountComponent:()=>ie,useCallback:()=>he,useContextSignal:()=>ye,useEffect:()=>fe,useLayoutEffect:()=>pe,useMemo:()=>me,useRef:()=>ge,useSignal:()=>Te,useState:()=>le});var o={};e.r(o),e.d(o,{addExtraClass:()=>nt,default:()=>at,removeExtraClass:()=>ot,setExtraStyles:()=>st,toggleExtraClass:()=>rt});const r=!1,s=!1;function c(e,t){let n,o=!1;return(...r)=>{n=r,o||(o=!0,e((()=>{o=!1,t(...n)})))}}let a,i,u;const l=new Set(["TeactMemoWrapper renders","TeactNContainer renders","Button renders"]);let d={};const f=function(e,t,n=!0){let o,r,s;return(...c)=>{r=!0,s=c,o||(n&&(r=!1,e(...s)),o=self.setInterval((()=>{if(!r)return self.clearInterval(o),void(o=void 0);r=!1,e(...s)}),t))}}((function(){p||function(){p=document.createElement("div"),p.style.cssText="position: absolute; left: 0; bottom: 25px; z-index: 9998; width: 260px; height: 200px; border: 1px solid #555; background: rgba(255, 255, 255, 0.9); overflow: auto; font-size: 10px;",document.body.appendChild(p);const e=document.createElement("a");e.style.cssText="position: absolute; left: 222px; bottom: 198px; z-index: 9999; font-size: 20px; cursor: pointer;",e.innerText="ðŸ”„",e.addEventListener("click",(()=>{d={},f()})),document.body.appendChild(e)}();const e=Date.now()-500,[t,n]=Object.entries(d).reduce(((e,[t,{value:n}])=>(l.has(t)||(t.includes("renders")&&n>e[0]&&(e[0]=n),t.includes("duration")&&n>e[1]&&(e[1]=n)),e)),[0,0]);p.innerHTML=Object.entries(d).filter((([e,{value:t}])=>!l.has(e)&&(e.includes("renders")&&t>5||e.includes("duration")&&t>2))).sort(((e,t)=>t[1].lastUpdateAt-e[1].lastUpdateAt)).map((([o,{value:r,lastUpdateAt:s}])=>{return[`<div style="background: #ff0000${c=r/(o.includes("renders")?t:n),Math.round(255*c).toString(16).padStart(2,"0")}">`,`  <span${s>e?' style="background: lightgreen"':""}>${o}: ${Math.round(r)}</span>`,"</div>"].join("\n");var c})).join("\n")}),500,!1);let p;function m(e,t=1){const n=Date.now();d[e]?(d[e].value+=t,d[e].lastUpdateAt=n):d[e]={value:t,lastUpdateAt:n},f()}function h(e,t,n="asc"){function o(e,t,n,o){const r=("function"==typeof n?n(e):e[n])||0,s=("function"==typeof n?n(t):t[n])||0;return o?r-s:s-r}if(Array.isArray(t)){const[r,s]=Array.isArray(n)?n:[n,n],[c,a]=t,i="asc"===r,u="asc"===s;return e.sort(((e,t)=>o(e,t,c,i)||o(e,t,a,u)))}const r="asc"===n;return e.sort(((e,n)=>o(e,n,t,r)))}function g(e){e instanceof ErrorEvent&&"ResizeObserver loop limit exceeded"===e.message||(e.preventDefault(),v(e instanceof ErrorEvent?e.error||e.message:e.reason))}function v(e){console.error(e)}window.addEventListener("error",g),window.addEventListener("unhandledrejection",g);const y=!s;function T(e,t,n){if(!y)return e();try{return e()}catch(e){return t?.(e),void v(e)}finally{n?.()}}function b(){const e=new Set;function t(t){e.delete(t)}return{runCallbacks:function(...t){e.forEach((e=>{e(...t)}))},addCallback:function(n){return e.add(n),()=>{t(n)}},removeCallback:t,hasCallbacks:function(){return Boolean(e.size)}}}const C=Symbol("SIGNAL_MARK");function S(e){return"function"==typeof e&&C in e}const k=new Map;let E;console.error,new Map;let w="measure";function x(e){w=e}let $=[],M=[],O=[];const N=c((e=>{!function(e,t=!1){a?a.add(e):(a=new Set([e]),requestAnimationFrame((()=>{const e=a;a=void 0,i=void 0,u&&(clearTimeout(u),u=void 0),e.forEach((e=>e()))}))),t&&(i?i.add(e):i=new Set([e]),u||(u=window.setTimeout((()=>{const e=i;a&&e.forEach(a.delete,a),i=void 0,u&&(clearTimeout(u),u=void 0),e.forEach((e=>e()))}),300)))}(e,!0)}),(()=>{const e=$;$=[],e.forEach((e=>{T(e)})),Promise.resolve().then((()=>{x("mutate");const e=M;M=[],e.forEach((e=>{T(e)}))})).then((()=>{x("measure");const e=[];for(const t of O)T((()=>{const n=t();n&&e.push(n)}));return O=[],e})).then((e=>{x("mutate");for(const t of e)T(t)})).then((()=>{x("measure")}))}));var L,A;!function(e){e[e.Empty=0]="Empty",e[e.Text=1]="Text",e[e.Tag=2]="Tag",e[e.Component=3]="Component",e[e.Fragment=4]="Fragment"}(L||(L={})),function(e){e[e.New=0]="New",e[e.Mounted=1]="Mounted",e[e.Unmounted=2]="Unmounted"}(A||(A={}));const j=Symbol("Fragment"),I=7,F=7,R=new Set(["TeactMemoWrapper","TeactNContainer","Button","ListItem","MenuItem"]);let U,V=0,D=0;function P(e){return e.type===L.Tag||e.type===L.Component||e.type===L.Fragment}function _(e,t,...n){return e===j?function(e){return{type:L.Fragment,children:z(e,!0)}}(n):"function"==typeof e?function(e,t,n){n?.length&&(t.children=1===n.length?n[0]:n);const o={id:-1,$element:void 0,Component:e,name:e.name,props:t,mountState:A.New};return o.$element=W(o),o.$element}(e,t||{},n):function(e,t,n){return{type:L.Tag,tag:e,props:t,children:z(n)}}(e,t||{},n)}function W(e,t){return{type:L.Component,componentInstance:e,props:e.props,children:t?z(t,!0):[]}}function z(e,t=!1){const n=function(e,t=!1){let n=e.length-1;for(;n>=0&&H(e[n]);n--);return n===e.length-1?e:-1===n&&t?e.slice(0,1):e.slice(0,n+1)}(e,t),o=[];for(let e=0,r=n.length;e<r;e++){const r=n[e];Array.isArray(r)?o.push(...z(r,t)):o.push(B(r))}return o}function H(e){return!e&&0!==e}function B(e){return H(e)?{type:L.Empty}:P(e)?e:{type:L.Text,value:String(e)}}const G={TOTAL:{name:"TOTAL",renders:0}},K={},q=20;document.addEventListener("dblclick",(()=>{console.warn("COMPONENTS",h(Object.values(G).map((({avgRenderTime:e,...t})=>({...t,...void 0!==e&&{avgRenderTime:Number(e.toFixed(2))}}))),"renders","desc")),console.warn("MEMOS",h(Object.values(K).filter((({calls:e})=>e>=q)).map((e=>({...e,hitRate:Number(e.hitRate.toFixed(2))}))),"hitRate","asc"))}));let J=new Set,X=new Set,Q=new Map,Y=new Map,Z=new Map,ee=new Map,te=!1;const ne=c((function(e){$.push(e),N()}),(()=>{const e=oe();X=new Set;const t=Array.from(J).sort(((e,t)=>e.id-t.id));J=new Set;const n=Y;Y=new Map,n.forEach((e=>e()));const o=Q;var r;Q=new Map,o.forEach((e=>e())),r=()=>{t.forEach(ue),t.forEach((e=>{X.has(e.id)||function(e){if(e.mountState!==A.Mounted||!e.onUpdate)return;const t=e.$element;se(e),e.$element!==t&&e.onUpdate()}(e)})),e?.()},M.push(r),N()}));function oe(){if(!te)return te=!0,re}function re(){const e=ee;ee=new Map,e.forEach((e=>e()));const t=Z;Z=new Map,t.forEach((e=>e())),te=!1}function se(e){X.add(e.id);const{Component:t,props:n}=e;let o;if(T((()=>{let c;if(U=e,e.hooks&&(e.hooks.state&&(e.hooks.state.cursor=0),e.hooks.effects&&(e.hooks.effects.cursor=0),e.hooks.memos&&(e.hooks.memos.cursor=0),e.hooks.refs&&(e.hooks.refs.cursor=0)),r){const e=Ce(t);G[e]||(G[e]={name:e,renders:0,avgRenderTime:0}),s&&(R.has(e)||console.log(`[Teact] Render ${e}`)),c=performance.now()}if(o=t(n),r){const e=performance.now()-c,n=Ce(t);e>I&&console.warn(`[Teact] Slow component render: ${n}, ${Math.round(e)} ms`);const{renders:o,avgRenderTime:r}=G[n];G[n].avgRenderTime=(r*o+e)/(o+1),G[n].renders++,G.TOTAL.renders++,s&&(m(`${n} renders`),m(`${n} duration`,e))}}),(()=>{console.error(`[Teact] Error while rendering component ${e.name}`),o=e.renderedValue})),e.mountState===A.Mounted&&o===e.renderedValue)return e.$element;e.renderedValue=o;const c=Array.isArray(o)?o:[o];return e.mountState===A.New?e.$element.children=z(c,!0):e.$element=W(e,c),e.$element}function ce(e,t){return typeof e!=typeof t||e.type!==t.type||(e.type===L.Text&&t.type===L.Text?e.value!==t.value:e.type===L.Tag&&t.type===L.Tag?e.tag!==t.tag||e.props.key!==t.props.key:e.type===L.Component&&t.type===L.Component&&(e.componentInstance.Component!==t.componentInstance.Component||e.props.key!==t.props.key))}function ae(e){return e.id=++D,se(e),e.mountState=A.Mounted,e.$element}function ie(e){if(e.mountState===A.Mounted){if(X.add(e.id),e.hooks?.effects)for(const t of e.hooks.effects.byCursor)t.cleanup&&T(t.cleanup),t.cleanup=void 0,t.releaseSignals?.();e.mountState=A.Unmounted,function(e){const{effects:t,state:n,memos:o,refs:r}=e.hooks||{};if(t)for(const e of t.byCursor)e.schedule=void 0,e.cleanup=void 0,e.releaseSignals=void 0,e.dependencies=void 0;if(n)for(const e of n.byCursor)e.value=void 0,e.nextValue=void 0,e.setter=void 0;if(o)for(const e of o.byCursor)e.value=void 0,e.dependencies=void 0;if(r)for(const e of r.byCursor)e.current=void 0;e.hooks=void 0,e.$element=void 0,e.renderedValue=void 0,e.Component=void 0,e.props=void 0,e.onUpdate=void 0}(e)}}function ue(e){if(e.mountState===A.Mounted&&e.hooks?.state)for(const t of e.hooks.state.byCursor)t.value=t.nextValue}function le(e,t){U.hooks||(U.hooks={}),U.hooks.state||(U.hooks.state={cursor:0,byCursor:[]});const{cursor:n,byCursor:o}=U.hooks.state,r=U;return void 0===o[n]&&(o[n]={value:e,nextValue:e,setter:e=>{r.mountState!==A.Unmounted&&("function"==typeof e&&(e=e(o[n].nextValue)),o[n].nextValue!==e&&(o[n].nextValue=e,J.add(r),ne(),s&&console.log("[Teact.useState]",Ce(r.Component),`State update at cursor #${n}${t?` (${t})`:""}, next value: `,o[n].nextValue)))}}),U.hooks.state.cursor++,[o[n].value,o[n].setter]}function de(e,t,n,o){U.hooks||(U.hooks={}),U.hooks.effects||(U.hooks.effects={cursor:0,byCursor:[]});const{cursor:s,byCursor:c}=U.hooks.effects,a=U,i=()=>T((()=>{const{cleanup:e}=c[s];if(!e)return;let t;if(r&&(t=performance.now()),e(),r){const e=performance.now()-t,n=Ce(a.Component);e>F&&console.warn(`[Teact] Slow cleanup at effect cursor #${s}: ${n}, ${Math.round(e)} ms`)}}),(()=>{console.error(`[Teact] Error in effect cleanup at cursor #${s} in ${a.name}`)}),(()=>{c[s].cleanup=void 0})),u=()=>T((()=>{if(a.mountState===A.Unmounted)return;let e;r&&(e=performance.now());const n=t();if("function"==typeof n&&(c[s].cleanup=n),r){const t=performance.now()-e,n=Ce(a.Component);t>F&&console.warn(`[Teact] Slow effect at cursor #${s}: ${n}, ${Math.round(t)} ms`)}}),(()=>{console.error(`[Teact] Error in effect at cursor #${s} in ${a.name}`)}));function l(){const t=`${a.id}_${s}`;e?(ee.set(t,i),Z.set(t,u)):(Y.set(t,i),Q.set(t,u)),ne()}if(n&&c[s]?.dependencies){if(n.some(((e,t)=>e!==c[s].dependencies[t]))){if(r&&o){const e=n.reduce(((e,t,n)=>{const o=c[s].dependencies[n];return t!==o&&e.push(`${n}: ${o} => ${t}`),e}),[]);console.log(`[Teact] Effect "${o}" caused by dependencies.`,e.join(", "))}l()}}else o&&console.log(`[Teact] Effect "${o}" caused by missing dependencies.`),l();const d=!c[s];c[s]={...c[s],dependencies:n,schedule:l},d&&(c[s].releaseSignals=function(){const e=n?.filter(S).map(((e,t)=>e.subscribe((()=>{o&&console.log(`[Teact] Effect "${o}" caused by signal #${t} new value:`,e()),c[s].schedule()}))));if(e?.length)return()=>{for(const t of e)t()}}()),U.hooks.effects.cursor++}function fe(e,t,n){return de(!1,e,t,n)}function pe(e,t,n){return de(!0,e,t,n)}function me(e,t,n,o){U.hooks||(U.hooks={}),U.hooks.memos||(U.hooks.memos={cursor:0,byCursor:[]});const{cursor:s,byCursor:c}=U.hooks.memos;let a,{value:i}=c[s]||{};if(r&&o){const e=`${o}#${U.id}`;a=K[e],a||(a={key:e,calls:0,misses:0,hitRate:0},K[e]=a),a.calls++,a.hitRate=(a.calls-a.misses)/a.calls}if(void 0===c[s]||t.length!==c[s].dependencies.length||t.some(((e,t)=>e!==c[s].dependencies[t]))){if(r){if(n){const e=`[Teact.useMemo] ${U.name} (${n}): Update is caused by:`;c[s]?function(e,t,n,o=""){const r=Object.keys(e);r.length===Object.keys(t).length?(console.log(n),r.forEach(((n,r)=>{e[r]!==t[r]&&console.log(o,r,":",e[r],"=>",t[r])}))):console.log(`${n} LENGTH`)}(c[s].dependencies,t,e,n):console.log(`${e} [first render]`)}a&&(a.misses++,a.hitRate=(a.calls-a.misses)/a.calls,a.calls%10==0&&a.calls>=q&&a.hitRate<.25&&console.warn(`[Teact] ${a.key}: Hit rate is ${a.hitRate.toFixed(2)} for ${a.calls} calls`))}i=e()}return c[s]={value:i,dependencies:t},U.hooks.memos.cursor++,i}function he(e,t,n){return me((()=>e),t,n)}function ge(e){U.hooks||(U.hooks={}),U.hooks.refs||(U.hooks.refs={cursor:0,byCursor:[]});const{cursor:t,byCursor:n}=U.hooks.refs;return n[t]||(n[t]={current:e}),U.hooks.refs.cursor++,n[t]}function ve(e){const t=String(V++);function n(n){const[o,r]=Te(n.value??e);return U.context={...U.context},U.context[t]=o,r(n.value),n.children}return n.DEBUG_contentComponentName=t,{defaultValue:e,contextId:t,Provider:n}}function ye(e){const[t]=Te(e.defaultValue);return U.context?.[e.contextId]||t}function Te(e){const t=ge();return t.current??=function(e){const t={value:e,effects:b()};function n(e){const n=t.effects.addCallback(e);return k.has(e)?k.get(e).add(n):k.set(e,new Set([n])),()=>{n();const t=k.get(e);t.delete(n),t.size||k.delete(e)}}return[Object.assign((function(){return E&&n(E),t.value}),{[C]:C,subscribe:n}),function(e){t.value!==e&&(t.value=e,t.effects.runCallbacks())}]}(e),t.current}function be(e,t){function n(n){return me((()=>_(e,n)),Object.values(n),t,s?Ce(U.Component):void 0)}return n.DEBUG_contentComponentName=Ce(e),n}function Ce(e){const{name:t,DEBUG_contentComponentName:n}=e;return"TeactNContainer"===t?`container>${n}`:"TeactMemoWrapper"===t?`memo>${n}`:"TeactContextProvider"===t?`context>id${n}`:t+(n?`>${n}`:"")}const Se={createElement:_,Fragment:j},ke=new Set(["scroll","mouseenter","mouseleave","load"]),Ee={},we={},xe=new Map;function $e(e,t){const n=e.replace(/^on/,"").replace(/Capture$/,"").toLowerCase();return"change"===n&&"SELECT"!==t.tagName?"input":"doubleclick"===n?"dblclick":"focus"===n?"focusin":"blur"===n?"focusout":n}function Me(e,t,n){return!n&&!ke.has(e)&&"VIDEO"!==t.tagName&&"IFRAME"!==t.tagName}function Oe(e,t){Ee[e]--,Ee[e]||document.removeEventListener(e,Ne),we[e].delete(t),xe.get(t).delete(e)}function Ne(e){const t=we[e.type];if(t){let n=!1,o=e.target;const r=()=>{n=!0},s=()=>{e.preventDefault()},c=new Proxy(e,{get:(e,t)=>"currentTarget"===t?o:"stopPropagation"===t||"stopImmediatePropagation"===t?r:"preventDefault"===t?s:Reflect.get(e,t)});for(;o&&o!==document.body;){const e=t.get(o);if(e&&(e(c),n))return;o=o.parentNode}}}r&&document.addEventListener("dblclick",(()=>{const e=Object.keys(Ee).length,t=Object.values(Ee).reduce(((e,t)=>e+t),0),n=Object.keys(we).length,o=Object.values(we).reduce(((e,t)=>e+t.size),0),r=xe.size,s=Array.from(xe.values()).reduce(((e,t)=>e+t.size),0);console.warn("DELEGATED EVENTS STATS",{delegatedHandlersCount1:t,delegatedHandlersCount2:o,delegatedEventTypesCount:s,delegationRegistriesCount:n,delegationElementsCount:r,documentListenersCount:e})}));const Le=new Set(["key","ref","teactFastList","teactOrderKey"]),Ae=new Set(["dir","role","form"]),je=["INPUT","TEXTAREA","SELECT"],Ie={autoPlay:"autoplay",autoComplete:"autocomplete"},Fe="__indexKey#",Re=new WeakMap,Ue=new WeakMap,Ve=new WeakMap;function De(e,t,n,o,s,c,a={}){const{skipComponentUpdate:i,fragment:u}=a;let{nextSibling:l,isSvg:d}=a;const f=t?.type===L.Component,p=n?.type===L.Component,m=n,h=!f&&t?.type===L.Fragment,g=!p&&n?.type===L.Fragment;if(d||n?.type!==L.Tag||"svg"!==n.tag||(d=!0),!i&&f&&p&&!ce(t,n)&&(n=function(e,t){return e.componentInstance.props=t.componentInstance.props,se(e.componentInstance)}(t,n)),!i&&p&&n.componentInstance.mountState===A.Mounted&&_e(e,n,o,s,c),t===n)return n;if(r&&n){const e="target"in n&&n.target;if(e&&(!t||"target"in t&&e!==t.target))throw new Error("[Teact] Cached virtual element was moved within tree")}if(!t&&n)if(p||g)p&&(s=(n=Pe(e,n,o,s,c)).componentInstance.context??s),We(e,n,s,{nextSibling:l,fragment:u,isSvg:d});else if(u||l||m.type!==L.Text||1!==o.children.length||e.firstChild){const t=ze(m,s,d);m.target=t,Ge(u||e,t,l),m.type===L.Tag&&Xe(m,t)}else e.textContent=m.value,m.target=e.firstChild;else if(t&&!n)He(e,t,s,void 0);else if(t&&n)if(ce(t,n))if(l||(l=Ke(t)),p||g)p&&(s=(n=Pe(e,n,o,s,c)).componentInstance.context??s),He(e,t,s,void 0),We(e,n,s,{nextSibling:l,fragment:u,isSvg:d});else{const n=ze(m,s,d);m.target=n,He(e,t,s,n,l),m.type===L.Tag&&Xe(m,n)}else if(f&&p||h&&g)qe(t,n,s,e,l,a.forceMoveToEnd);else{const o=t,r=o.target;if(m.target=r,o.target=void 0,t.type===L.Tag){const o=n;Xe(t,void 0),Xe(o,r),(l||a.forceMoveToEnd)&&Ge(e,r,l),function(e,t,n,o){Qe(n.tagName,t.props);const r=Object.entries(e.props),s=Object.entries(t.props);for(const[e,o]of r){const r=t.props[e];void 0!==o&&(void 0===r||o!==r&&e.startsWith("on"))&&Ze(n,e,o)}for(const[t,r]of s){const s=e.props[t];void 0!==r&&r!==s&&Ye(n,t,r,o)}}(t,o,r,d),qe(t,o,s,r,void 0,void 0,d)}}return n}function Pe(e,t,n,o,r){const{componentInstance:s}=t;return t.componentInstance.context=o,s.mountState===A.New&&_e(e,t=ae(s),n,o,r),t}function _e(e,t,n,o,r){const{componentInstance:s}=t;s.onUpdate=()=>{n.children[r]=De(e,n.children[r],s.$element,n,o,r,{skipComponentUpdate:!0})}}function We(e,t,n,o){const{children:r}=t;for(let s=0,c=r.length;s<c;s++){const c=r[s],a=De(e,void 0,c,t,n,s,o);a!==c&&(r[s]=a)}}function ze(e,t,n){if(e.type===L.Empty)return document.createTextNode("");if(e.type===L.Text)return document.createTextNode(e.value);const{tag:o,props:r,children:s}=e,c=n?document.createElementNS("http://www.w3.org/2000/svg",o):document.createElement(o);Qe(o,r);for(const e in r)r.hasOwnProperty(e)&&void 0!==r[e]&&Ye(c,e,r[e],n);!function(e,t){je.includes(e.tagName)&&(t.defaultValue&&Ye(e,"value",t.defaultValue),t.defaultChecked&&Ye(e,"checked",t.defaultChecked))}(c,r);for(let o=0,r=s.length;o<r;o++){const r=s[o],a=De(c,void 0,r,e,t,o,{isSvg:n});a!==r&&(s[o]=a)}return c}function He(e,t,n,o,r){const s=t.type===L.Component,c=!s&&t.type===L.Fragment;s||c?(s&&ie(t.componentInstance),function(e,t,n){for(const o of t.children)De(e,o,void 0,t,n,-1)}(e,t,n),o&&Ge(e,o,r)):(o?e.replaceChild(o,t.target):e.removeChild(t.target),Be(t))}function Be(e){if(e.type===L.Component)ie(e.componentInstance);else if(e.type!==L.Fragment&&(e.type===L.Tag&&(Ue.delete(e.target),Xe(e,void 0),function(e){const t=xe.get(e);t&&(t.forEach((t=>Oe(t,e))),xe.delete(e))}(e.target)),e.target=void 0,e.type!==L.Tag))return;for(const t of e.children)Be(t)}function Ge(e,t,n){n?e.insertBefore(t,n):e.appendChild(t)}function Ke(e){return e.type===L.Component||e.type===L.Fragment?Ke(e.children[e.children.length-1]):e.target.nextSibling||void 0}function qe(e,t,n,o,s,c=!1,a){if(r&&function(e){const t=e[0];if(t&&"props"in t&&void 0!==t.props.key){const t=e.reduce(((e,t)=>("props"in t&&t.props.key&&e.push(t.props.key),e)),[]);if(t.length!==(n=t,Array.from(new Set(n))).length)throw console.warn("[Teact] Duplicated keys:",t.filter(((e,t,n)=>n.indexOf(e)!==t)),e),new Error("[Teact] Children keys are not unique")}var n}(t.children),"props"in t&&t.props.teactFastList)return void function(e,t,n,o){const s=e.children,c=t.children,a=new Set;for(const e of c){const t="props"in e?e.props.key:void 0;if(r&&P(e)&&(null==t&&console.warn("Missing `key` in `teactFastList`"),e.type===L.Fragment))throw new Error("[Teact] Fragment can not be child of container with `teactFastList`");a.add(t)}let i=0;const u={};for(let e=0,r=s.length;e<r;e++){const r=s[e];let l="props"in r?r.props.key:void 0;const d=null!=l;if(!d||a.has(l)){if(!d){const s=c[e],a=s&&"props"in s?s.props.key:void 0;if(!s||a){De(o,r,void 0,t,n,-1);continue}l=`${Fe}${e}`}u[l]={$element:r,index:i++,orderKey:"props"in r?r.props.teactOrderKey:void 0}}else De(o,r,void 0,t,n,-1)}let l,d,f=0;for(let e=0,r=c.length;e<r;e++){const r=c[e],s=u["props"in r?r.props.key:`${Fe}${e}`];if(!s){void 0===d&&(l=e,d=0),d++;continue}d&&(Je(l,d,o,t,n),d=void 0,l=void 0);const a="props"in r?r.props.teactOrderKey:void 0,i=s.index!==f&&(!a||s.orderKey!==a),p=i&&f>s.index;i&&!p||f++;const m=o.childNodes[p?e+1:e],h=i?m?{nextSibling:m}:{forceMoveToEnd:!0}:void 0,g=De(o,s.$element,r,t,n,e,h);g!==r&&(c[e]=g)}d&&Je(l,d,o,t,n)}(e,t,n,o);const i=e.children,u=t.children,l=i.length,d=u.length,f=Math.max(l,d),p=d>l?document.createDocumentFragment():void 0,m=e.children[l-1],h=p&&(s||(m?Ke(m):void 0));for(let e=0;e<f;e++){const r=De(o,i[e],u[e],t,n,e,e>=l?{fragment:p,isSvg:a}:{nextSibling:s,forceMoveToEnd:c,isSvg:a});r&&r!==u[e]&&(u[e]=r)}p&&Ge(o,p,h)}function Je(e,t,n,o,r){const s=n.childNodes[e];if(1===t){const t=o.children[e],c=De(n,void 0,t,o,r,e,{nextSibling:s});return void(c!==t&&(o.children[e]=c))}const c=document.createDocumentFragment();for(let s=e;s<e+t;s++){const e=o.children[s],t=De(n,void 0,e,o,r,s,{fragment:c});t!==e&&(o.children[s]=t)}Ge(n,c,s)}function Xe(e,t){const{ref:n}=e.props;"object"==typeof n?n.current=t:"function"==typeof n&&n(t)}function Qe(e,t){const n=void 0!==t.value,o=void 0!==t.checked;if(!n&&!o||!je.includes(e.toUpperCase()))return;const{value:r,checked:s,onInput:c,onChange:a}=t;t.onChange=void 0,t.onInput=e=>{if(c?.(e),a?.(e),void 0!==r&&r!==e.currentTarget.value){const{selectionStart:t,selectionEnd:n}=e.currentTarget,o=t===n&&n===e.currentTarget.value.length;if(e.currentTarget.value=r,"number"==typeof t&&"number"==typeof n){e.currentTarget.setSelectionRange(t,n);const r={selectionStart:t,selectionEnd:n,isCaretAtEnd:o};e.currentTarget.dataset.__teactSelectionState=JSON.stringify(r)}}void 0!==s&&(e.currentTarget.checked=s)}}function Ye(e,t,n,o){if("className"===t)et(e,n,o);else if("value"===t){const t=e;if(t.value!==n){t.value=n;const e=t.dataset.__teactSelectionState;if(e){const{selectionStart:n,selectionEnd:o,isCaretAtEnd:r}=JSON.parse(e);if(r){const e=t.value.length;t.setSelectionRange(e,e)}else"number"==typeof n&&"number"==typeof o&&t.setSelectionRange(n,o)}}}else"style"===t?tt(e,n):"dangerouslySetInnerHTML"===t?e.innerHTML=n.__html:t.startsWith("on")?function(e,t,n,o=!1){const r=$e(t,e);Me(r,e,o)?function(e,t,n){Ee[e]||(Ee[e]=0,document.addEventListener(e,Ne)),function(e){return we[e]||(we[e]=new Map),we[e]}(e).set(t,n),function(e){const t=xe.get(e);if(t)return t;const n=new Set;return xe.set(e,n),n}(t).add(e),Ee[e]++}(r,e,n):e.addEventListener(r,n,o)}(e,t,n,t.endsWith("Capture")):o||t.startsWith("data-")||t.startsWith("aria-")||Ae.has(t)?e.setAttribute(t,n):Le.has(t)||(e[Ie[t]||t]=n)}function Ze(e,t,n){"className"===t?et(e,""):"value"===t?e.value="":"style"===t?tt(e,""):"dangerouslySetInnerHTML"===t?e.innerHTML="":t.startsWith("on")?function(e,t,n,o=!1){const r=$e(t,e);Me(r,e,o)?Oe(r,e):e.removeEventListener(r,n,o)}(e,t,n,t.endsWith("Capture")):Le.has(t)||e.removeAttribute(t)}function et(e,t,n){if(n)return void e.setAttribute("class",t);const o=e,r=Ue.get(e);if(!r)return void(o.className=t);const s=Array.from(r);t&&s.push(t),o.className=s.join(" ")}function tt(e,t){e.style.cssText=t,Ve.get(e)&&ct(e)}function nt(e,t,n=!1){if(!n){const n=t.split(" ");if(n.length>1){for(const t of n)nt(e,t,!0);return}}e.classList.add(t);const o=Ue.get(e);o?o.add(t):Ue.set(e,new Set([t]))}function ot(e,t,n=!1){if(!n){const n=t.split(" ");if(n.length>1){for(const t of n)ot(e,t,!0);return}}e.classList.remove(t);const o=Ue.get(e);o&&(o.delete(t),o.size||Ue.delete(e))}function rt(e,t,n,o=!1){if(!o){const o=t.split(" ");if(o.length>1){for(const t of o)rt(e,t,n,!0);return}}e.classList.toggle(t,n),e.classList.contains(t)?nt(e,t):ot(e,t)}function st(e,t){Ve.set(e,t),ct(e)}function ct(e){const t=Object.entries(Ve.get(e)).reduce(((t,[n,o])=>(n.startsWith("--")?e.style.setProperty(n,o):t[n]=o,t)),{});Object.assign(e.style,t)}const at={render:function(e,t){Re.has(t)||Re.set(t,{children:[]});const n=oe(),o=Re.get(t),r=De(t,o.children[0],e,o,{},0);n?.(),o.children=r?[r]:[]}},{default:it,...ut}=n;Object.assign(ut,it);const{default:lt,...dt}=o;return Object.assign(dt,lt),t})()));
//# sourceMappingURL=teact.js.map