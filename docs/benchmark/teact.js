!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.teact=t():e.teact=t()}(this,(()=>(()=>{"use strict";var e={d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{Teact:()=>nt,TeactDOM:()=>rt});var n={};e.r(n),e.d(n,{DEBUG_resolveComponentName:()=>me,MountState:()=>O,VirtualType:()=>M,captureImmediateEffects:()=>Z,default:()=>he,hasElementChanged:()=>ne,isParentElement:()=>R,memo:()=>pe,mountComponent:()=>oe,renderComponent:()=>te,unmountComponent:()=>re,useCallback:()=>de,useEffect:()=>ie,useLayoutEffect:()=>ue,useMemo:()=>le,useRef:()=>fe,useState:()=>ce});var o={};e.r(o),e.d(o,{addExtraClass:()=>Je,default:()=>et,removeExtraClass:()=>Xe,setExtraStyles:()=>Ye,toggleExtraClass:()=>Qe});const r=!1,s=!1;function c(e,t){let n,o=!1;return(...r)=>{n=r,o||(o=!0,e((()=>{o=!1,t(...n)})))}}let a,i,u;const l=new Set(["TeactMemoWrapper renders","TeactNContainer renders","Button renders"]);let d={};const f=function(e,t,n=!0){let o,r,s;return(...c)=>{r=!0,s=c,o||(n&&(r=!1,e(...s)),o=self.setInterval((()=>{if(!r)return self.clearInterval(o),void(o=void 0);r=!1,e(...s)}),t))}}((function(){p||function(){p=document.createElement("div"),p.style.cssText="position: absolute; left: 0; bottom: 25px; z-index: 9998; width: 260px; height: 200px; border: 1px solid #555; background: rgba(255, 255, 255, 0.9); overflow: auto; font-size: 10px;",document.body.appendChild(p);const e=document.createElement("a");e.style.cssText="position: absolute; left: 222px; bottom: 198px; z-index: 9999; font-size: 20px; cursor: pointer;",e.innerText="ðŸ”„",e.addEventListener("click",(()=>{d={},f()})),document.body.appendChild(e)}();const e=Date.now()-500,[t,n]=Object.entries(d).reduce(((e,[t,{value:n}])=>(l.has(t)||(t.includes("renders")&&n>e[0]&&(e[0]=n),t.includes("duration")&&n>e[1]&&(e[1]=n)),e)),[0,0]);p.innerHTML=Object.entries(d).filter((([e,{value:t}])=>!l.has(e)&&(e.includes("renders")&&t>5||e.includes("duration")&&t>2))).sort(((e,t)=>t[1].lastUpdateAt-e[1].lastUpdateAt)).map((([o,{value:r,lastUpdateAt:s}])=>{return[`<div style="background: #ff0000${c=r/(o.includes("renders")?t:n),Math.round(255*c).toString(16).padStart(2,"0")}">`,`  <span${s>e?' style="background: lightgreen"':""}>${o}: ${Math.round(r)}</span>`,"</div>"].join("\n");var c})).join("\n")}),500,!1);let p;function m(e,t=1){const n=Date.now();d[e]?(d[e].value+=t,d[e].lastUpdateAt=n):d[e]={value:t,lastUpdateAt:n},f()}function h(e,t,n="asc"){function o(e,t,n,o){const r=("function"==typeof n?n(e):e[n])||0,s=("function"==typeof n?n(t):t[n])||0;return o?r-s:s-r}if(Array.isArray(t)){const[r,s]=Array.isArray(n)?n:[n,n],[c,a]=t,i="asc"===r,u="asc"===s;return e.sort(((e,t)=>o(e,t,c,i)||o(e,t,a,u)))}const r="asc"===n;return e.sort(((e,n)=>o(e,n,t,r)))}function g(e){e instanceof ErrorEvent&&"ResizeObserver loop limit exceeded"===e.message||(e.preventDefault(),v(e instanceof ErrorEvent?e.error||e.message:e.reason))}function v(e){console.error(e)}window.addEventListener("error",g),window.addEventListener("unhandledrejection",g);const y=!s;function T(e,t,n){if(!y)return e();try{return e()}catch(e){return t?.(e),void v(e)}finally{n?.()}}const b=Symbol("SIGNAL_MARK");function E(e){return"function"==typeof e&&b in e}new Map,console.error,new Map;let C="measure";function k(e){C=e}let w=[],S=[],$=[];const x=c((e=>{!function(e,t=!1){a?a.add(e):(a=new Set([e]),requestAnimationFrame((()=>{const e=a;a=void 0,i=void 0,u&&(clearTimeout(u),u=void 0),e.forEach((e=>e()))}))),t&&(i?i.add(e):i=new Set([e]),u||(u=window.setTimeout((()=>{const e=i;a&&e.forEach(a.delete,a),i=void 0,u&&(clearTimeout(u),u=void 0),e.forEach((e=>e()))}),300)))}(e,!0)}),(()=>{const e=w;w=[],e.forEach((e=>{T(e)})),Promise.resolve().then((()=>{k("mutate");const e=S;S=[],e.forEach((e=>{T(e)}))})).then((()=>{k("measure");const e=[];for(const t of $)T((()=>{const n=t();n&&e.push(n)}));return $=[],e})).then((e=>{k("mutate");for(const t of e)T(t)})).then((()=>{k("measure")}))}));var M,O;!function(e){e[e.Empty=0]="Empty",e[e.Text=1]="Text",e[e.Tag=2]="Tag",e[e.Component=3]="Component",e[e.Fragment=4]="Fragment"}(M||(M={})),function(e){e[e.New=0]="New",e[e.Mounted=1]="Mounted",e[e.Unmounted=2]="Unmounted"}(O||(O={}));const N=Symbol("Fragment"),L=7,A=7,j=new Set(["TeactMemoWrapper","TeactNContainer","Button","ListItem","MenuItem"]);let I,F=0;function R(e){return e.type===M.Tag||e.type===M.Component||e.type===M.Fragment}function U(e,t,...n){return e===N?function(e){return{type:M.Fragment,children:D(e,!0)}}(n):"function"==typeof e?function(e,t,n){n?.length&&(t.children=1===n.length?n[0]:n);const o={id:++F,$element:void 0,Component:e,name:e.name,props:t,mountState:O.New};return o.$element=V(o),o.$element}(e,t||{},n):function(e,t,n){return{type:M.Tag,tag:e,props:t,children:D(n)}}(e,t||{},n)}function V(e,t){return{type:M.Component,componentInstance:e,props:e.props,children:t?D(t,!0):[]}}function D(e,t=!1){const n=function(e,t=!1){let n=e.length-1;for(;n>=0&&_(e[n]);n--);return n===e.length-1?e:-1===n&&t?e.slice(0,1):e.slice(0,n+1)}(e,t),o=[];for(let e=0,r=n.length;e<r;e++){const r=n[e];Array.isArray(r)?o.push(...D(r,t)):o.push(P(r))}return o}function _(e){return!e&&0!==e}function P(e){return _(e)?{type:M.Empty}:R(e)?e:{type:M.Text,value:String(e)}}const W={TOTAL:{name:"TOTAL",renders:0}},z={},H=20;document.addEventListener("dblclick",(()=>{console.warn("COMPONENTS",h(Object.values(W).map((({avgRenderTime:e,...t})=>({...t,...void 0!==e&&{avgRenderTime:Number(e.toFixed(2))}}))),"renders","desc")),console.warn("MEMOS",h(Object.values(z).filter((({calls:e})=>e>=H)).map((e=>({...e,hitRate:Number(e.hitRate.toFixed(2))}))),"hitRate","asc"))}));let K=new Set,B=new Set,G=new Map,q=new Map,J=new Map,X=new Map,Q=!1;const Y=c((function(e){w.push(e),x()}),(()=>{const e=Z();B=new Set;const t=Array.from(K).sort(((e,t)=>e.id-t.id));K=new Set;const n=q;q=new Map,n.forEach((e=>e()));const o=G;var r;G=new Map,o.forEach((e=>e())),r=()=>{t.forEach(se),t.forEach((e=>{B.has(e.id)||function(e){if(e.mountState!==O.Mounted||!e.onUpdate)return;const t=e.$element;te(e),e.$element!==t&&e.onUpdate()}(e)})),e?.()},S.push(r),x()}));function Z(){if(!Q)return Q=!0,ee}function ee(){const e=X;X=new Map,e.forEach((e=>e()));const t=J;J=new Map,t.forEach((e=>e())),Q=!1}function te(e){B.add(e.id);const{Component:t,props:n}=e;let o;if(T((()=>{let c;if(I=e,e.hooks&&(e.hooks.state&&(e.hooks.state.cursor=0),e.hooks.effects&&(e.hooks.effects.cursor=0),e.hooks.memos&&(e.hooks.memos.cursor=0),e.hooks.refs&&(e.hooks.refs.cursor=0)),r){const e=me(t);W[e]||(W[e]={name:e,renders:0,avgRenderTime:0}),s&&(j.has(e)||console.log(`[Teact] Render ${e}`)),c=performance.now()}if(o=t(n),r){const e=performance.now()-c,n=me(t);e>L&&console.warn(`[Teact] Slow component render: ${n}, ${Math.round(e)} ms`);const{renders:o,avgRenderTime:r}=W[n];W[n].avgRenderTime=(r*o+e)/(o+1),W[n].renders++,W.TOTAL.renders++,s&&(m(`${n} renders`),m(`${n} duration`,e))}}),(()=>{console.error(`[Teact] Error while rendering component ${e.name}`),o=e.renderedValue})),e.mountState===O.Mounted&&o===e.renderedValue)return e.$element;e.renderedValue=o;const c=Array.isArray(o)?o:[o];return e.mountState===O.New?e.$element.children=D(c,!0):e.$element=V(e,c),e.$element}function ne(e,t){return typeof e!=typeof t||e.type!==t.type||(e.type===M.Text&&t.type===M.Text?e.value!==t.value:e.type===M.Tag&&t.type===M.Tag?e.tag!==t.tag||e.props.key!==t.props.key:e.type===M.Component&&t.type===M.Component&&(e.componentInstance.Component!==t.componentInstance.Component||e.props.key!==t.props.key))}function oe(e){return te(e),e.mountState=O.Mounted,e.$element}function re(e){if(e.mountState===O.Mounted){if(B.add(e.id),e.hooks?.effects)for(const t of e.hooks.effects.byCursor)t.cleanup&&T(t.cleanup),t.cleanup=void 0,t.releaseSignals?.();e.mountState=O.Unmounted,function(e){const{effects:t,state:n,memos:o,refs:r}=e.hooks||{};if(t)for(const e of t.byCursor)e.schedule=void 0,e.cleanup=void 0,e.releaseSignals=void 0,e.dependencies=void 0;if(n)for(const e of n.byCursor)e.value=void 0,e.nextValue=void 0,e.setter=void 0;if(o)for(const e of o.byCursor)e.value=void 0,e.dependencies=void 0;if(r)for(const e of r.byCursor)e.current=void 0;e.hooks=void 0,e.$element=void 0,e.renderedValue=void 0,e.Component=void 0,e.props=void 0,e.onUpdate=void 0}(e)}}function se(e){if(e.mountState===O.Mounted&&e.hooks?.state)for(const t of e.hooks.state.byCursor)t.value=t.nextValue}function ce(e,t){I.hooks||(I.hooks={}),I.hooks.state||(I.hooks.state={cursor:0,byCursor:[]});const{cursor:n,byCursor:o}=I.hooks.state,r=I;return void 0===o[n]&&(o[n]={value:e,nextValue:e,setter:e=>{r.mountState!==O.Unmounted&&("function"==typeof e&&(e=e(o[n].nextValue)),o[n].nextValue!==e&&(o[n].nextValue=e,K.add(r),Y(),s&&console.log("[Teact.useState]",me(r.Component),`State update at cursor #${n}${t?` (${t})`:""}, next value: `,o[n].nextValue)))}}),I.hooks.state.cursor++,[o[n].value,o[n].setter]}function ae(e,t,n,o){I.hooks||(I.hooks={}),I.hooks.effects||(I.hooks.effects={cursor:0,byCursor:[]});const{cursor:s,byCursor:c}=I.hooks.effects,a=I,i=()=>T((()=>{const{cleanup:e}=c[s];if(!e)return;let t;if(r&&(t=performance.now()),e(),r){const e=performance.now()-t,n=me(a.Component);e>A&&console.warn(`[Teact] Slow cleanup at effect cursor #${s}: ${n}, ${Math.round(e)} ms`)}}),(()=>{console.error(`[Teact] Error in effect cleanup at cursor #${s} in ${a.name}`)}),(()=>{c[s].cleanup=void 0})),u=()=>T((()=>{if(a.mountState===O.Unmounted)return;let e;r&&(e=performance.now());const n=t();if("function"==typeof n&&(c[s].cleanup=n),r){const t=performance.now()-e,n=me(a.Component);t>A&&console.warn(`[Teact] Slow effect at cursor #${s}: ${n}, ${Math.round(t)} ms`)}}),(()=>{console.error(`[Teact] Error in effect at cursor #${s} in ${a.name}`)}));function l(){const t=`${a.id}_${s}`;e?(X.set(t,i),J.set(t,u)):(q.set(t,i),G.set(t,u)),Y()}if(n&&c[s]?.dependencies){if(n.some(((e,t)=>e!==c[s].dependencies[t]))){if(r&&o){const e=n.reduce(((e,t,n)=>{const o=c[s].dependencies[n];return t!==o&&e.push(`${n}: ${o} => ${t}`),e}),[]);console.log(`[Teact] Effect "${o}" caused by dependencies.`,e.join(", "))}l()}}else o&&console.log(`[Teact] Effect "${o}" caused by missing dependencies.`),l();const d=!c[s];c[s]={...c[s],dependencies:n,schedule:l},d&&(c[s].releaseSignals=function(){const e=n?.filter(E).map(((e,t)=>e.subscribe((()=>{o&&console.log(`[Teact] Effect "${o}" caused by signal #${t} new value:`,e()),c[s].schedule()}))));if(e?.length)return()=>{for(const t of e)t()}}()),I.hooks.effects.cursor++}function ie(e,t,n){return ae(!1,e,t,n)}function ue(e,t,n){return ae(!0,e,t,n)}function le(e,t,n,o){I.hooks||(I.hooks={}),I.hooks.memos||(I.hooks.memos={cursor:0,byCursor:[]});const{cursor:s,byCursor:c}=I.hooks.memos;let a,{value:i}=c[s]||{};if(r&&o){const e=`${o}#${I.id}`;a=z[e],a||(a={key:e,calls:0,misses:0,hitRate:0},z[e]=a),a.calls++,a.hitRate=(a.calls-a.misses)/a.calls}if(void 0===c[s]||t.length!==c[s].dependencies.length||t.some(((e,t)=>e!==c[s].dependencies[t]))){if(r){if(n){const e=`[Teact.useMemo] ${I.name} (${n}): Update is caused by:`;c[s]?function(e,t,n,o=""){const r=Object.keys(e);r.length===Object.keys(t).length?(console.log(n),r.forEach(((n,r)=>{e[r]!==t[r]&&console.log(o,r,":",e[r],"=>",t[r])}))):console.log(`${n} LENGTH`)}(c[s].dependencies,t,e,n):console.log(`${e} [first render]`)}a&&(a.misses++,a.hitRate=(a.calls-a.misses)/a.calls,a.calls%10==0&&a.calls>=H&&a.hitRate<.25&&console.warn(`[Teact] ${a.key}: Hit rate is ${a.hitRate.toFixed(2)} for ${a.calls} calls`))}i=e()}return c[s]={value:i,dependencies:t},I.hooks.memos.cursor++,i}function de(e,t,n){return le((()=>e),t,n)}function fe(e){I.hooks||(I.hooks={}),I.hooks.refs||(I.hooks.refs={cursor:0,byCursor:[]});const{cursor:t,byCursor:n}=I.hooks.refs;return n[t]||(n[t]={current:e}),I.hooks.refs.cursor++,n[t]}function pe(e,t){function n(n){return le((()=>U(e,n)),Object.values(n),t,s?me(I.Component):void 0)}return n.DEBUG_contentComponentName=me(e),n}function me(e){const{name:t,DEBUG_contentComponentName:n}=e;return"TeactNContainer"===t?`container>${n}`:"TeactMemoWrapper"===t?`memo>${n}`:t+(n?`>${n}`:"")}const he={createElement:U,Fragment:N},ge=new Set(["scroll","mouseenter","mouseleave","load"]),ve={},ye={},Te=new Map;function be(e,t){const n=e.replace(/^on/,"").replace(/Capture$/,"").toLowerCase();return"change"===n&&"SELECT"!==t.tagName?"input":"doubleclick"===n?"dblclick":"focus"===n?"focusin":"blur"===n?"focusout":n}function Ee(e,t,n){return!n&&!ge.has(e)&&"VIDEO"!==t.tagName&&"IFRAME"!==t.tagName}function Ce(e,t){ve[e]--,ve[e]||document.removeEventListener(e,ke),ye[e].delete(t),Te.get(t)?.delete(e)}function ke(e){const t=ye[e.type];if(t){let n=!1,o=e.target;const r=()=>{n=!0},s=()=>{e.preventDefault()},c=new Proxy(e,{get:(e,t)=>"currentTarget"===t?o:"stopPropagation"===t||"stopImmediatePropagation"===t?r:"preventDefault"===t?s:Reflect.get(e,t)});for(;o&&o!==document.body;){const e=t.get(o);if(e&&(e(c),n))return;o=o.parentNode}}}r&&document.addEventListener("dblclick",(()=>{const e=Object.keys(ve).length,t=Object.values(ve).reduce(((e,t)=>e+t),0),n=Object.keys(ye).length,o=Object.values(ye).reduce(((e,t)=>e+t.size),0),r=Te.size,s=Array.from(Te.values()).reduce(((e,t)=>e+t.size),0);console.warn("DELEGATED EVENTS STATS",{delegatedHandlersCount1:t,delegatedHandlersCount2:o,delegatedEventTypesCount:s,delegationRegistriesCount:n,delegationElementsCount:r,documentListenersCount:e})}));const we=new Set(["key","ref","teactFastList","teactOrderKey"]),Se=new Set(["dir","role","form"]),$e=["INPUT","TEXTAREA","SELECT"],xe={autoPlay:"autoplay",autoComplete:"autocomplete"},Me="__indexKey#",Oe=new WeakMap,Ne=new WeakMap,Le=new WeakMap;function Ae(e,t,n,o,s,c={}){const{skipComponentUpdate:a,fragment:i}=c;let{nextSibling:u}=c;const l=t&&t.type===M.Component,d=n&&n.type===M.Component,f=n,p=t&&!l&&t.type===M.Fragment,m=n&&!d&&n.type===M.Fragment;if(!a&&l&&d&&!ne(t,n)&&(n=function(e,t){return e.componentInstance.props=t.componentInstance.props,te(e.componentInstance)}(t,n)),!a&&d&&n.componentInstance.mountState===O.Mounted&&Ie(e,n,o,s),t===n)return n;if(r&&n){const e="target"in n&&n.target;if(e&&(!t||"target"in t&&e!==t.target))throw new Error("[Teact] Cached virtual element was moved within tree")}if(!t&&n)if(d||m)d&&(n=je(e,n,o,s)),Fe(e,n,{nextSibling:u,fragment:i});else if(i||u||f.type!==M.Text||1!==o.children.length||e.firstChild){const t=Re(f);f.target=t,De(i||e,t,u),f.type===M.Tag&&ze(f,t)}else e.textContent=f.value,f.target=e.firstChild;else if(t&&!n)Ue(e,t,void 0);else if(t&&n)if(ne(t,n))if(u||(u=_e(t)),d||m)d&&(n=je(e,n,o,s)),Ue(e,t,void 0),Fe(e,n,{nextSibling:u,fragment:i});else{const n=Re(f);f.target=n,Ue(e,t,n,u),f.type===M.Tag&&ze(f,n)}else if(l&&d||p&&m)Pe(t,n,e,u,c.forceMoveToEnd);else{const o=t,r=o.target;if(f.target=r,o.target=void 0,t.type===M.Tag){const o=n;ze(t,void 0),ze(o,r),(u||c.forceMoveToEnd)&&De(e,r,u),function(e,t,n){He(n.tagName,t.props);const o=Object.entries(e.props),r=Object.entries(t.props);for(const[e,r]of o){const o=t.props[e];void 0!==r&&(void 0===o||r!==o&&e.startsWith("on"))&&Be(n,e,r)}for(const[t,o]of r){const r=e.props[t];void 0!==o&&o!==r&&Ke(n,t,o)}}(t,o,r),Pe(t,o,r)}}return n}function je(e,t,n,o){const{componentInstance:r}=t;return r.mountState===O.New&&Ie(e,t=oe(r),n,o),t}function Ie(e,t,n,o){const{componentInstance:r}=t;r.onUpdate=()=>{n.children[o]=Ae(e,n.children[o],r.$element,n,o,{skipComponentUpdate:!0})}}function Fe(e,t,n){const{children:o}=t;for(let r=0,s=o.length;r<s;r++){const s=o[r],c=Ae(e,void 0,s,t,r,n);c!==s&&(o[r]=c)}}function Re(e){if(e.type===M.Empty)return document.createTextNode("");if(e.type===M.Text)return document.createTextNode(e.value);const{tag:t,props:n,children:o}=e,r=document.createElement(t);He(t,n);for(const e in n)n.hasOwnProperty(e)&&void 0!==n[e]&&Ke(r,e,n[e]);!function(e,t){$e.includes(e.tagName)&&(t.defaultValue&&Ke(e,"value",t.defaultValue),t.defaultChecked&&Ke(e,"checked",t.defaultChecked))}(r,n);for(let t=0,n=o.length;t<n;t++){const n=o[t],s=Ae(r,void 0,n,e,t);s!==n&&(o[t]=s)}return r}function Ue(e,t,n,o){const r=t.type===M.Component,s=!r&&t.type===M.Fragment;r||s?(r&&re(t.componentInstance),function(e,t){for(const n of t.children)Ae(e,n,void 0,t,-1)}(e,t),n&&De(e,n,o)):(n?e.replaceChild(n,t.target):e.removeChild(t.target),Ve(t))}function Ve(e){if(e.type===M.Component)re(e.componentInstance);else if(e.type!==M.Fragment&&(e.type===M.Tag&&(Ne.delete(e.target),ze(e,void 0),function(e){const t=Te.get(e);t&&(Te.delete(e),t.forEach((t=>Ce(t,e))))}(e.target)),e.target=void 0,e.type!==M.Tag))return;for(const t of e.children)Ve(t)}function De(e,t,n){n?e.insertBefore(t,n):e.appendChild(t)}function _e(e){return e.type===M.Component||e.type===M.Fragment?_e(e.children[e.children.length-1]):e.target.nextSibling||void 0}function Pe(e,t,n,o,s=!1){if(r&&function(e){const t=e[0];if(t&&"props"in t&&void 0!==t.props.key){const t=e.reduce(((e,t)=>("props"in t&&t.props.key&&e.push(t.props.key),e)),[]);if(t.length!==(n=t,Array.from(new Set(n))).length)throw console.warn("[Teact] Duplicated keys:",t.filter(((e,t,n)=>n.indexOf(e)!==t))),new Error("[Teact] Children keys are not unique")}var n}(t.children),"props"in t&&t.props.teactFastList)return void function(e,t,n){const o=e.children,s=t.children,c=new Set;for(const e of s){const t="props"in e?e.props.key:void 0;if(r&&R(e)&&(null==t&&console.warn("Missing `key` in `teactFastList`"),e.type===M.Fragment))throw new Error("[Teact] Fragment can not be child of container with `teactFastList`");c.add(t)}let a=0;const i={};for(let e=0,r=o.length;e<r;e++){const r=o[e];let u="props"in r?r.props.key:void 0;const l=null!=u;if(!l||c.has(u)){if(!l){const o=s[e],c=o&&"props"in o?o.props.key:void 0;if(!o||c){Ae(n,r,void 0,t,-1);continue}u=`${Me}${e}`}i[u]={$element:r,index:a++,orderKey:"props"in r?r.props.teactOrderKey:void 0}}else Ae(n,r,void 0,t,-1)}let u,l,d=0;for(let e=0,o=s.length;e<o;e++){const o=s[e],r=i["props"in o?o.props.key:`${Me}${e}`];if(!r){void 0===l&&(u=e,l=0),l++;continue}l&&(We(u,l,n,t),l=void 0,u=void 0);const c="props"in o?o.props.teactOrderKey:void 0,a=r.index!==d&&(!c||r.orderKey!==c),f=a&&d>r.index;a&&!f||d++;const p=n.childNodes[f?e+1:e],m=a?p?{nextSibling:p}:{forceMoveToEnd:!0}:void 0,h=Ae(n,r.$element,o,t,e,m);h!==o&&(s[e]=h)}l&&We(u,l,n,t)}(e,t,n);const c=e.children,a=t.children,i=c.length,u=a.length,l=Math.max(i,u),d=u>i?document.createDocumentFragment():void 0,f=e.children[i-1],p=d&&(o||(f?_e(f):void 0));for(let e=0;e<l;e++){const r=Ae(n,c[e],a[e],t,e,e>=i?{fragment:d}:{nextSibling:o,forceMoveToEnd:s});r&&r!==a[e]&&(a[e]=r)}d&&De(n,d,p)}function We(e,t,n,o){const r=n.childNodes[e];if(1===t){const t=o.children[e],s=Ae(n,void 0,t,o,e,{nextSibling:r});return void(s!==t&&(o.children[e]=s))}const s=document.createDocumentFragment();for(let r=e;r<e+t;r++){const e=o.children[r],t=Ae(n,void 0,e,o,r,{fragment:s});t!==e&&(o.children[r]=t)}De(n,s,r)}function ze(e,t){const{ref:n}=e.props;"object"==typeof n?n.current=t:"function"==typeof n&&n(t)}function He(e,t){const n=void 0!==t.value,o=void 0!==t.checked;if(!n&&!o||!$e.includes(e.toUpperCase()))return;const{value:r,checked:s,onInput:c,onChange:a}=t;t.onChange=void 0,t.onInput=e=>{if(c?.(e),a?.(e),void 0!==r&&r!==e.currentTarget.value){const{selectionStart:t,selectionEnd:n}=e.currentTarget,o=t===n&&n===e.currentTarget.value.length;if(e.currentTarget.value=r,"number"==typeof t&&"number"==typeof n){e.currentTarget.setSelectionRange(t,n);const r={selectionStart:t,selectionEnd:n,isCaretAtEnd:o};e.currentTarget.dataset.__teactSelectionState=JSON.stringify(r)}}void 0!==s&&(e.currentTarget.checked=s)}}function Ke(e,t,n){if("className"===t)Ge(e,n);else if("value"===t){const t=e;if(t.value!==n){t.value=n;const e=t.dataset.__teactSelectionState;if(e){const{selectionStart:n,selectionEnd:o,isCaretAtEnd:r}=JSON.parse(e);if(r){const e=t.value.length;t.setSelectionRange(e,e)}else"number"==typeof n&&"number"==typeof o&&t.setSelectionRange(n,o)}}}else"style"===t?qe(e,n):"dangerouslySetInnerHTML"===t?e.innerHTML=n.__html:t.startsWith("on")?function(e,t,n,o=!1){const r=be(t,e);Ee(r,e,o)?function(e,t,n){ve[e]||(ve[e]=0,document.addEventListener(e,ke)),function(e){return ye[e]||(ye[e]=new Map),ye[e]}(e).set(t,n),function(e){const t=Te.get(e);if(t)return t;const n=new Set;return Te.set(e,n),n}(t).add(e),ve[e]++}(r,e,n):e.addEventListener(r,n,o)}(e,t,n,t.endsWith("Capture")):t.startsWith("data-")||t.startsWith("aria-")||Se.has(t)?e.setAttribute(t,n):we.has(t)||(e[xe[t]||t]=n)}function Be(e,t,n){"className"===t?Ge(e,""):"value"===t?e.value="":"style"===t?qe(e,""):"dangerouslySetInnerHTML"===t?e.innerHTML="":t.startsWith("on")?function(e,t,n,o=!1){const r=be(t,e);Ee(r,e,o)?Ce(r,e):e.removeEventListener(r,n,o)}(e,t,n,t.endsWith("Capture")):we.has(t)||e.removeAttribute(t)}function Ge(e,t){const n=Ne.get(e);if(!n)return void(e.className=t);const o=Array.from(n);t&&o.push(t),e.className=o.join(" ")}function qe(e,t){e.style.cssText=t,Le.get(e)&&Ze(e)}function Je(e,t,n=!1){if(!n){const n=t.split(" ");if(n.length>1){for(const t of n)Je(e,t,!0);return}}e.classList.add(t);const o=Ne.get(e);o?o.add(t):Ne.set(e,new Set([t]))}function Xe(e,t,n=!1){if(!n){const n=t.split(" ");if(n.length>1){for(const t of n)Xe(e,t,!0);return}}e.classList.remove(t);const o=Ne.get(e);o&&(o.delete(t),o.size||Ne.delete(e))}function Qe(e,t,n,o=!1){if(!o){const o=t.split(" ");if(o.length>1){for(const t of o)Qe(e,t,n,!0);return}}e.classList.toggle(t,n),e.classList.contains(t)?Je(e,t):Xe(e,t)}function Ye(e,t){Le.set(e,t),Ze(e)}function Ze(e){const t=Object.entries(Le.get(e)).reduce(((t,[n,o])=>(n.startsWith("--")?e.style.setProperty(n,o):t[n]=o,t)),{});Object.assign(e.style,t)}const et={render:function(e,t){Oe.has(t)||Oe.set(t,{children:[]});const n=Z(),o=Oe.get(t),r=Ae(t,o.children[0],e,o,0);n?.(),o.children=r?[r]:[]}},{default:tt,...nt}=n;Object.assign(nt,tt);const{default:ot,...rt}=o;return Object.assign(rt,ot),t})()));
//# sourceMappingURL=teact.js.map