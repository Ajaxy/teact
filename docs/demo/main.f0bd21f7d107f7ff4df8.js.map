{"version":3,"file":"main.f0bd21f7d107f7ff4df8.js","mappings":";;;;;;;;;;;;;;;AAAO,IAAMA,KAAK,GAAG,IAAd;AACA,IAAMC,UAAU,GAAG,KAAnB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACDP;AACA;AAEA;AAEA,IAAIK,mBAAyC,GAAG,EAAhD;AACA,IAAIC,oBAA0C,GAAG,EAAjD;AACA,IAAIC,uBAA4D,GAAG,EAAnE;AAEA,IAAMC,kBAAkB,GAAGC,uBAAuB,CAAC,YAAM;EACvD,IAAMC,mBAAmB,GAAGL,mBAA5B;EACAA,mBAAmB,GAAG,EAAtB;EACAK,mBAAmB,CAACC,OAApB,CAA4B,UAACC,IAAD,EAAU;IACpCT,0DAAQ,CAACS,IAAD,CAAR;EACD,CAFD,EAHuD,CAOvD;;EACAC,OAAO,CAACC,OAAR,GACGC,IADH,CACQ,YAAM;IACVX,sDAAQ,CAAC,QAAD,CAAR;IAEA,IAAMY,oBAAoB,GAAGV,oBAA7B;IACAA,oBAAoB,GAAG,EAAvB;IAEAU,oBAAoB,CAACL,OAArB,CAA6B,UAACC,IAAD,EAAU;MACrCT,0DAAQ,CAACS,IAAD,CAAR;IACD,CAFD;EAGD,CAVH,EAWGG,IAXH,CAWQ,YAAM;IACVX,sDAAQ,CAAC,SAAD,CAAR;IAEA,IAAMa,+BAAqD,GAAG,EAA9D,CAHU,CAIV;;IAJU,2CAKSV,uBALT;IAAA;;IAAA;MAAA;QAAA,IAKCK,IALD;QAMRT,0DAAQ,CAAC,YAAM;UACb,IAAMe,YAAY,GAAGN,IAAI,EAAzB;;UACA,IAAIM,YAAJ,EAAkB;YAChBD,+BAA+B,CAACE,IAAhC,CAAqCD,YAArC;UACD;QACF,CALO,CAAR;MANQ;;MAKV,oDAA4C;QAAA;MAO3C;IAZS;MAAA;IAAA;MAAA;IAAA;;IAaVX,uBAAuB,GAAG,EAA1B;IAEA,OAAOU,+BAAP;EACD,CA3BH,EA4BGF,IA5BH,CA4BQ,UAACE,+BAAD,EAAqC;IACzCb,sDAAQ,CAAC,QAAD,CAAR,CADyC,CAGzC;;IAHyC,4CAItBa,+BAJsB;IAAA;;IAAA;MAIzC,uDAAoD;QAAA,IAAzCL,IAAyC;QAClDT,0DAAQ,CAACS,IAAD,CAAR;MACD;IANwC;MAAA;IAAA;MAAA;IAAA;EAO1C,CAnCH,EAoCGG,IApCH,CAoCQ,YAAM;IACVX,sDAAQ,CAAC,SAAD,CAAR;EACD,CAtCH;AAuCD,CA/CiD,CAAlD;AAiDO,SAASgB,cAAT,CAAwBC,EAAxB,EAAgD;EACrDhB,mBAAmB,CAACc,IAApB,CAAyBE,EAAzB;EACAb,kBAAkB;AACnB;AAEM,SAASc,eAAT,CAAyBD,EAAzB,EAAiD;EACtDf,oBAAoB,CAACa,IAArB,CAA0BE,EAA1B;EACAb,kBAAkB;AACnB;AAEM,SAASe,mBAAT,CAA6BF,EAA7B,EAAoE;EACzED,cAAc,CAAC,YAAM;IACnBE,eAAe,CAACD,EAAD,CAAf;EACD,CAFa,CAAd;AAGD;AAEM,SAASG,mBAAT,CAA6BH,EAA7B,EAAoE;EACzEd,uBAAuB,CAACY,IAAxB,CAA6BE,EAA7B;EACAb,kBAAkB;AACnB;;AAED,SAASC,uBAAT,CAA8DgB,EAA9D,EAAqE;EACnE,OAAOvB,8DAAY,CAAC,UAACwB,WAAD,EAAqC;IACvDzB,yDAAO,CAACyB,WAAD,EAAc,IAAd,CAAP;EACD,CAFkB,EAEhBD,EAFgB,CAAnB;AAGD;;;;;;;;;;;;;;;;ACnFD;AAEA,iEAAe;EACbE,OAAO,EAAE;IACPC,KAAK,EAAE,CACL,YADK,EACS,WADT,EACsB,aADtB,EACqC,cADrC,EAEL,aAFK,EAEU,cAFV,EAE0B,YAF1B,EAEwC,WAFxC,CADA;IAKPC,OAAO,EAAE,CACP,gBADO,EACW,uBADX,EAEP,UAFO,EAEK,UAFL,EAEiB,gBAFjB,EAEmC,wBAFnC;EALF,CADI;EAWbC,WAAW,EAAE;IACXF,KAAK,EAAE,CACL,YADK,EACS,WADT,EACsB,aADtB,EACqC,cADrC,EACqD,cADrD,EAEL,WAFK,CADI;IAKXC,OAAO,EAAE,CAAC,OAAD;EALE,CAXA;EAkBbE,MAAM,EAAE;IACNH,KAAK,EAAE,CACL,SADK,EACM,SADN,EAEL,aAFK,EAEU,YAFV,CADD;IAKNC,OAAO,EAAE,CAAC,kBAAD;EALH,CAlBK;EAyBbG,cAAc,EAAE;IACdJ,KAAK,EAAE,CACL,QADK,EACK,OADL,EACc,WADd,EAC2B,YAD3B;EADO,CAzBH;EA8BbK,QAAQ,EAAE;IACRL,KAAK,EAAE,CAAC,kBAAD,CADC;IAERC,OAAO,EAAE,CAAC,kBAAD;EAFD,CA9BG;EAkCbK,gBAAgB,EAAE;IAChBL,OAAO,EAAE,CAAC,QAAD;EADO,CAlCL;EAqCbM,UAAU,EAAE;IACVP,KAAK,EAAE,CAAC,QAAD,EAAW,QAAX,EAAqB,SAArB,EAAgC,SAAhC;EADG,CArCC;EAwCbQ,KAAK,EAAE;IACLP,OAAO,EAAE,CAAC,gBAAD,EAAmB,uBAAnB;EADJ;AAxCM,CAAf;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACFA;AAQA;AACA,IAAMS,qBAAqB,GAAGC,OAAO,CAACC,KAAtC;AAEA,IAAIC,OAAqB,GAAGH,qBAA5B;AAEA,IAAMI,aAAa,GAAG,IAAIC,GAAJ,EAAtB;AAEA,IAAIC,KAAY,GAAG,SAAnB;AACA,IAAIC,QAAQ,GAAG,KAAf;AACA,IAAIC,QAAJ;AAEO,SAAS1C,QAAT,CAAkB2C,QAAlB,EAAmC;EACxCH,KAAK,GAAGG,QAAR;AACD;AAEM,SAASC,QAAT,GAAoB;EACzB,OAAOJ,KAAP;AACD;AAEM,SAASK,YAAT,GAAwB;EAC7B,IAAIJ,QAAJ,EAAc;EAEdA,QAAQ,GAAG,IAAX;EACAK,oBAAoB;EACpBC,qBAAqB;AACtB;AAEM,SAASC,aAAT,GAAyB;EAC9B,IAAI,CAACP,QAAL,EAAe;EAEfQ,qBAAqB;EACrBC,oBAAoB;EACpBT,QAAQ,GAAG,KAAX;AACD;AAEM,SAASU,YAAT,CAAsBlC,EAAtB,EAAqC;EAC1C,IAAIuB,KAAK,KAAK,QAAd,EAAwB;IACtB,MAAM,IAAIY,KAAJ,CAAU,kCAAV,CAAN;EACD;;EAEDZ,KAAK,GAAG,SAAR;EACA,IAAMa,MAAM,GAAGpC,EAAE,EAAjB;EACAuB,KAAK,GAAG,QAAR;EAEA,OAAOa,MAAP;AACD;AAEM,SAASC,UAAT,CAAoBC,OAApB,EAA4C;EACjDlB,OAAO,GAAGkB,OAAO,IAAIrB,qBAArB;AACD;;AAED,SAASY,oBAAT,GAAgC;EAC9BU,MAAM,CAACC,OAAP,CAAexB,qDAAf,EAA8B1B,OAA9B,CAAsC,gBAAoB;IAAA;IAAA,IAAlBmD,IAAkB;IAAA,IAAZC,MAAY;;IACxD,IAAMC,MAAM,GAAGjC,MAAM,CAAC+B,IAAD,CAArB;IACA,IAAMG,SAAS,GAAG,QAAOD,MAAP,MAAkB,QAAlB,GAA6BA,MAA7B,GAAsCA,MAAM,CAACC,SAA/D;;IAEA,IAAI,WAAWF,MAAf,EAAuB;MACrBA,MAAM,CAACnC,KAAP,CAAajB,OAAb,CAAqB,UAACuD,IAAD,EAAU;QAAA;;QAC7B,IAAMC,YAAY,4BAAGP,MAAM,CAACQ,wBAAP,CAAgCH,SAAhC,EAA2CC,IAA3C,CAAH,0DAAG,sBAAkDG,GAAvE;;QACA,IAAI,CAACF,YAAL,EAAmB;UACjB;QACD;;QAEDzB,aAAa,CAAC4B,GAAd,WAAqBR,IAArB,cAA6BI,IAA7B,GAAqCC,YAArC;QAEAP,MAAM,CAACW,cAAP,CAAsBN,SAAtB,EAAiCC,IAAjC,EAAuC;UACrCG,GADqC,iBAC/B;YACJG,SAAS,CAACN,IAAD,CAAT;YAEA,OAAOC,YAAY,CAACM,IAAb,CAAkB,IAAlB,CAAP;UACD;QALoC,CAAvC;MAOD,CAfD;IAgBD;;IAED,IAAI,aAAaV,MAAjB,EAAyB;MACvBA,MAAM,CAAClC,OAAP,CAAelB,OAAf,CAAuB,UAAC+D,MAAD,EAAY;QACjC,IAAMC,YAAY,GAAIV,SAAD,CAAmBS,MAAnB,CAArB;QACAhC,aAAa,CAAC4B,GAAd,WAAqBR,IAArB,cAA6BY,MAA7B,GAAuCC,YAAvC,EAFiC,CAIjC;;QACCV,SAAD,CAAmBS,MAAnB,IAA6B,YAA0B;UACrDF,SAAS,CAACE,MAAD,CAAT;;UADqD,kCAAbE,IAAa;YAAbA,IAAa;UAAA;;UAGrD,OAAOD,YAAY,CAACE,KAAb,CAAmB,IAAnB,EAAyBD,IAAzB,CAAP;QACD,CAJD;MAKD,CAVD;IAWD;EACF,CApCD;AAqCD;;AAED,SAAStB,oBAAT,GAAgC;EAC9BM,MAAM,CAACC,OAAP,CAAexB,qDAAf,EAA8B1B,OAA9B,CAAsC,iBAAoB;IAAA;IAAA,IAAlBmD,IAAkB;IAAA,IAAZC,MAAY;;IACxD,IAAMC,MAAM,GAAGjC,MAAM,CAAC+B,IAAD,CAArB;IACA,IAAMG,SAAS,GAAG,QAAOD,MAAP,MAAkB,QAAlB,GAA6BA,MAA7B,GAAsCA,MAAM,CAACC,SAA/D;;IAEA,IAAI,WAAWF,MAAf,EAAuB;MACrBA,MAAM,CAACnC,KAAP,CAAajB,OAAb,CAAqB,UAACuD,IAAD,EAAU;QAC7B,IAAMC,YAAY,GAAGzB,aAAa,CAAC2B,GAAd,WAAqBP,IAArB,cAA6BI,IAA7B,EAArB;;QACA,IAAI,CAACC,YAAL,EAAmB;UACjB;QACD;;QAEDP,MAAM,CAACW,cAAP,CAAsBN,SAAtB,EAAiCC,IAAjC,EAAuC;UAAEG,GAAG,EAAEF;QAAP,CAAvC;MACD,CAPD;IAQD;;IAED,IAAI,aAAaJ,MAAjB,EAAyB;MACvBA,MAAM,CAAClC,OAAP,CAAelB,OAAf,CAAuB,UAAC+D,MAAD,EAAY;QAChCT,SAAD,CAAmBS,MAAnB,IAA6BhC,aAAa,CAAC2B,GAAd,WAAqBP,IAArB,cAA6BY,MAA7B,EAA7B;MACD,CAFD;IAGD;EACF,CApBD;EAsBAhC,aAAa,CAACoC,KAAd;AACD;;AAED,SAAS3B,qBAAT,GAAiC;EAC/BL,QAAQ,GAAG,IAAIiC,gBAAJ,CAAqB,UAACC,SAAD,EAAe;IAC7C,IAAIpC,KAAK,KAAK,QAAd,EAAwB;MACtBoC,SAAS,CAACrE,OAAV,CAAkB,iBAAqC;QAAA,IAAlCsE,MAAkC,SAAlCA,MAAkC;QAAA,IAA1BC,IAA0B,SAA1BA,IAA0B;QAAA,IAApBC,aAAoB,SAApBA,aAAoB;;QACrD,IAAI,CAACC,QAAQ,CAACC,QAAT,CAAkBJ,MAAlB,CAAL,EAAgC;UAC9B;QACD;;QAED,IAAIC,IAAI,KAAK,WAAT,IAAwBD,MAAM,YAAYnD,WAA1C,IAAyDmD,MAAM,CAACK,eAApE,EAAqF;UACnF;QACD;;QAED,IAAIH,aAAJ,aAAIA,aAAJ,eAAIA,aAAa,CAAEI,UAAf,CAA0B,OAA1B,CAAJ,EAAwC;UACtC;QACD,CAXoD,CAarD;;;QACA9C,OAAO,CAAC,IAAIe,KAAJ,0CAA6C0B,IAAI,KAAK,YAAT,GAAwBC,aAAxB,GAAwCD,IAArF,OAAD,CAAP;MACD,CAfD;IAgBD;EACF,CAnBU,CAAX;EAqBApC,QAAQ,CAAC0C,OAAT,CAAiBJ,QAAQ,CAACK,IAA1B,EAAgC;IAC9BC,SAAS,EAAE,IADmB;IAE9BC,UAAU,EAAE,IAFkB;IAG9BC,OAAO,EAAE,IAHqB;IAI9BC,aAAa,EAAE;EAJe,CAAhC;AAMD;;AAED,SAASxC,qBAAT,GAAiC;EAAA;;EAC/B,aAAAP,QAAQ,UAAR,8CAAUgD,UAAV;EACAhD,QAAQ,GAAGiD,SAAX;AACD;;AAED,SAASvB,SAAT,CAAmBwB,QAAnB,EAAqC;EACnC,IAAIpD,KAAK,KAAK,SAAd,EAAyB;IACvBH,OAAO,CAAC,IAAIe,KAAJ,6CAAgDwC,QAAhD,OAAD,CAAP;EACD;AACF;;;;;;;;;;;;;;;;;ACpKD;AAKA,IAAMC,qBAAqB,GAAG,IAAIC,GAAJ,CAAQ,CAAC,QAAD,EAAW,YAAX,EAAyB,YAAzB,EAAuC,MAAvC,CAAR,CAA9B;AAEA,IAAMC,qBAA6C,GAAG,EAAtD;AACA,IAAMC,6BAAiE,GAAG,EAA1E;AACA,IAAMC,4BAA4B,GAAG,IAAI1D,GAAJ,EAArC;AAEO,SAAS2D,gBAAT,CAA0BC,OAA1B,EAAgDP,QAAhD,EAAkErC,OAAlE,EAAuG;EAAA,IAAnB6C,SAAmB,uEAAP,KAAO;EAC5G,IAAMC,SAAS,GAAGC,gBAAgB,CAACV,QAAD,EAAWO,OAAX,CAAlC;;EACA,IAAII,qBAAqB,CAACF,SAAD,EAAYF,OAAZ,EAAqBC,SAArB,CAAzB,EAA0D;IACxDI,oBAAoB,CAACH,SAAD,EAAYF,OAAZ,EAAqB5C,OAArB,CAApB;EACD,CAFD,MAEO;IACL4C,OAAO,CAACD,gBAAR,CAAyBG,SAAzB,EAAoC9C,OAApC,EAA6C6C,SAA7C;EACD;AACF;AAEM,SAASK,mBAAT,CAA6BN,OAA7B,EAAmDP,QAAnD,EAAqErC,OAArE,EAA0G;EAAA,IAAnB6C,SAAmB,uEAAP,KAAO;EAC/G,IAAMC,SAAS,GAAGC,gBAAgB,CAACV,QAAD,EAAWO,OAAX,CAAlC;;EACA,IAAII,qBAAqB,CAACF,SAAD,EAAYF,OAAZ,EAAqBC,SAArB,CAAzB,EAA0D;IACxDM,uBAAuB,CAACL,SAAD,EAAYF,OAAZ,CAAvB;EACD,CAFD,MAEO;IACLA,OAAO,CAACM,mBAAR,CAA4BJ,SAA5B,EAAuC9C,OAAvC,EAAgD6C,SAAhD;EACD;AACF;;AAED,SAASE,gBAAT,CAA0BV,QAA1B,EAA4CO,OAA5C,EAAkE;EAChE,IAAME,SAAS,GAAGT,QAAQ,CACvBe,OADe,CACP,KADO,EACA,EADA,EAEfA,OAFe,CAEP,UAFO,EAEK,EAFL,EAESC,WAFT,EAAlB;;EAIA,IAAIP,SAAS,KAAK,QAAd,IAA0BF,OAAO,CAACU,OAAR,KAAoB,QAAlD,EAA4D;IAC1D;IACA;IACA,OAAO,OAAP;EACD;;EAED,IAAIR,SAAS,KAAK,aAAlB,EAAiC;IAC/B,OAAO,UAAP;EACD,CAb+D,CAehE;;;EACA,IAAIA,SAAS,KAAK,OAAlB,EAA2B;IACzB,OAAO,SAAP;EACD;;EAED,IAAIA,SAAS,KAAK,MAAlB,EAA0B;IACxB,OAAO,UAAP;EACD;;EAED,OAAOA,SAAP;AACD;;AAED,SAASE,qBAAT,CAA+BO,aAA/B,EAAsDX,OAAtD,EAA4EC,SAA5E,EAAgG;EAC9F,OACE,CAACA,SAAD,IACG,CAACP,qBAAqB,CAACkB,GAAtB,CAA0BD,aAA1B,CADJ,IAEGX,OAAO,CAACU,OAAR,KAAoB,OAFvB,IAGGV,OAAO,CAACU,OAAR,KAAoB,QAJzB;AAMD;;AAED,SAASL,oBAAT,CAA8BH,SAA9B,EAAiDF,OAAjD,EAAuE5C,OAAvE,EAAyF;EACvF,IAAI,CAACwC,qBAAqB,CAACM,SAAD,CAA1B,EAAuC;IACrCN,qBAAqB,CAACM,SAAD,CAArB,GAAmC,CAAnC;IACArB,QAAQ,CAACkB,gBAAT,CAA0BG,SAA1B,EAAqCW,WAArC;EACD;;EAEDC,yBAAyB,CAACZ,SAAD,CAAzB,CAAqCnC,GAArC,CAAyCiC,OAAzC,EAAkD5C,OAAlD;EACA2D,0BAA0B,CAACf,OAAD,CAA1B,CAAoCgB,GAApC,CAAwCd,SAAxC;EACAN,qBAAqB,CAACM,SAAD,CAArB;AACD;;AAED,SAASK,uBAAT,CAAiCL,SAAjC,EAAoDF,OAApD,EAA0E;EACxEJ,qBAAqB,CAACM,SAAD,CAArB;;EACA,IAAI,CAACN,qBAAqB,CAACM,SAAD,CAA1B,EAAuC;IACrC;IACA;IACArB,QAAQ,CAACyB,mBAAT,CAA6BJ,SAA7B,EAAwCW,WAAxC;EACD;;EAEDhB,6BAA6B,CAACK,SAAD,CAA7B,WAAgDF,OAAhD;EACAF,4BAA4B,CAAChC,GAA7B,CAAiCkC,OAAjC,YAAkDE,SAAlD;AACD;;AAEM,SAASe,2BAAT,CAAqCjB,OAArC,EAA2D;EAChE,IAAMkB,UAAU,GAAGpB,4BAA4B,CAAChC,GAA7B,CAAiCkC,OAAjC,CAAnB;;EACA,IAAI,CAACkB,UAAL,EAAiB;IACf;EACD;;EAEDA,UAAU,CAAC9G,OAAX,CAAmB,UAAC8F,SAAD;IAAA,OAAeK,uBAAuB,CAACL,SAAD,EAAYF,OAAZ,CAAtC;EAAA,CAAnB;EACAF,4BAA4B,UAA5B,CAAoCE,OAApC;AACD;;AAED,SAASa,WAAT,CAAqBM,SAArB,EAAuC;EACrC,IAAMC,MAAM,GAAGvB,6BAA6B,CAACsB,SAAS,CAACxC,IAAX,CAA5C;;EAEA,IAAIyC,MAAJ,EAAY;IACV,IAAIC,qBAAqB,GAAG,KAA5B;IACA,IAAIC,OAAoB,GAAGH,SAAS,CAACzC,MAArC;;IAEA,IAAM6C,eAAe,GAAG,SAAlBA,eAAkB,GAAM;MAC5BF,qBAAqB,GAAG,IAAxB;IACD,CAFD;;IAIA,IAAMG,cAAc,GAAG,SAAjBA,cAAiB,GAAM;MAC3BL,SAAS,CAACK,cAAV;IACD,CAFD,CARU,CAYV;;;IACA,IAAMC,KAAK,GAAG,IAAIC,KAAJ,CAAUP,SAAV,EAAqB;MACjCrD,GADiC,eAC7BY,MAD6B,EACrBiD,CADqB,EAClB;QACb,IAAIA,CAAC,KAAK,eAAV,EAA2B;UACzB,OAAOL,OAAP;QACD;;QACD,IAAIK,CAAC,KAAK,iBAAN,IAA2BA,CAAC,KAAK,0BAArC,EAAiE;UAC/D,OAAOJ,eAAP;QACD;;QACD,IAAII,CAAC,KAAK,gBAAV,EAA4B;UAC1B;UACA,OAAOH,cAAP;QACD;;QACD,OAAOI,OAAO,CAAC9D,GAAR,CAAYY,MAAZ,EAAoBiD,CAApB,CAAP;MACD;IAbgC,CAArB,CAAd,CAbU,CA6BV;;IACA,OAAOL,OAAO,IAAIA,OAAO,KAAKzC,QAAQ,CAACK,IAAvC,EAA6C;MAC3C,IAAM9B,OAAO,GAAGgE,MAAM,CAACtD,GAAP,CAAWwD,OAAX,CAAhB;;MACA,IAAIlE,OAAJ,EAAa;QACXA,OAAO,CAACqE,KAAD,CAAP;;QACA,IAAIJ,qBAAJ,EAA2B;UACzB;QACD;MACF;;MAEDC,OAAO,GAAGA,OAAO,CAACO,UAAlB;IACD;EACF;AACF;;AAED,SAASf,yBAAT,CAAmCZ,SAAnC,EAAsD;EACpD,IAAI,CAACL,6BAA6B,CAACK,SAAD,CAAlC,EAA+C;IAC7CL,6BAA6B,CAACK,SAAD,CAA7B,GAA2C,IAAI9D,GAAJ,EAA3C;EACD;;EAED,OAAOyD,6BAA6B,CAACK,SAAD,CAApC;AACD;;AAED,SAASa,0BAAT,CAAoCf,OAApC,EAA0D;EACxD,IAAM8B,QAAQ,GAAGhC,4BAA4B,CAAChC,GAA7B,CAAiCkC,OAAjC,CAAjB;;EACA,IAAI8B,QAAJ,EAAc;IACZ,OAAOA,QAAP;EACD;;EAED,IAAMC,MAAM,GAAG,IAAIpC,GAAJ,EAAf;EACAG,4BAA4B,CAAC/B,GAA7B,CAAiCiC,OAAjC,EAA0C+B,MAA1C;EAEA,OAAOA,MAAP;AACD;;AAED,IAAIvI,0CAAJ,EAAW;EACTqF,QAAQ,CAACkB,gBAAT,CAA0B,UAA1B,EAAsC,YAAM;IAC1C,IAAMiC,sBAAsB,GAAG3E,MAAM,CAAC4E,IAAP,CAAYrC,qBAAZ,EAAmCsC,MAAlE;IACA,IAAMC,uBAAuB,GAAG9E,MAAM,CAAC+E,MAAP,CAAcxC,qBAAd,EAC7ByC,MAD6B,CACtB,UAACC,GAAD,EAAMC,OAAN;MAAA,OAAkBD,GAAG,GAAGC,OAAxB;IAAA,CADsB,EACW,CADX,CAAhC;IAEA,IAAMC,yBAAyB,GAAGnF,MAAM,CAAC4E,IAAP,CAAYpC,6BAAZ,EAA2CqC,MAA7E;IACA,IAAMO,uBAAuB,GAAGpF,MAAM,CAAC+E,MAAP,CAAcvC,6BAAd,EAC7BwC,MAD6B,CACtB,UAACC,GAAD,EAAMI,kBAAN;MAAA,OAA6BJ,GAAG,GAAGI,kBAAkB,CAACC,IAAtD;IAAA,CADsB,EACsC,CADtC,CAAhC;IAEA,IAAMC,uBAAuB,GAAG9C,4BAA4B,CAAC6C,IAA7D;IACA,IAAME,wBAAwB,GAAGC,KAAK,CAACC,IAAN,CAAWjD,4BAA4B,CAACsC,MAA7B,EAAX,EAC9BC,MAD8B,CACvB,UAACC,GAAD,EAAMpB,UAAN;MAAA,OAAqBoB,GAAG,GAAGpB,UAAU,CAACyB,IAAtC;IAAA,CADuB,EACqB,CADrB,CAAjC,CAR0C,CAW1C;;IACA3G,OAAO,CAACgH,IAAR,CAAa,wBAAb,EAAuC;MACrCb,uBAAuB,EAAvBA,uBADqC;MAErCM,uBAAuB,EAAvBA,uBAFqC;MAGrCI,wBAAwB,EAAxBA,wBAHqC;MAIrCL,yBAAyB,EAAzBA,yBAJqC;MAKrCI,uBAAuB,EAAvBA,uBALqC;MAMrCZ,sBAAsB,EAAtBA;IANqC,CAAvC;EAQD,CApBD;AAqBD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjLD;AAcA;AACA;AACA;AAYA,IAAM8B,mBAAmB,GAAG,IAAInE,GAAJ,CAAQ,CAAC,KAAD,EAAQ,KAAR,EAAe,eAAf,EAAgC,eAAhC,CAAR,CAA5B;AACA,IAAMoE,eAAe,GAAG,IAAIpE,GAAJ,CAAQ,CAAC,KAAD,EAAQ,MAAR,EAAgB,MAAhB,CAAR,CAAxB;AACA,IAAMqE,iBAAiB,GAAG,CAAC,OAAD,EAAU,UAAV,EAAsB,QAAtB,CAA1B;AACA,IAAMC,iBAA0C,GAAG;EACjDC,QAAQ,EAAE,UADuC;EAEjDC,YAAY,EAAE;AAFmC,CAAnD;AAIA,IAAMC,gBAAgB,GAAG,aAAzB;AAEA,IAAMC,cAAc,GAAG,IAAIC,OAAJ,EAAvB;AACA,IAAMC,YAAY,GAAG,IAAID,OAAJ,EAArB,EAEA;;AACA,IAAIE,qBAAqB,GAAG,CAA5B;;AAEA,SAASC,MAAT,CAAgBC,QAAhB,EAAsDC,QAAtD,EAA6E;EAC3E,IAAI,CAACN,cAAc,CAACzD,GAAf,CAAmB+D,QAAnB,CAAL,EAAmC;IACjCN,cAAc,CAACtG,GAAf,CAAmB4G,QAAnB,EAA6B;MAAEC,QAAQ,EAAE;IAAZ,CAA7B;EACD;;EAED,IAAMC,KAAK,GAAGR,cAAc,CAACvG,GAAf,CAAmB6G,QAAnB,CAAd;EACA,IAAMG,WAAW,GAAGC,iBAAiB,CAACJ,QAAD,EAAWE,KAAK,CAACD,QAAN,CAAe,CAAf,CAAX,EAA8BF,QAA9B,EAAwCG,KAAxC,EAA+C,CAA/C,CAArC;;EAEA,IAAI,CAACjB,+DAAuB,EAA5B,EAAgC;IAC9BD,2DAAmB;EACpB;;EAEDkB,KAAK,CAACD,QAAN,GAAiBE,WAAW,GAAG,CAACA,WAAD,CAAH,GAAmB,EAA/C;EAEA,OAAOtF,SAAP;AACD;;AAED,SAASuF,iBAAT,CACEJ,QADF,EAEEK,QAFF,EAGEC,IAHF,EAIEC,OAJF,EAKEC,KALF,EAWK;EAAA,IALHC,OAKG,uEADC,EACD;EACH,IAAQC,mBAAR,GAA0CD,OAA1C,CAAQC,mBAAR;EAAA,IAA6BC,QAA7B,GAA0CF,OAA1C,CAA6BE,QAA7B;EACA,IAAMC,WAAN,GAAsBH,OAAtB,CAAMG,WAAN;EAEA,IAAMC,kBAAkB,GAAGR,QAAQ,IAAI9B,0DAAkB,CAAC8B,QAAD,CAAzD;EACA,IAAMS,cAAc,GAAGR,IAAI,IAAI/B,0DAAkB,CAAC+B,IAAD,CAAjD;EACA,IAAMS,UAAU,GAAGT,IAAnB;EAEA,IAAMU,iBAAiB,GAAGX,QAAQ,IAAI,CAACQ,kBAAb,IAAmC9B,yDAAiB,CAACsB,QAAD,CAA9E;EACA,IAAMY,aAAa,GAAGX,IAAI,IAAI,CAACQ,cAAT,IAA2B/B,yDAAiB,CAACuB,IAAD,CAAlE;;EAEA,IACE,CAACI,mBAAD,IACGG,kBADH,IACyBC,cADzB,IAEG,CAACxC,yDAAiB,CAAC+B,QAAD,EAAYC,IAAZ,CAHvB,EAIE;IACAA,IAAI,GAAGY,eAAe,CAACb,QAAD,EAAWC,IAAX,CAAtB;EACD,CAjBE,CAmBH;;;EACA,IAAI,CAACI,mBAAD,IAAwBI,cAAxB,IAA2CR,IAAD,CAAkCa,iBAAlC,CAAoDC,SAAlG,EAA6G;IAC3GC,4BAA4B,CAACrB,QAAD,EAAWM,IAAX,EAA4CC,OAA5C,EAAqDC,KAArD,CAA5B;EACD;;EAED,IAAIH,QAAQ,KAAKC,IAAjB,EAAuB;IACrB,OAAOA,IAAP;EACD;;EAED,IAAIzL,0CAAK,IAAIyL,IAAb,EAAmB;IACjB,IAAMgB,SAAS,GAAG,YAAYhB,IAAZ,IAAoBA,IAAI,CAACvG,MAA3C;;IACA,IAAIuH,SAAS,KAAK,CAACjB,QAAD,IAAc,YAAYA,QAAZ,IAAwBiB,SAAS,KAAKjB,QAAQ,CAACtG,MAAlE,CAAb,EAAyF;MACvF,MAAM,IAAIzB,KAAJ,CAAU,sDAAV,CAAN;IACD;EACF;;EAED,IAAI,CAAC+H,QAAD,IAAaC,IAAjB,EAAuB;IACrB,IAAIQ,cAAc,IAAIG,aAAtB,EAAqC;MACnC,IAAIH,cAAJ,EAAoB;QAClBR,IAAI,GAAGiB,aAAa,CAACvB,QAAD,EAAWM,IAAX,EAA4CC,OAA5C,EAAqDC,KAArD,CAApB;MACD;;MAEDgB,aAAa,CAACxB,QAAD,EAAWM,IAAX,EAAqE;QAAEM,WAAW,EAAXA,WAAF;QAAeD,QAAQ,EAARA;MAAf,CAArE,CAAb;IACD,CAND,MAMO;MACL,IAAMc,IAAI,GAAGC,UAAU,CAACX,UAAD,CAAvB;MACAA,UAAU,CAAChH,MAAX,GAAoB0H,IAApB;MACAE,YAAY,CAAChB,QAAQ,IAAIX,QAAb,EAAuByB,IAAvB,EAA6Bb,WAA7B,CAAZ;IACD;EACF,CAZD,MAYO,IAAIP,QAAQ,IAAI,CAACC,IAAjB,EAAuB;IAC5BsB,OAAO,CAAC5B,QAAD,EAAWK,QAAX,EAAqBxF,SAArB,CAAP;EACD,CAFM,MAEA,IAAIwF,QAAQ,IAAIC,IAAhB,EAAsB;IAC3B,IAAIhC,yDAAiB,CAAC+B,QAAD,EAAWC,IAAX,CAArB,EAAuC;MACrC,IAAI,CAACM,WAAL,EAAkB;QAChBA,WAAW,GAAGiB,cAAc,CAACxB,QAAD,CAA5B;MACD;;MAED,IAAIS,cAAc,IAAIG,aAAtB,EAAqC;QACnC,IAAIH,cAAJ,EAAoB;UAClBR,IAAI,GAAGiB,aAAa,CAACvB,QAAD,EAAWM,IAAX,EAA4CC,OAA5C,EAAqDC,KAArD,CAApB;QACD;;QAEDoB,OAAO,CAAC5B,QAAD,EAAWK,QAAX,EAAqBxF,SAArB,CAAP;QACA2G,aAAa,CAACxB,QAAD,EAAWM,IAAX,EAAqE;UAAEM,WAAW,EAAXA,WAAF;UAAeD,QAAQ,EAARA;QAAf,CAArE,CAAb;MACD,CAPD,MAOO;QACL,IAAMc,KAAI,GAAGC,UAAU,CAACX,UAAD,CAAvB;;QACAA,UAAU,CAAChH,MAAX,GAAoB0H,KAApB;QACAG,OAAO,CAAC5B,QAAD,EAAWK,QAAX,EAAqBoB,KAArB,EAA2Bb,WAA3B,CAAP;MACD;IACF,CAjBD,MAiBO;MACL,IAAMkB,WAAW,GAAGjB,kBAAkB,IAAIC,cAA1C;MACA,IAAMiB,UAAU,GAAGf,iBAAiB,IAAIC,aAAxC;;MAEA,IAAIa,WAAW,IAAIC,UAAnB,EAA+B;QAC5BzB,IAAD,CAA2DL,QAA3D,GAAsE+B,cAAc,CAClF3B,QADkF,EAElFC,IAFkF,EAGlFN,QAHkF,EAIlFY,WAJkF,CAApF;MAMD,CAPD,MAOO;QACL,IAAMqB,cAAc,GAAG5B,QAAvB;QACA,IAAM6B,aAAa,GAAGD,cAAc,CAAClI,MAArC;QAEAgH,UAAU,CAAChH,MAAX,GAAoBmI,aAApB;QACAD,cAAc,CAAClI,MAAf,GAAwBc,SAAxB,CALK,CAK8B;;QAEnC,IAAMsH,KAAK,GAAG3D,oDAAY,CAAC6B,QAAD,CAA1B;;QACA,IAAI8B,KAAJ,EAAW;UACT,IAAMC,SAAS,GAAG9B,IAAlB;UAEA8B,SAAS,CAAC1L,KAAV,CAAgB2L,GAAhB,GAAsBhC,QAAQ,CAAC3J,KAAT,CAAe2L,GAArC;;UAEA,IAAIzB,WAAJ,EAAiB;YACfe,YAAY,CAAC3B,QAAD,EAAWkC,aAAX,EAA0BtB,WAA1B,CAAZ;UACD;;UAED0B,gBAAgB,CAACjC,QAAD,EAAW+B,SAAX,EAAsBF,aAAtB,CAAhB;UAEAE,SAAS,CAACnC,QAAV,GAAqB+B,cAAc,CACjC3B,QADiC,EAEjC+B,SAFiC,EAGjCF,aAHiC,CAAnC;QAKD;MACF;IACF;EACF;;EAED,OAAO5B,IAAP;AACD;;AAED,SAASiB,aAAT,CACEvB,QADF,EAEED,QAFF,EAGEQ,OAHF,EAIEC,KAJF,EAKE;EACA,gBAA8BT,QAA9B;EAAA,IAAQoB,iBAAR,aAAQA,iBAAR;;EAEA,IAAI,CAACA,iBAAiB,CAACC,SAAvB,EAAkC;IAChCrB,QAAQ,GAAGnB,sDAAc,CAACuC,iBAAD,CAAzB;IACAE,4BAA4B,CAACrB,QAAD,EAAWD,QAAX,EAAqBQ,OAArB,EAA8BC,KAA9B,CAA5B;IAEA,IAAM+B,WAAW,GAAGxC,QAAQ,CAACE,QAAT,CAAkB,CAAlB,CAApB;;IACA,IAAI1B,0DAAkB,CAACgE,WAAD,CAAtB,EAAqC;MACnCxC,QAAQ,CAACE,QAAT,GAAoB,CAACsB,aAAa,CAACvB,QAAD,EAAWuC,WAAX,EAAwBxC,QAAxB,EAAkC,CAAlC,CAAd,CAApB;IACD;;IAEDoB,iBAAiB,CAACC,SAAlB,GAA8B,IAA9B;EACD;;EAED,OAAOrB,QAAP;AACD;;AAED,SAASmB,eAAT,CAAyBb,QAAzB,EAA4DC,IAA5D,EAA2F;EACzFD,QAAQ,CAACc,iBAAT,CAA2BzK,KAA3B,GAAmC4J,IAAI,CAACa,iBAAL,CAAuBzK,KAA1D;EAEA,OAAOmI,uDAAe,CAACwB,QAAQ,CAACc,iBAAV,CAAtB;AACD;;AAED,SAASE,4BAAT,CACErB,QADF,EAEED,QAFF,EAGEQ,OAHF,EAIEC,KAJF,EAKE;EACA,IAAQW,iBAAR,GAA8BpB,QAA9B,CAAQoB,iBAAR;;EAEAA,iBAAiB,CAACqB,QAAlB,GAA6B,YAAM;IACjCjC,OAAO,CAACN,QAAR,CAAiBO,KAAjB,IAA0BJ,iBAAiB,CACzCJ,QADyC,EAEzCO,OAAO,CAACN,QAAR,CAAiBO,KAAjB,CAFyC,EAGzCW,iBAAiB,CAACpB,QAHuB,EAIzCQ,OAJyC,EAKzCC,KALyC,EAMzC;MAAEE,mBAAmB,EAAE;IAAvB,CANyC,CAA3C;EAQD,CATD;AAUD;;AAED,SAASc,aAAT,CACExB,QADF,EAEED,QAFF,EAGEU,OAHF,EAOE;EACAV,QAAQ,CAACE,QAAT,GAAoBF,QAAQ,CAACE,QAAT,CAAkBwC,GAAlB,CAAsB,UAACC,MAAD,EAASC,CAAT,EAAe;IACvD,OAAOvC,iBAAiB,CAACJ,QAAD,EAAWnF,SAAX,EAAsB6H,MAAtB,EAA8B3C,QAA9B,EAAwC4C,CAAxC,EAA2ClC,OAA3C,CAAxB;EACD,CAFmB,CAApB;AAGD;;AAED,SAASmC,eAAT,CAAyB5C,QAAzB,EAAgDD,QAAhD,EAA4G;EAC1GA,QAAQ,CAACE,QAAT,CAAkBxK,OAAlB,CAA0B,UAACiN,MAAD,EAAY;IACpCtC,iBAAiB,CAACJ,QAAD,EAAW0C,MAAX,EAAmB7H,SAAnB,EAA8BkF,QAA9B,EAAwC,CAAC,CAAzC,CAAjB;EACD,CAFD;AAGD;;AAED,SAAS2B,UAAT,CAAoB3B,QAApB,EAAwD;EACtD,IAAIpB,sDAAc,CAACoB,QAAD,CAAlB,EAA8B;IAC5B,OAAO7F,QAAQ,CAAC2I,cAAT,CAAwB,EAAxB,CAAP;EACD;;EAED,IAAInE,qDAAa,CAACqB,QAAD,CAAjB,EAA6B;IAC3B,OAAO7F,QAAQ,CAAC2I,cAAT,CAAwB9C,QAAQ,CAAC+C,KAAjC,CAAP;EACD;;EAED,IAAQC,GAAR,GAAsChD,QAAtC,CAAQgD,GAAR;EAAA,IAAarM,KAAb,GAAsCqJ,QAAtC,CAAarJ,KAAb;EAAA,yBAAsCqJ,QAAtC,CAAoBE,QAApB;EAAA,IAAoBA,QAApB,mCAA+B,EAA/B;EACA,IAAM5E,OAAO,GAAGnB,QAAQ,CAAC8I,aAAT,CAAuBD,GAAvB,CAAhB;;EAEA,IAAI,QAAOrM,KAAK,CAAC2L,GAAb,MAAqB,QAAzB,EAAmC;IACjC3L,KAAK,CAAC2L,GAAN,CAAU1F,OAAV,GAAoBtB,OAApB;EACD,CAFD,MAEO,IAAI,OAAO3E,KAAK,CAAC2L,GAAb,KAAqB,UAAzB,EAAqC;IAC1C3L,KAAK,CAAC2L,GAAN,CAAUhH,OAAV;EACD;;EAED4H,iBAAiB,CAACF,GAAD,EAAMrM,KAAN,CAAjB;EAEAgC,MAAM,CAACC,OAAP,CAAejC,KAAf,EAAsBjB,OAAtB,CAA8B,gBAAkB;IAAA;IAAA,IAAhByN,GAAgB;IAAA,IAAXJ,KAAW;;IAC9C,IAAIpM,KAAK,CAACwM,GAAD,CAAL,KAAerI,SAAnB,EAA8B;MAC5BsI,YAAY,CAAC9H,OAAD,EAAU6H,GAAV,EAAeJ,KAAf,CAAZ;IACD;EACF,CAJD;EAMAM,0BAA0B,CAAC/H,OAAD,EAAU3E,KAAV,CAA1B;EAEAqJ,QAAQ,CAACE,QAAT,GAAoBA,QAAQ,CAACwC,GAAT,CAAa,UAACC,MAAD,EAASC,CAAT;IAAA,OAC/BvC,iBAAiB,CAAC/E,OAAD,EAAUR,SAAV,EAAqB6H,MAArB,EAA6B3C,QAA7B,EAAuC4C,CAAvC,CADc;EAAA,CAAb,CAApB;EAIA,OAAOtH,OAAP;AACD;;AAED,SAASuG,OAAT,CACE5B,QADF,EAEEK,QAFF,EAGEoB,IAHF,EAIE4B,oBAJF,EAKE;EACA,IAAMvB,WAAW,GAAGvD,0DAAkB,CAAC8B,QAAD,CAAtC;EACA,IAAM0B,UAAU,GAAG,CAACD,WAAD,IAAgB/C,yDAAiB,CAACsB,QAAD,CAApD;;EAEA,IAAIyB,WAAW,IAAIC,UAAnB,EAA+B;IAC7B,IAAID,WAAJ,EAAiB;MACfhD,wDAAgB,CAACuB,QAAQ,CAACc,iBAAV,CAAhB;IACD;;IAEDyB,eAAe,CAAC5C,QAAD,EAAWK,QAAX,CAAf;;IAEA,IAAIoB,IAAJ,EAAU;MACRE,YAAY,CAAC3B,QAAD,EAAWyB,IAAX,EAAiB4B,oBAAjB,CAAZ;IACD;EACF,CAVD,MAUO;IACL,IAAI5B,IAAJ,EAAU;MACRzB,QAAQ,CAACsD,YAAT,CAAsB7B,IAAtB,EAA4BpB,QAAQ,CAACtG,MAArC;IACD,CAFD,MAEO;MACLiG,QAAQ,CAACuD,WAAT,CAAqBlD,QAAQ,CAACtG,MAA9B;IACD;;IAEDyJ,eAAe,CAACnD,QAAD,CAAf;EACD;AACF;;AAED,SAASmD,eAAT,CAAyBzD,QAAzB,EAAmD;EACjD,IAAIxB,0DAAkB,CAACwB,QAAD,CAAtB,EAAkC;IAChCjB,wDAAgB,CAACiB,QAAQ,CAACoB,iBAAV,CAAhB;EACD,CAFD,MAEO,IAAI,CAACpC,yDAAiB,CAACgB,QAAD,CAAtB,EAAkC;IACvC,IAAIvB,oDAAY,CAACuB,QAAD,CAAhB,EAA4B;MAC1B,IAAQhG,MAAR,GAAmBgG,QAAnB,CAAQhG,MAAR;;MAEA,IAAIA,MAAJ,EAAY;QAAA;;QACV6F,YAAY,UAAZ,CAAoB7F,MAApB;QACAuC,wEAA2B,CAACvC,MAAD,CAA3B;;QAEA,IAAI,wBAAAgG,QAAQ,CAACrJ,KAAT,CAAe2L,GAAf,4EAAoB1F,OAApB,MAAgC5C,MAApC,EAA4C;UAC1CgG,QAAQ,CAACrJ,KAAT,CAAe2L,GAAf,CAAmB1F,OAAnB,GAA6B9B,SAA7B;QACD;MACF;IACF;;IAED,IAAIkF,QAAQ,CAAChG,MAAb,EAAqB;MACnBgG,QAAQ,CAAChG,MAAT,GAAkBc,SAAlB,CADmB,CACU;IAC9B;;IAED,IAAI,CAAC4D,uDAAe,CAACsB,QAAD,CAApB,EAAgC;MAC9B;IACD;EACF;;EAEDA,QAAQ,CAACE,QAAT,CAAkBxK,OAAlB,CAA0B+N,eAA1B;AACD;;AAED,SAAS7B,YAAT,CAAsB3B,QAAtB,EAAgEyB,IAAhE,EAA4Eb,WAA5E,EAAqG;EACnG,IAAIA,WAAJ,EAAiB;IACfZ,QAAQ,CAAC2B,YAAT,CAAsBF,IAAtB,EAA4Bb,WAA5B;EACD,CAFD,MAEO;IACLZ,QAAQ,CAACyD,WAAT,CAAqBhC,IAArB;EACD;AACF;;AAED,SAASI,cAAT,CAAwBxB,QAAxB,EAAyE;EACvE,IAAI9B,0DAAkB,CAAC8B,QAAD,CAAlB,IAAgCtB,yDAAiB,CAACsB,QAAD,CAArD,EAAiE;IAC/D,IAAMqD,SAAS,GAAGrD,QAAQ,CAACJ,QAAT,CAAkBI,QAAQ,CAACJ,QAAT,CAAkB1C,MAAlB,GAA2B,CAA7C,CAAlB;IACA,OAAOsE,cAAc,CAAC6B,SAAD,CAArB;EACD;;EAED,IAAM3J,MAAM,GAAGsG,QAAQ,CAACtG,MAAxB;EACA,IAAQ6G,WAAR,GAAwB7G,MAAxB,CAAQ6G,WAAR;EACA,OAAOA,WAAW,IAAI/F,SAAtB;AACD;;AAED,SAASmH,cAAT,CACE3B,QADF,EACkCC,IADlC,EAC8DqD,SAD9D,EACsF/C,WADtF,EAEE;EACA,IAAI/L,0CAAJ,EAAW;IACT+O,wBAAwB,CAACtD,IAAI,CAACL,QAAN,CAAxB;EACD;;EAED,IAAK,WAAWK,IAAZ,IAAqBA,IAAI,CAAC5J,KAAL,CAAWmN,aAApC,EAAmD;IACjD,OAAOC,sBAAsB,CAACzD,QAAD,EAAWC,IAAX,EAAiBqD,SAAjB,CAA7B;EACD;;EAED,IAAMI,qBAAqB,GAAG1D,QAAQ,CAACJ,QAAT,CAAkB1C,MAAhD;EACA,IAAMyG,iBAAiB,GAAG1D,IAAI,CAACL,QAAL,CAAc1C,MAAxC;EACA,IAAM0G,SAAS,GAAGC,IAAI,CAACC,GAAL,CAASJ,qBAAT,EAAgCC,iBAAhC,CAAlB;EACA,IAAMI,WAAW,GAAG,EAApB;EAEA,IAAMzD,QAAQ,GAAGqD,iBAAiB,GAAGD,qBAApB,GAA4C7J,QAAQ,CAACmK,sBAAT,EAA5C,GAAgFxJ,SAAjG;EACA,IAAMyJ,gBAAgB,GAAGjE,QAAQ,CAACJ,QAAT,CAAkB8D,qBAAqB,GAAG,CAA1C,CAAzB;EACA,IAAMQ,mBAAmB,GAAG3D,WAAW,KACrCoD,iBAAiB,GAAGD,qBAApB,IAA6CO,gBAA7C,GAAgEzC,cAAc,CAACyC,gBAAD,CAA9E,GAAmGzJ,SAD9D,CAAvC;;EAIA,KAAK,IAAI8H,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGsB,SAApB,EAA+BtB,CAAC,EAAhC,EAAoC;IAClC,IAAM6B,SAAS,GAAGpE,iBAAiB,CACjCuD,SADiC,EAEjCtD,QAAQ,CAACJ,QAAT,CAAkB0C,CAAlB,CAFiC,EAGjCrC,IAAI,CAACL,QAAL,CAAc0C,CAAd,CAHiC,EAIjCrC,IAJiC,EAKjCqC,CALiC,EAMjCA,CAAC,IAAIoB,qBAAL,GAA6B;MAAEpD,QAAQ,EAARA;IAAF,CAA7B,GAA4C;MAAEC,WAAW,EAAXA;IAAF,CANX,CAAnC;;IASA,IAAI4D,SAAJ,EAAe;MACbJ,WAAW,CAACnO,IAAZ,CAAiBuO,SAAjB;IACD;EACF;;EAED,IAAI7D,QAAJ,EAAc;IACZgB,YAAY,CAACgC,SAAD,EAAYhD,QAAZ,EAAsB4D,mBAAtB,CAAZ;EACD;;EAED,OAAOH,WAAP;AACD,EAED;AACA;;;AACA,SAASN,sBAAT,CAAgCzD,QAAhC,EAAgEC,IAAhE,EAA4FqD,SAA5F,EAAoH;EAClH,IAAMc,OAAO,GAAG,IAAIzJ,GAAJ,CACdsF,IAAI,CAACL,QAAL,CAAcwC,GAAd,CAAkB,UAAC+B,SAAD,EAAe;IAC/B,IAAMtB,GAAG,GAAG,WAAWsB,SAAX,GAAuBA,SAAS,CAAC9N,KAAV,CAAgBwM,GAAvC,GAA6CrI,SAAzD;;IAEA,IAAIhG,0CAAK,IAAI4J,uDAAe,CAAC+F,SAAD,CAA5B,EAAyC;MACvC;MACA,IAAItB,GAAG,KAAKrI,SAAR,IAAqBqI,GAAG,KAAK,IAAjC,EAAuC;QACrC;QACA7L,OAAO,CAACgH,IAAR,CAAa,kCAAb;MACD;;MAED,IAAIU,yDAAiB,CAACyF,SAAD,CAArB,EAAkC;QAChC,MAAM,IAAIlM,KAAJ,CAAU,qEAAV,CAAN;MACD;IACF;;IAED,OAAO4K,GAAP;EACD,CAhBD,CADc,CAAhB,CADkH,CAqBlH;;EACA,IAAIwB,qBAAqB,GAAG,CAA5B;EACA,IAAMC,cAAc,GAAGtE,QAAQ,CAACJ,QAAT,CACpBvC,MADoB,CACb,UAACC,GAAD,EAAMiH,aAAN,EAAqBjC,CAArB,EAA2B;IACjC,IAAIO,GAAG,GAAG,WAAW0B,aAAX,GAA2BA,aAAa,CAAClO,KAAd,CAAoBwM,GAA/C,GAAqDrI,SAA/D,CADiC,CAEjC;;IACA,IAAMgK,YAAY,GAAG3B,GAAG,KAAKrI,SAAR,IAAqBqI,GAAG,KAAK,IAAlD,CAHiC,CAKjC;;IACA,IAAI2B,YAAY,IAAI,CAACJ,OAAO,CAACxI,GAAR,CAAYiH,GAAZ,CAArB,EAAuC;MACrC9C,iBAAiB,CAACuD,SAAD,EAAYiB,aAAZ,EAA2B/J,SAA3B,EAAsCyF,IAAtC,EAA4C,CAAC,CAA7C,CAAjB;MAEA,OAAO3C,GAAP;IACD,CAJD,MAIO,IAAI,CAACkH,YAAL,EAAmB;MACxB,IAAML,SAAS,GAAGlE,IAAI,CAACL,QAAL,CAAc0C,CAAd,CAAlB;MACA,IAAMmC,WAAW,GAAIN,SAAS,IAAI,WAAWA,SAAzB,GAAsCA,SAAS,CAAC9N,KAAV,CAAgBwM,GAAtD,GAA4DrI,SAAhF,CAFwB,CAGxB;;MACA,IAAI2J,SAAS,IAAI,CAACM,WAAlB,EAA+B;QAC7B5B,GAAG,aAAMzD,gBAAN,SAAyBkD,CAAzB,CAAH,CAD6B,CAE7B;MACD,CAHD,MAGO;QACLvC,iBAAiB,CAACuD,SAAD,EAAYiB,aAAZ,EAA2B/J,SAA3B,EAAsCyF,IAAtC,EAA4C,CAAC,CAA7C,CAAjB;QAEA,OAAO3C,GAAP;MACD;IACF,CAtBgC,CAwBjC;;;IACAA,GAAG,CAACuF,GAAD,CAAH,GAAW;MACTnD,QAAQ,EAAE6E,aADD;MAETpE,KAAK,EAAEkE,qBAAqB,EAFnB;MAGTK,QAAQ,EAAE,WAAWH,aAAX,GAA2BA,aAAa,CAAClO,KAAd,CAAoBsO,aAA/C,GAA+DnK;IAHhE,CAAX;IAKA,OAAO8C,GAAP;EACD,CAhCoB,EAgClB,EAhCkB,CAAvB;EAkCA,IAAIyG,WAA6B,GAAG,EAApC;EAEA,IAAIa,gBAAJ;EACA,IAAIC,aAAJ;EAEA,IAAIC,qBAAqB,GAAG,CAA5B;EAEA7E,IAAI,CAACL,QAAL,CAAcxK,OAAd,CAAsB,UAAC+O,SAAD,EAAY7B,CAAZ,EAAkB;IACtC,IAAMO,GAAG,GAAG,WAAWsB,SAAX,GAAuBA,SAAS,CAAC9N,KAAV,CAAgBwM,GAAvC,aAAgDzD,gBAAhD,SAAmEkD,CAAnE,CAAZ;IACA,IAAMyC,gBAAgB,GAAGT,cAAc,CAACzB,GAAD,CAAvC;;IAEA,IAAI,CAACkC,gBAAL,EAAuB;MACrB,IAAI,CAACH,gBAAL,EAAuB;QACrBA,gBAAgB,GAAG,EAAnB;QACAC,aAAa,GAAGvC,CAAhB;MACD;;MAEDsC,gBAAgB,CAAChP,IAAjB,CAAsBuO,SAAtB;MACA;IACD,CAZqC,CActC;;;IACA,IAAIS,gBAAJ,EAAsB;MACpBb,WAAW,GAAGA,WAAW,CAACiB,MAAZ,CAAmBC,cAAc,CAACL,gBAAD,EAAmBC,aAAnB,EAAmCvB,SAAnC,EAA8CrD,IAA9C,CAAjC,CAAd;MACA2E,gBAAgB,GAAGpK,SAAnB;MACAqK,aAAa,GAAGrK,SAAhB;IACD,CAnBqC,CAqBtC;;;IACA,IAAM0K,WAAW,GAAG,WAAWf,SAAX,GAAuBA,SAAS,CAAC9N,KAAV,CAAgBsO,aAAvC,GAAuDnK,SAA3E,CAtBsC,CAuBtC;;IACA,IAAM2K,cAAc,GAClBJ,gBAAgB,CAAC5E,KAAjB,KAA2B2E,qBAA3B,IAAoDC,gBAAgB,CAACL,QAAjB,KAA8BQ,WADpF;IAGA,IAAME,YAAY,GAAGD,cAAc,IAAIL,qBAAqB,GAAGC,gBAAgB,CAAC5E,KAAhF;;IAEA,IAAI,CAACgF,cAAD,IAAmBC,YAAvB,EAAqC;MACnCN,qBAAqB;IACtB;;IAEDf,WAAW,CAACnO,IAAZ,CACEmK,iBAAiB,CAACuD,SAAD,EAAYyB,gBAAgB,CAACrF,QAA7B,EAAuCyE,SAAvC,EAAkDlE,IAAlD,EAAwDqC,CAAxD,EAA2D;MAC1E;MACA/B,WAAW,EAAE4E,cAAc,GAAG7B,SAAS,CAAC+B,UAAV,CAAqBD,YAAY,GAAG9C,CAAC,GAAG,CAAP,GAAWA,CAA5C,CAAH,GAAoD9H;IAFL,CAA3D,CADnB;EAMD,CAvCD,EAhEkH,CAyGlH;;EACA,IAAIoK,gBAAJ,EAAsB;IACpBb,WAAW,GAAGA,WAAW,CAACiB,MAAZ,CAAmBC,cAAc,CAACL,gBAAD,EAAmBC,aAAnB,EAAmCvB,SAAnC,EAA8CrD,IAA9C,CAAjC,CAAd;EACD;;EAED,OAAO8D,WAAP;AACD;;AAED,SAASkB,cAAT,CACEK,QADF,EAC8BT,aAD9B,EACqDlF,QADrD,EAC4EO,OAD5E,EAEE;EACA,IAAMK,WAAW,GAAGZ,QAAQ,CAAC0F,UAAT,CAAoBR,aAApB,CAApB;;EAEA,IAAIS,QAAQ,CAACpI,MAAT,KAAoB,CAAxB,EAA2B;IACzB,OAAO,CAAC6C,iBAAiB,CAACJ,QAAD,EAAWnF,SAAX,EAAsB8K,QAAQ,CAAC,CAAD,CAA9B,EAAmCpF,OAAnC,EAA4C2E,aAA5C,EAA2D;MAAEtE,WAAW,EAAXA;IAAF,CAA3D,CAAlB,CAAP;EACD;;EAED,IAAMD,QAAQ,GAAGzG,QAAQ,CAACmK,sBAAT,EAAjB;EACA,IAAMD,WAAW,GAAGuB,QAAQ,CAAClD,GAAT,CAAa,UAAC1C,QAAD,EAAW4C,CAAX;IAAA,OAC/BvC,iBAAiB,CAACJ,QAAD,EAAWnF,SAAX,EAAsBkF,QAAtB,EAAgCQ,OAAhC,EAAyC2E,aAAa,GAAGvC,CAAzD,EAA4D;MAAEhC,QAAQ,EAARA;IAAF,CAA5D,CADc;EAAA,CAAb,CAApB;EAIAgB,YAAY,CAAC3B,QAAD,EAAWW,QAAX,EAAqBC,WAArB,CAAZ;EAEA,OAAOwD,WAAP;AACD;;AAED,SAASnB,iBAAT,CAA2BF,GAA3B,EAAwCrM,KAAxC,EAA2D;EACzD,IAAMkP,iBAAiB,GAAGlP,KAAK,CAACoM,KAAN,KAAgBjI,SAA1C;EACA,IAAMgL,mBAAmB,GAAGnP,KAAK,CAACoP,OAAN,KAAkBjL,SAA9C;EACA,IAAMkL,YAAY,GAAG,CAACH,iBAAiB,IAAIC,mBAAtB,KAA8CxG,iBAAiB,CAAC2G,QAAlB,CAA2BjD,GAAG,CAACkD,WAAJ,EAA3B,CAAnE;;EACA,IAAI,CAACF,YAAL,EAAmB;IACjB;EACD;;EAED,IACEjD,KADF,GAEIpM,KAFJ,CACEoM,KADF;EAAA,IACSgD,OADT,GAEIpP,KAFJ,CACSoP,OADT;EAAA,IACkBI,OADlB,GAEIxP,KAFJ,CACkBwP,OADlB;EAAA,IAC2BC,QAD3B,GAEIzP,KAFJ,CAC2ByP,QAD3B;EAIAzP,KAAK,CAACyP,QAAN,GAAiBtL,SAAjB;;EACAnE,KAAK,CAACwP,OAAN,GAAgB,UAACE,CAAD,EAAsC;IACpDF,OAAO,SAAP,IAAAA,OAAO,WAAP,YAAAA,OAAO,CAAGE,CAAH,CAAP;IACAD,QAAQ,SAAR,IAAAA,QAAQ,WAAR,YAAAA,QAAQ,CAAGC,CAAH,CAAR;;IAEA,IAAItD,KAAK,KAAKjI,SAAV,IAAuBiI,KAAK,KAAKsD,CAAC,CAAClE,aAAF,CAAgBY,KAArD,EAA4D;MAC1D,uBAAyCsD,CAAC,CAAClE,aAA3C;MAAA,IAAQmE,cAAR,oBAAQA,cAAR;MAAA,IAAwBC,YAAxB,oBAAwBA,YAAxB;MACA,IAAMC,YAAY,GAAGF,cAAc,KAAKC,YAAnB,IAAmCA,YAAY,KAAKF,CAAC,CAAClE,aAAF,CAAgBY,KAAhB,CAAsBvF,MAA/F;MAEA6I,CAAC,CAAClE,aAAF,CAAgBY,KAAhB,GAAwBA,KAAxB;;MAEA,IAAI,OAAOuD,cAAP,KAA0B,QAA1B,IAAsC,OAAOC,YAAP,KAAwB,QAAlE,EAA4E;QAC1EF,CAAC,CAAClE,aAAF,CAAgBsE,iBAAhB,CAAkCH,cAAlC,EAAkDC,YAAlD;QAEA,IAAMG,cAA8B,GAAG;UAAEJ,cAAc,EAAdA,cAAF;UAAkBC,YAAY,EAAZA,YAAlB;UAAgCC,YAAY,EAAZA;QAAhC,CAAvC,CAH0E,CAI1E;;QACAH,CAAC,CAAClE,aAAF,CAAgBwE,OAAhB,CAAwBC,qBAAxB,GAAgDC,IAAI,CAACC,SAAL,CAAeJ,cAAf,CAAhD;MACD;IACF;;IAED,IAAIX,OAAO,KAAKjL,SAAhB,EAA2B;MACzBuL,CAAC,CAAClE,aAAF,CAAgB4D,OAAhB,GAA0BA,OAA1B;IACD;EACF,CAtBD;AAuBD;;AAED,SAAS1C,0BAAT,CAAoC/H,OAApC,EAA0D3E,KAA1D,EAA6E;EAC3E,IAAI,CAAC2I,iBAAiB,CAAC2G,QAAlB,CAA2B3K,OAAO,CAACU,OAAnC,CAAL,EAAkD;IAChD;EACD;;EAED,IAAIrF,KAAK,CAACoQ,YAAV,EAAwB;IACtB3D,YAAY,CAAC9H,OAAD,EAAU,OAAV,EAAmB3E,KAAK,CAACoQ,YAAzB,CAAZ;EACD;;EAED,IAAIpQ,KAAK,CAACqQ,cAAV,EAA0B;IACxB5D,YAAY,CAAC9H,OAAD,EAAU,SAAV,EAAqB3E,KAAK,CAACqQ,cAA3B,CAAZ;EACD;AACF;;AAED,SAASzE,gBAAT,CAA0BjC,QAA1B,EAAuDC,IAAvD,EAAgFjF,OAAhF,EAAsG;EACpG4H,iBAAiB,CAAC5H,OAAO,CAACU,OAAT,EAAkBuE,IAAI,CAAC5J,KAAvB,CAAjB;EAEA,IAAMsQ,cAAc,GAAGtO,MAAM,CAACC,OAAP,CAAe0H,QAAQ,CAAC3J,KAAxB,CAAvB;EACA,IAAMuQ,UAAU,GAAGvO,MAAM,CAACC,OAAP,CAAe2H,IAAI,CAAC5J,KAApB,CAAnB;EAEAsQ,cAAc,CAACvR,OAAf,CAAuB,iBAAyB;IAAA;IAAA,IAAvByN,GAAuB;IAAA,IAAlBgE,YAAkB;;IAC9C,IAAMC,QAAQ,GAAG7G,IAAI,CAAC5J,KAAL,CAAWwM,GAAX,CAAjB;;IAEA,IACEgE,YAAY,KAAKrM,SAAjB,KAEEsM,QAAQ,KAAKtM,SAAb,IACIqM,YAAY,KAAKC,QAAjB,IAA6BjE,GAAG,CAAC7I,UAAJ,CAAe,IAAf,CAHnC,CADF,EAME;MACA+M,eAAe,CAAC/L,OAAD,EAAU6H,GAAV,EAAegE,YAAf,CAAf;IACD;EACF,CAZD;EAcAD,UAAU,CAACxR,OAAX,CAAmB,iBAAqB;IAAA;IAAA,IAAnByN,GAAmB;IAAA,IAAdiE,QAAc;;IACtC,IAAMD,YAAY,GAAG7G,QAAQ,CAAC3J,KAAT,CAAewM,GAAf,CAArB;;IAEA,IAAIiE,QAAQ,KAAKtM,SAAb,IAA0BsM,QAAQ,KAAKD,YAA3C,EAAyD;MACvD/D,YAAY,CAAC9H,OAAD,EAAU6H,GAAV,EAAeiE,QAAf,CAAZ;IACD;EACF,CAND;AAOD;;AAED,SAAShE,YAAT,CAAsB9H,OAAtB,EAA4C6H,GAA5C,EAAyDJ,KAAzD,EAAqE;EACnE,IAAII,GAAG,KAAK,WAAZ,EAAyB;IACvBmE,eAAe,CAAChM,OAAD,EAAUyH,KAAV,CAAf;EACD,CAFD,MAEO,IAAII,GAAG,KAAK,OAAZ,EAAqB;IAC1B,IAAMoE,OAAO,GAAGjM,OAAhB;;IAEA,IAAIiM,OAAO,CAACxE,KAAR,KAAkBA,KAAtB,EAA6B;MAC3BwE,OAAO,CAACxE,KAAR,GAAgBA,KAAhB,CAD2B,CAG3B;;MACA,IAAMyE,kBAAkB,GAAGD,OAAO,CAACZ,OAAR,CAAgBC,qBAA3C;;MACA,IAAIY,kBAAJ,EAAwB;QACtB,YAAuDX,IAAI,CAACY,KAAL,CAAWD,kBAAX,CAAvD;QAAA,IAAQlB,cAAR,SAAQA,cAAR;QAAA,IAAwBC,YAAxB,SAAwBA,YAAxB;QAAA,IAAsCC,YAAtC,SAAsCA,YAAtC;;QAEA,IAAIA,YAAJ,EAAkB;UAChB,IAAMhJ,MAAM,GAAG+J,OAAO,CAACxE,KAAR,CAAcvF,MAA7B;UACA+J,OAAO,CAACd,iBAAR,CAA0BjJ,MAA1B,EAAkCA,MAAlC;QACD,CAHD,MAGO,IAAI,OAAO8I,cAAP,KAA0B,QAA1B,IAAsC,OAAOC,YAAP,KAAwB,QAAlE,EAA4E;UACjFgB,OAAO,CAACd,iBAAR,CAA0BH,cAA1B,EAA0CC,YAA1C;QACD;MACF;IACF;EACF,CAnBM,MAmBA,IAAIpD,GAAG,KAAK,OAAZ,EAAqB;IAC1B7H,OAAO,CAACoM,KAAR,CAAcC,OAAd,GAAwB5E,KAAxB;EACD,CAFM,MAEA,IAAII,GAAG,KAAK,yBAAZ,EAAuC;IAC5C;IACA7H,OAAO,CAACsM,SAAR,GAAoB7E,KAAK,CAAC8E,MAA1B;EACD,CAHM,MAGA,IAAI1E,GAAG,CAAC7I,UAAJ,CAAe,IAAf,CAAJ,EAA0B;IAC/Be,6DAAgB,CAACC,OAAD,EAAU6H,GAAV,EAAeJ,KAAf,EAAsBI,GAAG,CAAC2E,QAAJ,CAAa,SAAb,CAAtB,CAAhB;EACD,CAFM,MAEA,IAAI3E,GAAG,CAAC7I,UAAJ,CAAe,OAAf,KAA2B6I,GAAG,CAAC7I,UAAJ,CAAe,OAAf,CAA3B,IAAsD+E,eAAe,CAACnD,GAAhB,CAAoBiH,GAApB,CAA1D,EAAoF;IACzF7H,OAAO,CAAC8H,YAAR,CAAqBD,GAArB,EAA0BJ,KAA1B;EACD,CAFM,MAEA,IAAI,CAAC3D,mBAAmB,CAAClD,GAApB,CAAwBiH,GAAxB,CAAL,EAAmC;IACvC7H,OAAD,CAAiBiE,iBAAiB,CAAC4D,GAAD,CAAjB,IAA0BA,GAA3C,IAAkDJ,KAAlD;EACD;AACF;;AAED,SAASsE,eAAT,CAAyB/L,OAAzB,EAA+C6H,GAA/C,EAA4DJ,KAA5D,EAAwE;EACtE,IAAII,GAAG,KAAK,WAAZ,EAAyB;IACvBmE,eAAe,CAAChM,OAAD,EAAU,EAAV,CAAf;EACD,CAFD,MAEO,IAAI6H,GAAG,KAAK,OAAZ,EAAqB;IACzB7H,OAAD,CAA8ByH,KAA9B,GAAsC,EAAtC;EACD,CAFM,MAEA,IAAII,GAAG,KAAK,OAAZ,EAAqB;IAC1B7H,OAAO,CAACoM,KAAR,CAAcC,OAAd,GAAwB,EAAxB;EACD,CAFM,MAEA,IAAIxE,GAAG,KAAK,yBAAZ,EAAuC;IAC5C7H,OAAO,CAACsM,SAAR,GAAoB,EAApB;EACD,CAFM,MAEA,IAAIzE,GAAG,CAAC7I,UAAJ,CAAe,IAAf,CAAJ,EAA0B;IAC/BsB,gEAAmB,CAACN,OAAD,EAAU6H,GAAV,EAAeJ,KAAf,EAAsBI,GAAG,CAAC2E,QAAJ,CAAa,SAAb,CAAtB,CAAnB;EACD,CAFM,MAEA,IAAI,CAAC1I,mBAAmB,CAAClD,GAApB,CAAwBiH,GAAxB,CAAL,EAAmC;IACxC7H,OAAO,CAAC+L,eAAR,CAAwBlE,GAAxB;EACD;AACF;;AAED,SAASmE,eAAT,CAAyBhM,OAAzB,EAA+CyH,KAA/C,EAA8D;EAC5D,IAAMgF,KAAK,GAAGlI,YAAY,CAACzG,GAAb,CAAiBkC,OAAjB,CAAd;;EACA,IAAI,CAACyM,KAAL,EAAY;IACVzM,OAAO,CAAC0M,SAAR,GAAoBjF,KAApB;IACA;EACD;;EAED,IAAMkF,UAAU,GAAG7J,KAAK,CAACC,IAAN,CAAW0J,KAAX,CAAnB;;EACA,IAAIhF,KAAJ,EAAW;IACTkF,UAAU,CAAC/R,IAAX,CAAgB6M,KAAhB;EACD;;EAEDzH,OAAO,CAAC0M,SAAR,GAAoBC,UAAU,CAACC,IAAX,CAAgB,GAAhB,CAApB;AACD;;AAEM,SAASC,aAAT,CAAuB7M,OAAvB,EAAyC0M,SAAzC,EAAiF;EAAA,IAArBI,WAAqB,uEAAP,KAAO;;EACtF,IAAI,CAACA,WAAL,EAAkB;IAChB,IAAMC,UAAU,GAAGL,SAAS,CAACM,KAAV,CAAgB,GAAhB,CAAnB;;IACA,IAAID,UAAU,CAAC7K,MAAX,GAAoB,CAAxB,EAA2B;MACzB6K,UAAU,CAAC3S,OAAX,CAAmB,UAAC6S,EAAD,EAAQ;QACzBJ,aAAa,CAAC7M,OAAD,EAAUiN,EAAV,EAAc,IAAd,CAAb;MACD,CAFD;MAIA;IACD;EACF;;EAEDjN,OAAO,CAACkN,SAAR,CAAkBlM,GAAlB,CAAsB0L,SAAtB;EAEA,IAAMQ,SAAS,GAAG3I,YAAY,CAACzG,GAAb,CAAiBkC,OAAjB,CAAlB;;EACA,IAAIkN,SAAJ,EAAe;IACbA,SAAS,CAAClM,GAAV,CAAc0L,SAAd;EACD,CAFD,MAEO;IACLnI,YAAY,CAACxG,GAAb,CAAiBiC,OAAjB,EAA0B,IAAIL,GAAJ,CAAQ,CAAC+M,SAAD,CAAR,CAA1B;EACD;AACF;AAEM,SAASS,gBAAT,CAA0BnN,OAA1B,EAA4C0M,SAA5C,EAAoF;EAAA,IAArBI,WAAqB,uEAAP,KAAO;;EACzF,IAAI,CAACA,WAAL,EAAkB;IAChB,IAAMC,UAAU,GAAGL,SAAS,CAACM,KAAV,CAAgB,GAAhB,CAAnB;;IACA,IAAID,UAAU,CAAC7K,MAAX,GAAoB,CAAxB,EAA2B;MACzB6K,UAAU,CAAC3S,OAAX,CAAmB,UAAC6S,EAAD,EAAQ;QACzBE,gBAAgB,CAACnN,OAAD,EAAUiN,EAAV,EAAc,IAAd,CAAhB;MACD,CAFD;MAIA;IACD;EACF;;EAEDjN,OAAO,CAACkN,SAAR,CAAkBE,MAAlB,CAAyBV,SAAzB;EAEA,IAAMQ,SAAS,GAAG3I,YAAY,CAACzG,GAAb,CAAiBkC,OAAjB,CAAlB;;EACA,IAAIkN,SAAJ,EAAe;IACbA,SAAS,UAAT,CAAiBR,SAAjB;;IAEA,IAAI,CAACQ,SAAS,CAACvK,IAAf,EAAqB;MACnB4B,YAAY,UAAZ,CAAoBvE,OAApB;IACD;EACF;AACF;AAEM,SAASqN,gBAAT,CAA0BrN,OAA1B,EAA4C0M,SAA5C,EAA+DY,KAA/D,EAAqG;EAAA,IAArBR,WAAqB,uEAAP,KAAO;;EAC1G,IAAI,CAACA,WAAL,EAAkB;IAChB,IAAMC,UAAU,GAAGL,SAAS,CAACM,KAAV,CAAgB,GAAhB,CAAnB;;IACA,IAAID,UAAU,CAAC7K,MAAX,GAAoB,CAAxB,EAA2B;MACzB6K,UAAU,CAAC3S,OAAX,CAAmB,UAAC6S,EAAD,EAAQ;QACzBI,gBAAgB,CAACrN,OAAD,EAAUiN,EAAV,EAAcK,KAAd,EAAqB,IAArB,CAAhB;MACD,CAFD;MAIA;IACD;EACF;;EAEDtN,OAAO,CAACkN,SAAR,CAAkBK,MAAlB,CAAyBb,SAAzB,EAAoCY,KAApC;;EAEA,IAAItN,OAAO,CAACkN,SAAR,CAAkBpO,QAAlB,CAA2B4N,SAA3B,CAAJ,EAA2C;IACzCG,aAAa,CAAC7M,OAAD,EAAU0M,SAAV,CAAb;EACD,CAFD,MAEO;IACLS,gBAAgB,CAACnN,OAAD,EAAU0M,SAAV,CAAhB;EACD;AACF,EAED;;AACA,SAASnE,wBAAT,CAAkC3D,QAAlC,EAAoE;EAClE,IAAM4I,UAAU,GAAG5I,QAAQ,CAAC,CAAD,CAA3B;;EACA,IAAI4I,UAAU,IAAI,WAAWA,UAAzB,IAAuCA,UAAU,CAACnS,KAAX,CAAiBwM,GAAjB,KAAyBrI,SAApE,EAA+E;IAC7E,IAAMyC,IAAI,GAAG2C,QAAQ,CAACvC,MAAT,CAAgB,UAACC,GAAD,EAAamL,KAAb,EAAuB;MAClD,IAAI,WAAWA,KAAX,IAAoBA,KAAK,CAACpS,KAAN,CAAYwM,GAApC,EAAyC;QACvCvF,GAAG,CAAC1H,IAAJ,CAAS6S,KAAK,CAACpS,KAAN,CAAYwM,GAArB;MACD;;MAED,OAAOvF,GAAP;IACD,CANY,EAMV,EANU,CAAb;;IAQA,IAAIL,IAAI,CAACC,MAAL,KAAgB2B,uDAAM,CAAC5B,IAAD,CAAN,CAAaC,MAAjC,EAAyC;MACvC;MACAlG,OAAO,CAACgH,IAAR,CAAa,0BAAb,EAAyCf,IAAI,CAACyL,MAAL,CAAY,UAAC3C,CAAD,EAAIzD,CAAJ,EAAOqG,CAAP;QAAA,OAAaA,CAAC,CAACC,OAAF,CAAU7C,CAAV,MAAiBzD,CAA9B;MAAA,CAAZ,CAAzC;MACA,MAAM,IAAIrK,KAAJ,CAAU,sCAAV,CAAN;IACD;EACF;AACF;;AAED,IAAM4Q,QAAQ,GAAG;EAAEpJ,MAAM,EAANA;AAAF,CAAjB;AACA,iEAAeoJ,QAAf;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjxBA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AASO,IAAKK,uBAAZ;;WAAYA;EAAAA,wBAAAA;EAAAA,wBAAAA;EAAAA,wBAAAA;EAAAA,wBAAAA;EAAAA,wBAAAA;GAAAA,4BAAAA;;AA8GZ,IAAMC,QAAQ,GAAGC,MAAM,CAAC,UAAD,CAAvB;AAEA,IAAMC,sBAAsB,GAAG,CAA/B;AACA,IAAMC,sBAAsB,GAAG,CAA/B;AACA,IAAMC,wBAAwB,GAAG,IAAI5O,GAAJ,CAAQ,CAAC,kBAAD,EAAqB,iBAArB,EAAwC,QAAxC,EAAkD,UAAlD,EAA8D,UAA9D,CAAR,CAAjC;AAEA,IAAI6O,eAAe,GAAG,CAAtB;AACA,IAAIC,iBAAJ;AAEO,SAASnL,cAAT,CAAwBoB,QAAxB,EAAmF;EACxF,OAAOA,QAAQ,CAAC/F,IAAT,KAAkBuP,uBAAuB,CAACQ,KAAjD;AACD;AAEM,SAASrL,aAAT,CAAuBqB,QAAvB,EAAiF;EACtF,OAAOA,QAAQ,CAAC/F,IAAT,KAAkBuP,uBAAuB,CAACS,IAAjD;AACD;AAEM,SAASxL,YAAT,CAAsBuB,QAAtB,EAA+E;EACpF,OAAOA,QAAQ,CAAC/F,IAAT,KAAkBuP,uBAAuB,CAACU,GAAjD;AACD;AAEM,SAAS1L,kBAAT,CAA4BwB,QAA5B,EAA2F;EAChG,OAAOA,QAAQ,CAAC/F,IAAT,KAAkBuP,uBAAuB,CAACW,SAAjD;AACD;AAEM,SAASnL,iBAAT,CAA2BgB,QAA3B,EAAyF;EAC9F,OAAOA,QAAQ,CAAC/F,IAAT,KAAkBuP,uBAAuB,CAACC,QAAjD;AACD;AAEM,SAAS/K,eAAT,CAAyBsB,QAAzB,EAAqF;EAC1F,OAAOvB,YAAY,CAACuB,QAAD,CAAZ,IAA0BxB,kBAAkB,CAACwB,QAAD,CAA5C,IAA0DhB,iBAAiB,CAACgB,QAAD,CAAlF;AACD;;AAED,SAASiD,aAAT,CACEmH,MADF,EAEEzT,KAFF,EAIiD;EAAA,kCAD5CuJ,QAC4C;IAD5CA,QAC4C;EAAA;;EAC/CA,QAAQ,GAAGA,QAAQ,CAACmK,IAAT,EAAX;;EAEA,IAAID,MAAM,KAAKX,QAAf,EAAyB;IACvB,OAAOa,oBAAoB,CAACpK,QAAD,CAA3B;EACD,CAFD,MAEO,IAAI,OAAOkK,MAAP,KAAkB,UAAtB,EAAkC;IACvC,OAAOG,uBAAuB,CAACH,MAAD,EAASzT,KAAK,IAAI,EAAlB,EAAsBuJ,QAAtB,CAA9B;EACD,CAFM,MAEA;IACL,OAAOsK,eAAe,CAACJ,MAAD,EAASzT,KAAK,IAAI,EAAlB,EAAsBuJ,QAAtB,CAAtB;EACD;AACF;;AAED,SAASoK,oBAAT,CAA8BpK,QAA9B,EAAuE;EACrE,OAAO;IACLjG,IAAI,EAAEuP,uBAAuB,CAACC,QADzB;IAELvJ,QAAQ,EAAEuK,aAAa,CAACvK,QAAD,EAAW,IAAX,CAAb,CAA8BwC,GAA9B,CAAkCgI,iBAAlC;EAFL,CAAP;AAID;;AAED,SAASH,uBAAT,CAAiCJ,SAAjC,EAAgDxT,KAAhD,EAA8DuJ,QAA9D,EAAwG;EACtG,IAAIyK,cAAJ;;EACA,IAAIzK,QAAQ,CAAC1C,MAAT,KAAoB,CAAxB,EAA2B;IACzBmN,cAAc,GAAG7P,SAAjB;EACD,CAFD,MAEO,IAAIoF,QAAQ,CAAC1C,MAAT,KAAoB,CAAxB,EAA2B;IAAA,+BACb0C,QADa;;IAC/ByK,cAD+B;EAEjC,CAFM,MAEA;IACLA,cAAc,GAAGzK,QAAjB;EACD;;EAED,IAAMkB,iBAAoC,GAAG;IAC3CwJ,EAAE,EAAE,EAAEd,eADqC;IAE3C9J,QAAQ,EAAE,EAFiC;IAG3CmK,SAAS,EAATA,SAH2C;IAI3CtR,IAAI,EAAEsR,SAAS,CAACtR,IAJ2B;IAK3ClC,KAAK,kCACAA,KADA,GAECgU,cAAc,IAAI;MAAEzK,QAAQ,EAAEyK;IAAZ,CAFnB,CALsC;IAS3CtJ,SAAS,EAAE,KATgC;IAU3CwJ,KAAK,EAAE;MACLC,KAAK,EAAE;QACLC,MAAM,EAAE,CADH;QAELC,QAAQ,EAAE;MAFL,CADF;MAKLC,OAAO,EAAE;QACPF,MAAM,EAAE,CADD;QAEPC,QAAQ,EAAE;MAFH,CALJ;MASLE,KAAK,EAAE;QACLH,MAAM,EAAE,CADH;QAELC,QAAQ,EAAE;MAFL,CATF;MAaLG,IAAI,EAAE;QACJJ,MAAM,EAAE,CADJ;QAEJC,QAAQ,EAAE;MAFN;IAbD;EAVoC,CAA7C;EA8BA5J,iBAAiB,CAACpB,QAAlB,GAA6BoL,qBAAqB,CAAChK,iBAAD,CAAlD;EAEA,OAAOA,iBAAiB,CAACpB,QAAzB;AACD;;AAED,SAASoL,qBAAT,CACEhK,iBADF,EAG2B;EAAA,IADzBlB,QACyB,uEADU,EACV;EACzB,OAAO;IACLjG,IAAI,EAAEuP,uBAAuB,CAACW,SADzB;IAEL/I,iBAAiB,EAAjBA,iBAFK;IAGLzK,KAAK,EAAEyK,iBAAiB,CAACzK,KAHpB;IAILuJ,QAAQ,EAAEuK,aAAa,CAACvK,QAAD,EAAW,IAAX,CAAb,CAA8BwC,GAA9B,CAAkCgI,iBAAlC;EAJL,CAAP;AAMD;;AAED,SAASF,eAAT,CAAyBxH,GAAzB,EAAsCrM,KAAtC,EAAoDuJ,QAApD,EAAwF;EACtF,OAAO;IACLjG,IAAI,EAAEuP,uBAAuB,CAACU,GADzB;IAELlH,GAAG,EAAHA,GAFK;IAGLrM,KAAK,EAALA,KAHK;IAILuJ,QAAQ,EAAEuK,aAAa,CAACvK,QAAD,CAAb,CAAwBwC,GAAxB,CAA4BgI,iBAA5B;EAJL,CAAP;AAMD,EAED;;;AACA,SAASD,aAAT,CAAuBvK,QAAvB,EAAyD;EAAA,IAAjBmL,OAAiB,uEAAP,KAAO;EACvD,IAAIzI,CAAC,GAAG1C,QAAQ,CAAC1C,MAAT,GAAkB,CAA1B;;EAEA,OAAOoF,CAAC,IAAI,CAAZ,EAAeA,CAAC,EAAhB,EAAoB;IAClB,IAAI,CAAC0I,kBAAkB,CAACpL,QAAQ,CAAC0C,CAAD,CAAT,CAAvB,EAAsC;MACpC;IACD;EACF;;EAED,IAAIA,CAAC,KAAK1C,QAAQ,CAAC1C,MAAT,GAAkB,CAA5B,EAA+B;IAC7B,OAAO0C,QAAP;EACD;;EAED,IAAI0C,CAAC,KAAK,CAAC,CAAP,IAAYyI,OAAhB,EAAyB;IACvB,OAAOnL,QAAQ,CAACqL,KAAT,CAAe,CAAf,EAAkB,CAAlB,CAAP;EACD;;EAED,OAAOrL,QAAQ,CAACqL,KAAT,CAAe,CAAf,EAAkB3I,CAAC,GAAG,CAAtB,CAAP;AACD;;AAED,SAAS0I,kBAAT,CAA4BvC,KAA5B,EAAwC;EACtC;EACA,OAAOA,KAAK,KAAK,KAAV,IAAmBA,KAAK,KAAK,IAA7B,IAAqCA,KAAK,KAAKjO,SAAtD;AACD;;AAED,SAAS4P,iBAAT,CAA2B3B,KAA3B,EAAuD;EACrD,IAAIuC,kBAAkB,CAACvC,KAAD,CAAtB,EAA+B;IAC7B,OAAOyC,iBAAiB,EAAxB;EACD,CAFD,MAEO,IAAI9M,eAAe,CAACqK,KAAD,CAAnB,EAA4B;IACjC,OAAOA,KAAP;EACD,CAFM,MAEA;IACL,OAAO0C,gBAAgB,CAAC1C,KAAD,CAAvB;EACD;AACF;;AAED,SAAS0C,gBAAT,CAA0B1I,KAA1B,EAA0D;EACxD,OAAO;IACL9I,IAAI,EAAEuP,uBAAuB,CAACS,IADzB;IAELlH,KAAK,EAAE2I,MAAM,CAAC3I,KAAD;EAFR,CAAP;AAID;;AAED,SAASyI,iBAAT,GAAkD;EAChD,OAAO;IAAEvR,IAAI,EAAEuP,uBAAuB,CAACQ;EAAhC,CAAP;AACD,EAED;;;AACA,IAAM2B,gBAA4B,GAAG;EAAEC,KAAK,EAAE;IAAEC,aAAa,EAAE,OAAjB;IAA0BC,WAAW,EAAE;EAAvC;AAAT,CAArC;AAEA3R,QAAQ,CAACkB,gBAAT,CAA0B,UAA1B,EAAsC,YAAM;EAC1C;EACA/D,OAAO,CAACgH,IAAR,CAAa,YAAb,EAA2B8K,wDAAO,CAACzQ,MAAM,CAAC+E,MAAP,CAAciO,gBAAd,CAAD,EAAkC,aAAlC,EAAiD,MAAjD,CAAlC;AACD,CAHD;AAKA,IAAII,sBAAsB,GAAG,IAAI9Q,GAAJ,EAA7B;AACA,IAAI+Q,sBAAsB,GAAG,IAAI/Q,GAAJ,EAA7B;AACA,IAAIgR,cAAc,GAAG,IAAIvU,GAAJ,EAArB;AACA,IAAIwU,eAAe,GAAG,IAAIxU,GAAJ,EAAtB;AACA,IAAIyU,oBAAoB,GAAG,IAAIzU,GAAJ,EAA3B;AACA,IAAI0U,qBAAqB,GAAG,IAAI1U,GAAJ,EAA5B;AACA,IAAI2U,0BAA0B,GAAG,KAAjC;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAM9W,kBAAkB,GAAGN,8DAAY,CAACkB,oEAAD,EAAiB,YAAM;EAC5DkW,0BAA0B,GAAG,IAA7B;EAEAL,sBAAsB,GAAG,IAAI/Q,GAAJ,EAAzB;EACA,IAAMqR,iBAAiB,GAAGlO,KAAK,CAC5BC,IADuB,CAClB0N,sBADkB,EAEvBQ,IAFuB,CAElB,UAACtD,CAAD,EAAIuD,CAAJ;IAAA,OAAUvD,CAAC,CAAC2B,EAAF,GAAO4B,CAAC,CAAC5B,EAAnB;EAAA,CAFkB,CAA1B;EAGAmB,sBAAsB,GAAG,IAAI9Q,GAAJ,EAAzB;EAEA,IAAMwR,eAAe,GAAGP,eAAxB;EACAA,eAAe,GAAG,IAAIxU,GAAJ,EAAlB;EACA+U,eAAe,CAAC/W,OAAhB,CAAwB,UAACU,EAAD;IAAA,OAAQA,EAAE,EAAV;EAAA,CAAxB;EAEA,IAAMsW,cAAc,GAAGT,cAAvB;EACAA,cAAc,GAAG,IAAIvU,GAAJ,EAAjB;EACAgV,cAAc,CAAChX,OAAf,CAAuB,UAACU,EAAD;IAAA,OAAQA,EAAE,EAAV;EAAA,CAAvB;EAEAC,yEAAe,CAAC,YAAM;IACpBiW,iBAAiB,CAAC5W,OAAlB,CAA0BiX,wBAA1B;IACAL,iBAAiB,CAAC5W,OAAlB,CAA0B,UAACkX,QAAD,EAAc;MACtC,IAAIZ,sBAAsB,CAAE9P,GAAxB,CAA4B0Q,QAAQ,CAAChC,EAArC,CAAJ,EAA8C;QAC5C;MACD;;MAEDiC,oBAAoB,CAACD,QAAD,CAApB;IACD,CAND;IAQAP,0BAA0B,GAAG,KAA7B;IACApN,mBAAmB;EACpB,CAZc,CAAf;AAaD,CA9BsC,CAAvC;AAgCO,SAASC,uBAAT,GAAmC;EACxC,OAAOmN,0BAAP;AACD;AAEM,SAASpN,mBAAT,GAA+B;EACpC,IAAM6N,qBAAqB,GAAGV,qBAA9B;EACAA,qBAAqB,GAAG,IAAI1U,GAAJ,EAAxB;EACAoV,qBAAqB,CAACpX,OAAtB,CAA8B,UAACU,EAAD;IAAA,OAAQA,EAAE,EAAV;EAAA,CAA9B;EAEA,IAAM2W,oBAAoB,GAAGZ,oBAA7B;EACAA,oBAAoB,GAAG,IAAIzU,GAAJ,EAAvB;EACAqV,oBAAoB,CAACrX,OAArB,CAA6B,UAACU,EAAD;IAAA,OAAQA,EAAE,EAAV;EAAA,CAA7B;AACD;AAEM,SAAS0I,eAAT,CAAyBsC,iBAAzB,EAA+D;EACpE4K,sBAAsB,CAAC1P,GAAvB,CAA2B8E,iBAAiB,CAACwJ,EAA7C;EAEA,IAAQT,SAAR,GAA6B/I,iBAA7B,CAAQ+I,SAAR;EAAA,IAAmBxT,KAAnB,GAA6ByK,iBAA7B,CAAmBzK,KAAnB;EACA,IAAIqW,gBAAJ;EAEA9X,0DAAQ,CAAC,YAAM;IACb6U,iBAAiB,GAAG3I,iBAApB;IACAA,iBAAiB,CAACyJ,KAAlB,CAAwBC,KAAxB,CAA8BC,MAA9B,GAAuC,CAAvC;IACA3J,iBAAiB,CAACyJ,KAAlB,CAAwBI,OAAxB,CAAgCF,MAAhC,GAAyC,CAAzC;IACA3J,iBAAiB,CAACyJ,KAAlB,CAAwBK,KAAxB,CAA8BH,MAA9B,GAAuC,CAAvC;IACA3J,iBAAiB,CAACyJ,KAAlB,CAAwBM,IAAxB,CAA6BJ,MAA7B,GAAsC,CAAtC,CALa,CAOb;;IACA,IAAIkC,aAAJ;;IACA,IAAInY,0CAAJ,EAAW;MACT,IAAM+W,aAAa,GAAGzK,iBAAiB,CAACvI,IAAxC;;MACA,IAAI,CAAC8S,gBAAgB,CAACE,aAAD,CAArB,EAAsC;QACpCF,gBAAgB,CAACE,aAAD,CAAhB,GAAkC;UAChCA,aAAa,EAAbA,aADgC;UAEhCC,WAAW,EAAE,CAFmB;UAGhCoB,WAAW,EAAE;QAHmB,CAAlC;MAKD;;MAED,IAAInY,+CAAJ,EAAgB;QACd,IAAI,CAAC8U,wBAAwB,CAAC3N,GAAzB,CAA6B2P,aAA7B,CAAL,EAAkD;UAChD;UACAvU,OAAO,CAAC6V,GAAR,0BAA8BtB,aAA9B;QACD;MACF;;MAEDoB,aAAa,GAAGG,WAAW,CAACC,GAAZ,EAAhB;IACD;;IAEDL,gBAAgB,GAAG7C,SAAS,CAACxT,KAAD,CAA5B;;IAEA,IAAI7B,0CAAJ,EAAW;MACT,IAAMwY,QAAQ,GAAGF,WAAW,CAACC,GAAZ,KAAoBJ,aAArC;MACA,IAAMpB,cAAa,GAAGzK,iBAAiB,CAACvI,IAAxC;;MACA,IAAIyU,QAAQ,GAAG3D,sBAAf,EAAuC;QACrC;QACArS,OAAO,CAACgH,IAAR,0CAA+CuN,cAA/C,eAAiE1H,IAAI,CAACoJ,KAAL,CAAWD,QAAX,CAAjE;MACD;;MACD3B,gBAAgB,CAACE,cAAD,CAAhB,CAAgCqB,WAAhC,CAA4ChX,IAA5C,CAAiDoX,QAAjD;;MACA3B,gBAAgB,CAACE,cAAD,CAAhB,CAAgCC,WAAhC;MACAH,gBAAgB,CAACC,KAAjB,CAAuBE,WAAvB;;MAEA,IAAI/W,+CAAJ,EAAgB;QACduU,2EAAuB,WAAIuC,cAAJ,cAAvB;QACAvC,2EAAuB,WAAIuC,cAAJ,gBAA8ByB,QAA9B,CAAvB;MACD;IACF;EACF,CA/CO,EA+CL,YAAM;IACP;IACAhW,OAAO,CAACC,KAAR,mDAAyD6J,iBAAiB,CAACvI,IAA3E;IAEAmU,gBAAgB,GAAG5L,iBAAiB,CAACoM,aAArC;EACD,CApDO,CAAR;;EAsDA,IAAIpM,iBAAiB,CAACC,SAAlB,IAA+B2L,gBAAgB,KAAK5L,iBAAiB,CAACoM,aAA1E,EAAyF;IACvF,OAAOpM,iBAAiB,CAACpB,QAAzB;EACD;;EAEDoB,iBAAiB,CAACoM,aAAlB,GAAkCR,gBAAlC;EAEA,IAAM9M,QAAQ,GAAG9B,KAAK,CAACqP,OAAN,CAAcT,gBAAd,IAAkCA,gBAAlC,GAAqD,CAACA,gBAAD,CAAtE;EACA5L,iBAAiB,CAACpB,QAAlB,GAA6BoL,qBAAqB,CAAChK,iBAAD,EAAoBlB,QAApB,CAAlD;EAEA,OAAOkB,iBAAiB,CAACpB,QAAzB;AACD;AAEM,SAASzB,iBAAT,CAA2BmP,IAA3B,EAAiDnN,IAAjD,EAAuE;EAC5E,IAAI,QAAOmN,IAAP,cAAuBnN,IAAvB,CAAJ,EAAiC;IAC/B,OAAO,IAAP;EACD,CAFD,MAEO,IAAImN,IAAI,CAACzT,IAAL,KAAcsG,IAAI,CAACtG,IAAvB,EAA6B;IAClC,OAAO,IAAP;EACD,CAFM,MAEA,IAAI0E,aAAa,CAAC+O,IAAD,CAAb,IAAuB/O,aAAa,CAAC4B,IAAD,CAAxC,EAAgD;IACrD,OAAOmN,IAAI,CAAC3K,KAAL,KAAexC,IAAI,CAACwC,KAA3B;EACD,CAFM,MAEA,IAAItE,YAAY,CAACiP,IAAD,CAAZ,IAAsBjP,YAAY,CAAC8B,IAAD,CAAtC,EAA8C;IACnD,OAAQmN,IAAI,CAAC1K,GAAL,KAAazC,IAAI,CAACyC,GAAnB,IAA4B0K,IAAI,CAAC/W,KAAL,CAAWwM,GAAX,KAAmB5C,IAAI,CAAC5J,KAAL,CAAWwM,GAAjE;EACD,CAFM,MAEA,IAAI3E,kBAAkB,CAACkP,IAAD,CAAlB,IAA4BlP,kBAAkB,CAAC+B,IAAD,CAAlD,EAA0D;IAC/D,OACEmN,IAAI,CAACtM,iBAAL,CAAuB+I,SAAvB,KAAqC5J,IAAI,CAACa,iBAAL,CAAuB+I,SADvD,IAGLuD,IAAI,CAAC/W,KAAL,CAAWwM,GAAX,KAAmB5C,IAAI,CAAC5J,KAAL,CAAWwM,GAHhC;EAKD;;EAED,OAAO,KAAP;AACD;AAEM,SAAStE,cAAT,CAAwBuC,iBAAxB,EAA8D;EACnEtC,eAAe,CAACsC,iBAAD,CAAf;EACAA,iBAAiB,CAACC,SAAlB,GAA8B,IAA9B;EACA,OAAOD,iBAAiB,CAACpB,QAAzB;AACD;AAEM,SAASjB,gBAAT,CAA0BqC,iBAA1B,EAAgE;EACrE,IAAI,CAACA,iBAAiB,CAACC,SAAvB,EAAkC;IAChC;EACD;;EAED2K,sBAAsB,CAAC1P,GAAvB,CAA2B8E,iBAAiB,CAACwJ,EAA7C;EAEAxJ,iBAAiB,CAACyJ,KAAlB,CAAwBI,OAAxB,CAAgCD,QAAhC,CAAyCtV,OAAzC,CAAiD,UAACiY,MAAD,EAAY;IAAA;;IAC3D,IAAIA,MAAM,CAACC,OAAX,EAAoB;MAClB1Y,0DAAQ,CAACyY,MAAM,CAACC,OAAR,CAAR;IACD;;IAEDD,MAAM,CAACC,OAAP,GAAiB9S,SAAjB;IACA,yBAAA6S,MAAM,CAACE,cAAP,qFAAAF,MAAM;EACP,CAPD;EASAvM,iBAAiB,CAACC,SAAlB,GAA8B,KAA9B;EAEAyM,MAAM,CAAC1M,iBAAD,CAAN;AACD,EAED;;AACA,SAAS0M,MAAT,CAAgB1M,iBAAhB,EAAsD;EACpDA,iBAAiB,CAACyJ,KAAlB,CAAwBI,OAAxB,CAAgCD,QAAhC,CAAyCtV,OAAzC,CAAiD,UAACqY,IAAD,EAAU;IACzDA,IAAI,CAACC,QAAL,GAAgBlT,SAAhB;IACAiT,IAAI,CAACH,OAAL,GAAe9S,SAAf;IACAiT,IAAI,CAACF,cAAL,GAAsB/S,SAAtB;IACAiT,IAAI,CAACE,YAAL,GAAoBnT,SAApB;EACD,CALD;EAOAsG,iBAAiB,CAACyJ,KAAlB,CAAwBC,KAAxB,CAA8BE,QAA9B,CAAuCtV,OAAvC,CAA+C,UAACqY,IAAD,EAAU;IACvDA,IAAI,CAAChL,KAAL,GAAajI,SAAb;IACAiT,IAAI,CAACG,SAAL,GAAiBpT,SAAjB;IACAiT,IAAI,CAACI,MAAL,GAAcrT,SAAd;EACD,CAJD;EAMAsG,iBAAiB,CAACyJ,KAAlB,CAAwBK,KAAxB,CAA8BF,QAA9B,CAAuCtV,OAAvC,CAA+C,UAACqY,IAAD,EAAU;IACvDA,IAAI,CAAChL,KAAL,GAAajI,SAAb;IACAiT,IAAI,CAACE,YAAL,GAAoBnT,SAApB;EACD,CAHD;EAKAsG,iBAAiB,CAACyJ,KAAlB,CAAwBM,IAAxB,CAA6BH,QAA7B,CAAsCtV,OAAtC,CAA8C,UAACqY,IAAD,EAAU;IACtDA,IAAI,CAACnR,OAAL,GAAe9B,SAAf;EACD,CAFD;EAIAsG,iBAAiB,CAACyJ,KAAlB,GAA0B/P,SAA1B;EACAsG,iBAAiB,CAACpB,QAAlB,GAA6BlF,SAA7B;EACAsG,iBAAiB,CAACoM,aAAlB,GAAkC1S,SAAlC;EACAsG,iBAAiB,CAAC+I,SAAlB,GAA8BrP,SAA9B;EACAsG,iBAAiB,CAACzK,KAAlB,GAA0BmE,SAA1B;EACAsG,iBAAiB,CAACqB,QAAlB,GAA6B3H,SAA7B;AACD;;AAED,SAAS6R,wBAAT,CAAkCvL,iBAAlC,EAAwE;EACtE,IAAI,CAACA,iBAAiB,CAACC,SAAvB,EAAkC;IAChC;EACD;;EAEDD,iBAAiB,CAACyJ,KAAlB,CAAwBC,KAAxB,CAA8BE,QAA9B,CAAuCtV,OAAvC,CAA+C,UAACqY,IAAD,EAAU;IACvDA,IAAI,CAAChL,KAAL,GAAagL,IAAI,CAACG,SAAlB;EACD,CAFD;AAGD;;AAED,SAASrB,oBAAT,CAA8BzL,iBAA9B,EAAoE;EAClE,IAAI,CAACA,iBAAiB,CAACC,SAAnB,IAAgC,CAACD,iBAAiB,CAACqB,QAAvD,EAAiE;IAC/D;EACD;;EAED,IAAM2L,cAAc,GAAGhN,iBAAiB,CAACpB,QAAzC;EAEAlB,eAAe,CAACsC,iBAAD,CAAf;;EAEA,IAAIA,iBAAiB,CAACpB,QAAlB,KAA+BoO,cAAnC,EAAmD;IACjDhN,iBAAiB,CAACqB,QAAlB;EACD;AACF;;AAIM,SAAS4L,QAAT,CAAqBC,OAArB,EAAkCC,QAAlC,EAA8E;EACnF,4BAA6BxE,iBAAiB,CAACc,KAAlB,CAAwBC,KAArD;EAAA,IAAQC,MAAR,yBAAQA,MAAR;EAAA,IAAgBC,QAAhB,yBAAgBA,QAAhB;;EAEA,IAAIA,QAAQ,CAACD,MAAD,CAAR,KAAqBjQ,SAAzB,EAAoC;IAClCkQ,QAAQ,CAACD,MAAD,CAAR,GAAmB;MACjBhI,KAAK,EAAEuL,OADU;MAEjBJ,SAAS,EAAEI,OAFM;MAGjBH,MAAM,EAAG,UAAC/M,iBAAD;QAAA,OAAuB,UAACgG,QAAD,EAAuC;UACrE,IAAI,OAAOA,QAAP,KAAoB,UAAxB,EAAoC;YAClCA,QAAQ,GAAIA,QAAD,CAAgC4D,QAAQ,CAACD,MAAD,CAAR,CAAiBhI,KAAjD,CAAX;UACD;;UAED,IAAIiI,QAAQ,CAACD,MAAD,CAAR,CAAiBmD,SAAjB,KAA+B9G,QAAnC,EAA6C;YAC3C;UACD;;UAED4D,QAAQ,CAACD,MAAD,CAAR,CAAiBmD,SAAjB,GAA6B9G,QAA7B;UAEA2E,sBAAsB,CAACzP,GAAvB,CAA2B8E,iBAA3B;UACA7L,kBAAkB;;UAElB,IAAIR,+CAAJ,EAAgB;YACd,IAAIqM,iBAAiB,CAACvI,IAAlB,KAA2B,iBAA/B,EAAkD;cAChD;cACAvB,OAAO,CAAC6V,GAAR,CACE,kBADF,EAEE/L,iBAAiB,CAACvI,IAFpB,EAGE;cACAuI,iBAAiB,CAAC+I,SAAlB,IAAgC/I,iBAAiB,CAAC+I,SAAnB,CAA8CqE,0BAA7E,eACUpN,iBAAiB,CAAC+I,SAAnB,CAA8CqE,0BADvD,IAEI,EANN,oCAO6BzD,MAP7B,SAOsCwD,QAAQ,eAAQA,QAAR,SAAsB,EAPpE,qBAQEvD,QAAQ,CAACD,MAAD,CAAR,CAAiBmD,SARnB;YAUD;UACF;QACF,CA7BQ;MAAA,CAAD,CA6BLnE,iBA7BK;IAHS,CAAnB;EAkCD;;EAEDA,iBAAiB,CAACc,KAAlB,CAAwBC,KAAxB,CAA8BC,MAA9B;EAEA,OAAO,CACLC,QAAQ,CAACD,MAAD,CAAR,CAAiBhI,KADZ,EAELiI,QAAQ,CAACD,MAAD,CAAR,CAAiBoD,MAFZ,CAAP;AAID;;AAED,SAASM,aAAT,CACEC,QADF,EAEEf,MAFF,EAGEM,YAHF,EAIEM,QAJF,EAKE;EAAA;;EACA,6BAA6BxE,iBAAiB,CAACc,KAAlB,CAAwBI,OAArD;EAAA,IAAQF,MAAR,0BAAQA,MAAR;EAAA,IAAgBC,QAAhB,0BAAgBA,QAAhB;EACA,IAAM5J,iBAAiB,GAAG2I,iBAA1B;;EAEA,IAAM4E,gBAAgB,GAAG,SAAnBA,gBAAmB;IAAA,OAAMzZ,0DAAQ,CAAC,YAAM;MAC5C,IAAQ0Y,OAAR,GAAoB5C,QAAQ,CAACD,MAAD,CAA5B,CAAQ6C,OAAR;;MACA,IAAI,CAACA,OAAL,EAAc;QACZ;MACD,CAJ2C,CAM5C;;;MACA,IAAIX,aAAJ;;MACA,IAAInY,0CAAJ,EAAW;QACTmY,aAAa,GAAGG,WAAW,CAACC,GAAZ,EAAhB;MACD;;MAEDO,OAAO;;MAEP,IAAI9Y,0CAAJ,EAAW;QACT,IAAMwY,QAAQ,GAAGF,WAAW,CAACC,GAAZ,KAAoBJ,aAArC;QACA,IAAMpB,aAAa,GAAGzK,iBAAiB,CAACvI,IAAxC;;QACA,IAAIyU,QAAQ,GAAG1D,sBAAf,EAAuC;UACrC;UACAtS,OAAO,CAACgH,IAAR,kDAC4CyM,MAD5C,eACuDc,aADvD,eACyE1H,IAAI,CAACoJ,KAAL,CAAWD,QAAX,CADzE;QAGD;MACF;IACF,CAxBsC,EAwBpC,YAAM;MACP;MACAhW,OAAO,CAACC,KAAR,sDAA4DwT,MAA5D,iBAAyE3J,iBAAiB,CAACvI,IAA3F;IACD,CA3BsC,EA2BpC,YAAM;MACPmS,QAAQ,CAACD,MAAD,CAAR,CAAiB6C,OAAjB,GAA2B9S,SAA3B;IACD,CA7BsC,CAAd;EAAA,CAAzB;;EA+BA,IAAM8T,SAAS,GAAG,SAAZA,SAAY;IAAA,OAAM1Z,0DAAQ,CAAC,YAAM;MACrC,IAAI,CAACkM,iBAAiB,CAACC,SAAvB,EAAkC;QAChC;MACD,CAHoC,CAKrC;;;MACA,IAAI4L,aAAJ;;MACA,IAAInY,0CAAJ,EAAW;QACTmY,aAAa,GAAGG,WAAW,CAACC,GAAZ,EAAhB;MACD;;MAED,IAAM7U,MAAM,GAAGmV,MAAM,EAArB;;MACA,IAAI,OAAOnV,MAAP,KAAkB,UAAtB,EAAkC;QAChCwS,QAAQ,CAACD,MAAD,CAAR,CAAiB6C,OAAjB,GAA2BpV,MAA3B;MACD;;MAED,IAAI1D,0CAAJ,EAAW;QACT,IAAMwY,QAAQ,GAAGF,WAAW,CAACC,GAAZ,KAAoBJ,aAArC;QACA,IAAMpB,aAAa,GAAGzK,iBAAiB,CAACvI,IAAxC;;QACA,IAAIyU,QAAQ,GAAG1D,sBAAf,EAAuC;UACrC;UACAtS,OAAO,CAACgH,IAAR,0CAA+CyM,MAA/C,eAA0Dc,aAA1D,eAA4E1H,IAAI,CAACoJ,KAAL,CAAWD,QAAX,CAA5E;QACD;MACF;IACF,CAxB+B,EAwB7B,YAAM;MACP;MACAhW,OAAO,CAACC,KAAR,8CAAoDwT,MAApD,iBAAiE3J,iBAAiB,CAACvI,IAAnF;IACD,CA3B+B,CAAd;EAAA,CAAlB;;EA6BA,SAASmV,QAAT,GAAoB;IAClB,IAAMa,QAAQ,aAAMzN,iBAAiB,CAACwJ,EAAxB,cAA8BG,MAA9B,CAAd;;IAEA,IAAI2D,QAAJ,EAAc;MACZtC,qBAAqB,CAAC/S,GAAtB,CAA0BwV,QAA1B,EAAoCF,gBAApC;MACAxC,oBAAoB,CAAC9S,GAArB,CAAyBwV,QAAzB,EAAmCD,SAAnC;IACD,CAHD,MAGO;MACL1C,eAAe,CAAC7S,GAAhB,CAAoBwV,QAApB,EAA8BF,gBAA9B;MACA1C,cAAc,CAAC5S,GAAf,CAAmBwV,QAAnB,EAA6BD,SAA7B;IACD;;IAEDrZ,kBAAkB;EACnB;;EAED,IAAI0Y,YAAY,wBAAIjD,QAAQ,CAACD,MAAD,CAAZ,6CAAI,iBAAkBkD,YAAtC,EAAoD;IAClD,IAAIA,YAAY,CAACa,IAAb,CAAkB,UAACC,UAAD,EAAanM,CAAb;MAAA,OAAmBmM,UAAU,KAAK/D,QAAQ,CAACD,MAAD,CAAR,CAAiBkD,YAAjB,CAA+BrL,CAA/B,CAAlC;IAAA,CAAlB,CAAJ,EAA4F;MAC1F,IAAI2L,QAAJ,EAAc;QACZ,IAAMS,QAAQ,GAAGf,YAAY,CAACtQ,MAAb,CAAoB,UAACsR,GAAD,EAAM7H,QAAN,EAAgBxE,CAAhB,EAAsB;UACzD,IAAMsM,SAAS,GAAGlE,QAAQ,CAACD,MAAD,CAAR,CAAiBkD,YAAjB,CAA+BrL,CAA/B,CAAlB;;UACA,IAAIwE,QAAQ,KAAK8H,SAAjB,EAA4B;YAC1BD,GAAG,CAAC/Y,IAAJ,WAAY0M,CAAZ,eAAkBsM,SAAlB,iBAAkC9H,QAAlC;UACD;;UAED,OAAO6H,GAAP;QACD,CAPgB,EAOd,EAPc,CAAjB,CADY,CAUZ;;QACA3X,OAAO,CAAC6V,GAAR,4BAA+BoB,QAA/B,iCAAoES,QAAQ,CAAC9G,IAAT,CAAc,IAAd,CAApE;MACD;;MAED8F,QAAQ;IACT;EACF,CAlBD,MAkBO;IACL,IAAIO,QAAJ,EAAc;MACZ;MACAjX,OAAO,CAAC6V,GAAR,4BAA+BoB,QAA/B;IACD;;IAEDP,QAAQ;EACT;;EAED,IAAMmB,UAAU,GAAG,CAACnE,QAAQ,CAACD,MAAD,CAA5B;EAEAC,QAAQ,CAACD,MAAD,CAAR,mCACKC,QAAQ,CAACD,MAAD,CADb;IAEEkD,YAAY,EAAZA,YAFF;IAGED,QAAQ,EAARA;EAHF;;EAMA,SAASoB,YAAT,GAAwB;IACtB,IAAMC,QAAQ,GAAGpB,YAAH,aAAGA,YAAH,uBAAGA,YAAY,CAAEjF,MAAd,CAAqBO,mDAArB,EAA+B7G,GAA/B,CAAmC,UAAC4M,MAAD;MAAA,OAAYA,MAAM,CAACC,SAAP,CAAiB,YAAM;QACrFvE,QAAQ,CAACD,MAAD,CAAR,CAAiBiD,QAAjB;MACD,CAF+D,CAAZ;IAAA,CAAnC,CAAjB;;IAIA,IAAI,EAACqB,QAAD,aAACA,QAAD,eAACA,QAAQ,CAAE7R,MAAX,CAAJ,EAAuB;MACrB,OAAO1C,SAAP;IACD;;IAED,OAAO,YAAM;MACXuU,QAAQ,CAAC3Z,OAAT,CAAiB,UAACkY,OAAD;QAAA,OAAaA,OAAO,EAApB;MAAA,CAAjB;IACD,CAFD;EAGD;;EAED,IAAIuB,UAAJ,EAAgB;IACdnE,QAAQ,CAACD,MAAD,CAAR,CAAiB8C,cAAjB,GAAkCuB,YAAY,EAA9C;EACD;;EAEDrF,iBAAiB,CAACc,KAAlB,CAAwBI,OAAxB,CAAgCF,MAAhC;AACD;;AAEM,SAASyE,SAAT,CAAmB7B,MAAnB,EAAmCM,YAAnC,EAAkEM,QAAlE,EAAqF;EAC1F,OAAOE,aAAa,CAAC,KAAD,EAAQd,MAAR,EAAgBM,YAAhB,EAA8BM,QAA9B,CAApB;AACD;AAEM,SAASkB,eAAT,CAAyB9B,MAAzB,EAAyCM,YAAzC,EAAwEM,QAAxE,EAA2F;EAChG,OAAOE,aAAa,CAAC,IAAD,EAAOd,MAAP,EAAeM,YAAf,EAA6BM,QAA7B,CAApB;AACD;AAEM,SAASmB,OAAT,CAAgCC,QAAhC,EAAmD1B,YAAnD,EAAwEM,QAAxE,EAA8F;EACnG,6BAA6BxE,iBAAiB,CAACc,KAAlB,CAAwBK,KAArD;EAAA,IAAQH,MAAR,0BAAQA,MAAR;EAAA,IAAgBC,QAAhB,0BAAgBA,QAAhB;;EACA,WAAgBA,QAAQ,CAACD,MAAD,CAAR,IAAoB,EAApC;EAAA,IAAMhI,KAAN,QAAMA,KAAN;;EAEA,IACEiI,QAAQ,CAACD,MAAD,CAAR,KAAqBjQ,SAArB,IACGmT,YAAY,CAACzQ,MAAb,KAAwBwN,QAAQ,CAACD,MAAD,CAAR,CAAiBkD,YAAjB,CAA8BzQ,MADzD,IAEGyQ,YAAY,CAACa,IAAb,CAAkB,UAACC,UAAD,EAAanM,CAAb;IAAA,OAAmBmM,UAAU,KAAK/D,QAAQ,CAACD,MAAD,CAAR,CAAiBkD,YAAjB,CAA8BrL,CAA9B,CAAlC;EAAA,CAAlB,CAHL,EAIE;IACA,IAAI9N,0CAAK,IAAIyZ,QAAb,EAAuB;MACrB;MACAjX,OAAO,CAAC6V,GAAR,2BACqBpD,iBAAiB,CAAClR,IADvC,eACgD0V,QADhD,8BAEEvD,QAAQ,CAACD,MAAD,CAAR,GACI1B,2EAAe,CAAC2B,QAAQ,CAACD,MAAD,CAAR,CAAiBkD,YAAlB,EAAgCA,YAAhC,CAAf,CAA6D/F,IAA7D,CAAkE,IAAlE,CADJ,GAEI,gBAJN;IAMD;;IAEDnF,KAAK,GAAG4M,QAAQ,EAAhB;EACD;;EAED3E,QAAQ,CAACD,MAAD,CAAR,GAAmB;IACjBhI,KAAK,EAALA,KADiB;IAEjBkL,YAAY,EAAZA;EAFiB,CAAnB;EAKAlE,iBAAiB,CAACc,KAAlB,CAAwBK,KAAxB,CAA8BH,MAA9B;EAEA,OAAOhI,KAAP;AACD;AAEM,SAAS6M,WAAT,CAA4CC,WAA5C,EAA4D5B,YAA5D,EAAiFM,QAAjF,EAAuG;EAC5G;EACA,OAAOmB,OAAO,CAAC;IAAA,OAAMG,WAAN;EAAA,CAAD,EAAoB5B,YAApB,EAAkCM,QAAlC,CAAd;AACD;AAIgE;AACjE;AACO,SAASuB,MAAT,CAAmBxB,OAAnB,EAAuC;EAC5C,6BAA6BvE,iBAAiB,CAACc,KAAlB,CAAwBM,IAArD;EAAA,IAAQJ,MAAR,0BAAQA,MAAR;EAAA,IAAgBC,QAAhB,0BAAgBA,QAAhB;;EACA,IAAI,CAACA,QAAQ,CAACD,MAAD,CAAb,EAAuB;IACrBC,QAAQ,CAACD,MAAD,CAAR,GAAmB;MACjBnO,OAAO,EAAE0R;IADQ,CAAnB;EAGD;;EAEDvE,iBAAiB,CAACc,KAAlB,CAAwBM,IAAxB,CAA6BJ,MAA7B;EAEA,OAAOC,QAAQ,CAACD,MAAD,CAAf;AACD;AAEM,SAASgF,IAAT,CAA4B5F,SAA5B,EAA0CoE,QAA1C,EAA6D;EAClE,OAAO,SAASyB,gBAAT,CAA0BrZ,KAA1B,EAAwC;IAC7C;IACA,OAAO+Y,OAAO,CAAC;MAAA,OAAMzM,aAAa,CAACkH,SAAD,EAAYxT,KAAZ,CAAnB;IAAA,CAAD,EAAwCgC,MAAM,CAAC+E,MAAP,CAAc/G,KAAd,CAAxC,EAA8D4X,QAA9D,CAAd;EACD,CAHD;AAID;AAED,iEAAe;EACbtL,aAAa,EAAbA,aADa;EAEbwG,QAAQ,EAARA;AAFa,CAAf;;;;;;;;;;;;;;;ACryBe,SAASwG,oBAAT,CAA8BC,YAA9B,EAAwDC,QAAxD,EAA8E;EAC3F,IAAID,YAAY,KAAKC,QAArB,EAA+B;IAC7B,OAAO,IAAP;EACD;;EAED,IAAMC,WAAW,GAAGzX,MAAM,CAAC4E,IAAP,CAAY2S,YAAZ,CAApB;EACA,IAAMG,iBAAiB,GAAGD,WAAW,CAAC5S,MAAtC;EACA,IAAM8S,aAAa,GAAG3X,MAAM,CAAC4E,IAAP,CAAY4S,QAAZ,EAAsB3S,MAA5C;;EAEA,IAAI6S,iBAAiB,KAAKC,aAA1B,EAAyC;IACvC,OAAO,KAAP;EACD;;EAED,IAAID,iBAAiB,KAAK,CAA1B,EAA6B;IAC3B,OAAO,IAAP;EACD;;EAED,KAAK,IAAIzN,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGyN,iBAApB,EAAuCzN,CAAC,EAAxC,EAA4C;IAC1C,IAAM3J,IAAI,GAAGmX,WAAW,CAACxN,CAAD,CAAxB;;IACA,IAAIsN,YAAY,CAACjX,IAAD,CAAZ,KAAuBkX,QAAQ,CAAClX,IAAD,CAAnC,EAA2C;MACzC,OAAO,KAAP;IACD;EACF;;EAED,OAAO,IAAP;AACD;AAEM,SAASoQ,eAAT,CAAyB6G,YAAzB,EAAmDC,QAAnD,EAAyE;EAC9E,IAAMC,WAAW,GAAGzX,MAAM,CAAC4E,IAAP,CAAY2S,YAAZ,CAApB;EACA,IAAMG,iBAAiB,GAAGD,WAAW,CAAC5S,MAAtC;EACA,IAAM8S,aAAa,GAAG3X,MAAM,CAAC4E,IAAP,CAAY4S,QAAZ,EAAsB3S,MAA5C;;EAEA,IAAI6S,iBAAiB,KAAKC,aAA1B,EAAyC;IACvC,OAAO,CAAC,UAAD,CAAP;EACD;;EAED,OAAOF,WAAW,CAACzS,MAAZ,CAAmB,UAACsR,GAAD,EAAMhW,IAAN,EAAe;IACvC,IAAIiX,YAAY,CAACjX,IAAD,CAAZ,KAAuBkX,QAAQ,CAAClX,IAAD,CAAnC,EAA2C;MACzCgW,GAAG,CAAC/Y,IAAJ,WAAY+C,IAAZ,eAAqBiX,YAAY,CAACjX,IAAD,CAAjC,iBAA8CkX,QAAQ,CAAClX,IAAD,CAAtD;IACD;;IAED,OAAOgW,GAAP;EACD,CANM,EAMJ,EANI,CAAP;AAOD;;;;;;;;;;;;;;AC3CM,SAASsB,qBAAT,GAAiC;EACtC,IAAMC,SAAS,GAAG,IAAIvV,GAAJ,EAAlB;;EAEA,SAASwV,WAAT,CAAqBra,EAArB,EAA4C;IAC1Coa,SAAS,CAAClU,GAAV,CAAclG,EAAd;IAEA,OAAO,YAAM;MACXsa,cAAc,CAACta,EAAD,CAAd;IACD,CAFD;EAGD;;EAED,SAASsa,cAAT,CAAwBta,EAAxB,EAA+C;IAC7Coa,SAAS,UAAT,CAAiBpa,EAAjB;EACD;;EAED,SAASua,YAAT,GAAsC;IAAA,kCAAbhX,IAAa;MAAbA,IAAa;IAAA;;IACpC6W,SAAS,CAAC9a,OAAV,CAAkB,UAACkb,QAAD,EAAc;MAC9BA,QAAQ,MAAR,SAAYjX,IAAZ;IACD,CAFD;EAGD;;EAED,SAASkX,YAAT,GAAwB;IACtB,OAAOC,OAAO,CAACN,SAAS,CAACvS,IAAX,CAAd;EACD;;EAED,OAAO;IACL0S,YAAY,EAAZA,YADK;IAELF,WAAW,EAAXA,WAFK;IAGLC,cAAc,EAAdA,cAHK;IAILG,YAAY,EAAZA;EAJK,CAAP;AAMD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC/BD;AAEA,IAAMG,cAAc,GAAG,IAAI/V,GAAJ,CAAQ,CAC7B,0BAD6B,EAE7B,yBAF6B,EAG7B,gBAH6B,CAAR,CAAvB;AAKA,IAAMgW,mBAAmB,GAAG,CAA5B;AACA,IAAMC,oBAAoB,GAAG,CAA7B;AACA,IAAMC,QAAQ,GAAG,iCAAjB;AAEA,IAAIC,QAGF,GAAG,EAHL;AAKA,IAAMC,uBAAuB,GAAGN,qDAAQ,CAACO,cAAD,EAAiB,GAAjB,EAAsB,KAAtB,CAAxC;AAEA,IAAIC,QAAJ;AAEO,SAASC,cAAT,CAAwBC,IAAxB,EAAsC;EAC3C,IAAI,CAACF,QAAL,EAAe;IACbG,YAAY;EACb;;EAED,IAAMC,IAAI,GAAG,IAAIC,IAAJ,EAAb;EACA,IAAMC,aAAa,aAAMF,IAAI,CAACG,kBAAL,EAAN,cAAmCH,IAAI,CAACI,eAAL,EAAnC,CAAnB;EACA,IAAMC,WAAW,GAAGT,QAAQ,CAACU,SAAT,GAAqB,EAArB,IAA2BV,QAAQ,CAACW,YAAT,GAAwBX,QAAQ,CAACY,YAAhF;EAEAZ,QAAQ,CAAC3J,SAAT,cAAyBiK,aAAzB,eAA2CJ,IAA3C;;EAEA,IAAIO,WAAJ,EAAiB;IACfT,QAAQ,CAACU,SAAT,GAAqBV,QAAQ,CAACW,YAA9B;EACD;AACF;AAEM,SAAS5I,uBAAT,CAAiCnG,GAAjC,EAAyD;EAAA,IAAXJ,KAAW,uEAAH,CAAG;EAC9D,IAAMsK,GAAG,GAAGuE,IAAI,CAACvE,GAAL,EAAZ;;EACA,IAAI,CAAC+D,QAAQ,CAACjO,GAAD,CAAb,EAAoB;IAClBiO,QAAQ,CAACjO,GAAD,CAAR,GAAgB;MAAEJ,KAAK,EAALA,KAAF;MAASqP,YAAY,EAAE/E;IAAvB,CAAhB;EACD,CAFD,MAEO;IACL+D,QAAQ,CAACjO,GAAD,CAAR,CAAcJ,KAAd,IAAuBA,KAAvB;IACAqO,QAAQ,CAACjO,GAAD,CAAR,CAAciP,YAAd,GAA6B/E,GAA7B;EACD;;EAEDgE,uBAAuB;AACxB;AAEM,SAASC,cAAT,GAA0B;EAC/B,IAAI,CAACC,QAAL,EAAe;IACbG,YAAY;EACb;;EAED,IAAMW,aAAa,GAAGT,IAAI,CAACvE,GAAL,KAAa,GAAnC;;EACA,4BAAkC1U,MAAM,CAACC,OAAP,CAAewY,QAAf,EAAyBzT,MAAzB,CAAgC,UAACC,GAAD,QAA2B;IAAA;IAAA,IAApBuF,GAAoB;IAAA,IAAbJ,KAAa,YAAbA,KAAa;;IAC3F,IAAIiO,cAAc,CAAC9U,GAAf,CAAmBiH,GAAnB,CAAJ,EAA6B;MAC3B,OAAOvF,GAAP;IACD;;IAED,IAAIuF,GAAG,CAAC8C,QAAJ,CAAa,SAAb,KAA2BlD,KAAK,GAAGnF,GAAG,CAAC,CAAD,CAA1C,EAA+C;MAC7CA,GAAG,CAAC,CAAD,CAAH,GAASmF,KAAT;IACD;;IAED,IAAII,GAAG,CAAC8C,QAAJ,CAAa,UAAb,KAA4BlD,KAAK,GAAGnF,GAAG,CAAC,CAAD,CAA3C,EAAgD;MAC9CA,GAAG,CAAC,CAAD,CAAH,GAASmF,KAAT;IACD;;IAED,OAAOnF,GAAP;EACD,CAdiC,EAc/B,CAAC,CAAD,EAAI,CAAJ,CAd+B,CAAlC;EAAA;EAAA,IAAO0U,UAAP;EAAA,IAAmBC,WAAnB;;EAgBAhB,QAAQ,CAAC3J,SAAT,GAAqBjP,MAAM,CACxBC,OADkB,CACVwY,QADU,EAElBpI,MAFkB,CAEX;IAAA;IAAA,IAAE7F,GAAF;IAAA,IAASJ,KAAT,YAASA,KAAT;;IAAA,OACL,CAACiO,cAAc,CAAC9U,GAAf,CAAmBiH,GAAnB,CAAF,KACGA,GAAG,CAAC8C,QAAJ,CAAa,SAAb,KAA2BlD,KAAK,GAAGkO,mBAApC,IACI9N,GAAG,CAAC8C,QAAJ,CAAa,UAAb,KAA4BlD,KAAK,GAAGmO,oBAF1C,CADM;EAAA,CAFW,EAQlB3E,IARkB,CAQb,UAACtD,CAAD,EAAIuD,CAAJ;IAAA,OACJA,CAAC,CAAC,CAAD,CAAD,CAAK4F,YAAL,GAAoBnJ,CAAC,CAAC,CAAD,CAAD,CAAKmJ,YADrB;EAAA,CARa,EAWlB1P,GAXkB,CAWd;IAAA;IAAA,IAAES,GAAF;IAAA;IAAA,IAASJ,KAAT,UAASA,KAAT;IAAA,IAAgBqP,YAAhB,UAAgBA,YAAhB;;IAAA,OAAqC,2CACNI,WAAW,CAACzP,KAAK,IAAII,GAAG,CAAC8C,QAAJ,CAAa,SAAb,IAA0BqM,UAA1B,GAAuCC,WAA3C,CAAN,CADL,2BAE9BH,YAAY,GAAGC,aAAf,GAA+BlB,QAA/B,GAA0C,EAFZ,cAEkBhO,GAFlB,eAE0BgB,IAAI,CAACoJ,KAAL,CAAWxK,KAAX,CAF1B,cAGxC,QAHwC,EAIxCmF,IAJwC,CAInC,IAJmC,CAArC;EAAA,CAXc,EAgBlBA,IAhBkB,CAgBb,IAhBa,CAArB;AAiBD;;AAED,SAASwJ,YAAT,GAAwB;EACtBH,QAAQ,GAAGpX,QAAQ,CAAC8I,aAAT,CAAuB,KAAvB,CAAX;EACAsO,QAAQ,CAAC7J,KAAT,CAAeC,OAAf,GAAyB,2FACrB,iGADJ;EAEAxN,QAAQ,CAACK,IAAT,CAAckJ,WAAd,CAA0B6N,QAA1B;EAEA,IAAMkB,OAAO,GAAGtY,QAAQ,CAAC8I,aAAT,CAAuB,GAAvB,CAAhB;EACAwP,OAAO,CAAC/K,KAAR,CAAcC,OAAd,GAAwB,qFACpB,kBADJ;EAEA8K,OAAO,CAACC,SAAR,GAAoB,IAApB;EACAD,OAAO,CAACpX,gBAAR,CAAyB,OAAzB,EAAkC,YAAM;IACtC+V,QAAQ,GAAG,EAAX;IACAC,uBAAuB;EACxB,CAHD;EAIAlX,QAAQ,CAACK,IAAT,CAAckJ,WAAd,CAA0B+O,OAA1B;AACD;;AAED,SAASD,WAAT,CAAqBG,MAArB,EAAqC;EACnC,OAAOxO,IAAI,CAACoJ,KAAL,CAAW,MAAMoF,MAAjB,EAAyBC,QAAzB,CAAkC,EAAlC,EAAsCC,QAAtC,CAA+C,CAA/C,EAAkD,GAAlD,CAAP;AACD;;;;;;;;;;;;;;AC5GD/b,MAAM,CAACuE,gBAAP,CAAwB,OAAxB,EAAiCyX,gBAAjC;AACAhc,MAAM,CAACuE,gBAAP,CAAwB,oBAAxB,EAA8CyX,gBAA9C;;AAEA,SAASA,gBAAT,CAA0BzM,CAA1B,EAAiE;EAC/DA,CAAC,CAACvJ,cAAF;EAEAiW,WAAW,CAAC1M,CAAC,YAAY2M,UAAb,GAA0B3M,CAAC,CAAC9O,KAA5B,GAAoC8O,CAAC,CAAC4M,MAAvC,CAAX;AACD;;AAEM,SAASF,WAAT,CAAqBG,GAArB,EAAiC;EACtC;EACA5b,OAAO,CAACC,KAAR,CAAc2b,GAAd;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;ACJM,SAAS9J,OAAT,CACL+J,UADK,EAELC,SAFK,EAIA;EAAA,IADLC,IACK,uEADqD,KACrD;;EACL,SAASC,aAAT,CAAuBrK,CAAvB,EAA6BuD,CAA7B,EAAmC+G,gBAAnC,EAAmFC,KAAnF,EAAmG;IACjG,IAAMC,MAAM,GAAG,CAAC,OAAOF,gBAAP,KAA4B,UAA5B,GAAyCA,gBAAgB,CAACtK,CAAD,CAAzD,GAA+DA,CAAC,CAACsK,gBAAD,CAAjE,KAAwF,CAAvG;IACA,IAAMG,MAAM,GAAG,CAAC,OAAOH,gBAAP,KAA4B,UAA5B,GAAyCA,gBAAgB,CAAC/G,CAAD,CAAzD,GAA+DA,CAAC,CAAC+G,gBAAD,CAAjE,KAAwF,CAAvG;IAEA,OAAOC,KAAK,GAAGC,MAAM,GAAGC,MAAZ,GAAqBA,MAAM,GAAGD,MAA1C;EACD;;EAED,IAAIrV,KAAK,CAACqP,OAAN,CAAc2F,SAAd,CAAJ,EAA8B;IAC5B,WAAuBhV,KAAK,CAACqP,OAAN,CAAc4F,IAAd,IAAsBA,IAAtB,GAA6B,CAACA,IAAD,EAAOA,IAAP,CAApD;IAAA;IAAA,IAAOM,KAAP;IAAA,IAAcC,KAAd;;IACA,gCAAiCR,SAAjC;IAAA,IAAOS,UAAP;IAAA,IAAmBC,UAAnB;;IACA,IAAMC,MAAM,GAAGJ,KAAK,KAAK,KAAzB;IACA,IAAMK,MAAM,GAAGJ,KAAK,KAAK,KAAzB;IAEA,OAAOT,UAAU,CAAC5G,IAAX,CAAgB,UAACtD,CAAD,EAAIuD,CAAJ,EAAU;MAC/B,OAAO8G,aAAa,CAACrK,CAAD,EAAIuD,CAAJ,EAAOqH,UAAP,EAAmBE,MAAnB,CAAb,IAA2CT,aAAa,CAACrK,CAAD,EAAIuD,CAAJ,EAAOsH,UAAP,EAAmBE,MAAnB,CAA/D;IACD,CAFM,CAAP;EAGD;;EAED,IAAMR,KAAK,GAAGH,IAAI,KAAK,KAAvB;EACA,OAAOF,UAAU,CAAC5G,IAAX,CAAgB,UAACtD,CAAD,EAAIuD,CAAJ,EAAU;IAC/B,OAAO8G,aAAa,CAACrK,CAAD,EAAIuD,CAAJ,EAAO4G,SAAP,EAAkBI,KAAlB,CAApB;EACD,CAFM,CAAP;AAGD;AAEM,SAASrU,MAAT,CAA+B8U,KAA/B,EAAgD;EACrD,OAAO7V,KAAK,CAACC,IAAN,CAAW,IAAIpD,GAAJ,CAAQgZ,KAAR,CAAX,CAAP;AACD;;;;;;;;;;;;;;;;ACvCD;AACA;AAEA,IAAMC,iBAAiB,GAAG,CAACnf,+CAA3B;AAEe,SAASG,QAAT,CAAkBkB,EAAlB,EAAgC+d,MAAhC,EAA+DC,MAA/D,EAA4F;EACzG,IAAI,CAACF,iBAAL,EAAwB;IACtB,OAAO9d,EAAE,EAAT;EACD;;EAED,IAAI;IACF,OAAOA,EAAE,EAAT;EACD,CAFD,CAEE,OAAO8c,GAAP,EAAiB;IACjBiB,MAAM,SAAN,IAAAA,MAAM,WAAN,YAAAA,MAAM,CAAGjB,GAAH,CAAN;IACAH,yDAAW,CAACG,GAAD,CAAX;IACA,OAAOpY,SAAP;EACD,CAND,SAMU;IACRsZ,MAAM,SAAN,IAAAA,MAAM,WAAN,YAAAA,MAAM;EACP;AACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjBM,SAASrD,QAAT,CACLva,EADK,EAEL6d,EAFK,EAIL;EAAA,IADAC,cACA,uEADiB,IACjB;EACA,IAAIC,QAAJ;EACA,IAAIC,SAAJ;EACA,IAAI7a,IAAJ;EAEA,OAAO,YAA6B;IAClC6a,SAAS,GAAG,IAAZ;;IADkC,kCAAzBC,KAAyB;MAAzBA,KAAyB;IAAA;;IAElC9a,IAAI,GAAG8a,KAAP;;IAEA,IAAI,CAACF,QAAL,EAAe;MACb,IAAID,cAAJ,EAAoB;QAClBE,SAAS,GAAG,KAAZ;QACAhe,EAAE,MAAF,4BAAMmD,IAAN;MACD,CAJY,CAMb;;;MACA4a,QAAQ,GAAGG,IAAI,CAACC,WAAL,CAAiB,YAAM;QAChC,IAAI,CAACH,SAAL,EAAgB;UACd;UACAE,IAAI,CAACE,aAAL,CAAmBL,QAAnB;UACAA,QAAQ,GAAGzZ,SAAX;UACA;QACD;;QAED0Z,SAAS,GAAG,KAAZ;QACAhe,EAAE,MAAF,4BAAMmD,IAAN;MACD,CAVU,EAUR0a,EAVQ,CAAX;IAWD;EACF,CAvBD;AAwBD;AAEM,SAASQ,mBAAT,CAA0Dre,EAA1D,EAAiE;EACtE,OAAOvB,YAAY,CAAC6f,SAAD,EAAYte,EAAZ,CAAnB;AACD;AAEM,SAASvB,YAAT,CAAmD8f,WAAnD,EAA2Eve,EAA3E,EAAkF;EACvF,IAAIwe,OAAO,GAAG,KAAd;EACA,IAAIrb,IAAJ;EAEA,OAAO,YAA6B;IAAA,mCAAzB8a,KAAyB;MAAzBA,KAAyB;IAAA;;IAClC9a,IAAI,GAAG8a,KAAP;;IAEA,IAAI,CAACO,OAAL,EAAc;MACZA,OAAO,GAAG,IAAV;MAEAD,WAAW,CAAC,YAAM;QAChBC,OAAO,GAAG,KAAV;QACAxe,EAAE,MAAF,4BAAMmD,IAAN;MACD,CAHU,CAAX;IAID;EACF,CAXD;AAYD;AAEM,SAASsb,MAAT,CAAgB7e,EAAhB,EAAwC8e,OAAxC,EAA0D;EAC/D;EACA,IAAIR,IAAI,CAACS,mBAAT,EAA8B;IAC5B;IACAT,IAAI,CAACS,mBAAL,CAAyB/e,EAAzB,EAA6B;MAAE8e,OAAO,EAAPA;IAAF,CAA7B;EACD,CAHD,MAGO;IACLJ,SAAS,CAAC1e,EAAD,CAAT;EACD;AACF;AAED,IAAMgf,4BAA4B,GAAG,GAArC;AAEA,IAAIC,gBAAJ;AACA,IAAIC,wBAAJ;AACA,IAAIC,sBAAJ,EAEA;AACA;;AACO,SAASvgB,OAAT,CAAiB4b,QAAjB,EAA4E;EAAA,IAA7B4E,mBAA6B,uEAAP,KAAO;;EACjF,IAAI,CAACH,gBAAL,EAAuB;IACrBA,gBAAgB,GAAG,IAAIpa,GAAJ,CAAQ,CAAC2V,QAAD,CAAR,CAAnB;IAEA6E,qBAAqB,CAAC,YAAM;MAC1B,IAAMC,gBAAgB,GAAGL,gBAAzB;MAEAA,gBAAgB,GAAGva,SAAnB;MACAwa,wBAAwB,GAAGxa,SAA3B;;MAEA,IAAIya,sBAAJ,EAA4B;QAC1BI,YAAY,CAACJ,sBAAD,CAAZ;QACAA,sBAAsB,GAAGza,SAAzB;MACD;;MAED4a,gBAAgB,CAAChgB,OAAjB,CAAyB,UAACU,EAAD;QAAA,OAAQA,EAAE,EAAV;MAAA,CAAzB;IACD,CAZoB,CAArB;EAaD,CAhBD,MAgBO;IACLif,gBAAgB,CAAC/Y,GAAjB,CAAqBsU,QAArB;EACD;;EAED,IAAI4E,mBAAJ,EAAyB;IACvB,IAAI,CAACF,wBAAL,EAA+B;MAC7BA,wBAAwB,GAAG,IAAIra,GAAJ,CAAQ,CAAC2V,QAAD,CAAR,CAA3B;IACD,CAFD,MAEO;MACL0E,wBAAwB,CAAChZ,GAAzB,CAA6BsU,QAA7B;IACD;;IAED,IAAI,CAAC2E,sBAAL,EAA6B;MAC3BA,sBAAsB,GAAGze,MAAM,CAAC8e,UAAP,CAAkB,YAAM;QAC/C,IAAMC,uBAAuB,GAAGP,wBAAhC;;QAEA,IAAID,gBAAJ,EAAsB;UACpBQ,uBAAuB,CAACngB,OAAxB,CAAgC2f,gBAAgB,UAAhD,EAAyDA,gBAAzD;QACD;;QACDC,wBAAwB,GAAGxa,SAA3B;;QAEA,IAAIya,sBAAJ,EAA4B;UAC1BI,YAAY,CAACJ,sBAAD,CAAZ;UACAA,sBAAsB,GAAGza,SAAzB;QACD;;QAED+a,uBAAuB,CAACngB,OAAxB,CAAgC,UAACU,EAAD;UAAA,OAAQA,EAAE,EAAV;QAAA,CAAhC;MACD,CAdwB,EActBgf,4BAdsB,CAAzB;IAeD;EACF;AACF;AAED,IAAIU,kBAAJ;AAEO,SAAShB,SAAT,CAAmBlE,QAAnB,EAAiD;EACtD,IAAI,CAACkF,kBAAL,EAAyB;IACvBA,kBAAkB,GAAG,CAAClF,QAAD,CAArB;IAEAhb,OAAO,CAACC,OAAR,GAAkBC,IAAlB,CAAuB,YAAM;MAC3B,IAAM4f,gBAAgB,GAAGI,kBAAzB;MACAA,kBAAkB,GAAGhb,SAArB;MACA4a,gBAAgB,CAAChgB,OAAjB,CAAyB,UAACU,EAAD;QAAA,OAAQA,EAAE,EAAV;MAAA,CAAzB;IACD,CAJD;EAKD,CARD,MAQO;IACL0f,kBAAkB,CAAC5f,IAAnB,CAAwB0a,QAAxB;EACD;AACF;AAED,IAAImF,qBAAJ;AAEO,SAASC,cAAT,CAAwBpF,QAAxB,EAAsE;EAAA,IAAhBqF,MAAgB,uEAAP,KAAO;;EAC3E,IAAI,CAACF,qBAAL,EAA4B;IAC1BA,qBAAqB,GAAG,EAAxB,CAD0B,CAE1B;;IACArB,IAAI,CAACrZ,gBAAL,CAAsB,cAAtB,EAAsC,YAAM;MAC1C0a,qBAAqB,CAAErgB,OAAvB,CAA+B,UAACU,EAAD;QAAA,OAAQA,EAAE,EAAV;MAAA,CAA/B;IACD,CAFD;EAGD;;EAED,IAAI6f,MAAJ,EAAY;IACVF,qBAAqB,CAAC7f,IAAtB,CAA2B0a,QAA3B;EACD,CAFD,MAEO;IACLmF,qBAAqB,CAACG,OAAtB,CAA8BtF,QAA9B;EACD;;EAED,OAAO,YAAM;IACXmF,qBAAqB,GAAGA,qBAAqB,CAAE/M,MAAvB,CAA8B,UAAC5S,EAAD;MAAA,OAAQA,EAAE,KAAKwa,QAAf;IAAA,CAA9B,CAAxB;EACD,CAFD;AAGD;;;;;;;;;;;;;;;;;;;AChKD;AAOA,IAAMuF,WAAW,GAAGzM,MAAM,CAAC,aAAD,CAA1B;AAOO,SAASH,QAAT,CAAkB6M,GAAlB,EAA2C;EAChD,OAAO,OAAOA,GAAP,KAAe,UAAf,IAA6BD,WAAW,IAAIC,GAAnD;AACD,EAED;;AACA,IAAMC,oBAAoB,GAAG,IAAI3e,GAAJ,EAA7B;AAEA,IAAI4e,aAAJ;AAEO,SAASC,YAAT,CAAyBxP,YAAzB,EAA2C;EAAA;;EAChD,IAAM+D,KAAuC,GAAG;IAC9C/H,KAAK,EAAEgE,YADuC;IAE9CkE,OAAO,EAAEsF,iEAAqB;EAFgB,CAAhD;;EAKA,SAAShB,SAAT,CAAmB5B,MAAnB,EAA+C;IAC7C,IAAM6I,WAAW,GAAG1L,KAAK,CAACG,OAAN,CAAcwF,WAAd,CAA0B9C,MAA1B,CAApB;;IAEA,IAAI,CAAC0I,oBAAoB,CAACna,GAArB,CAAyByR,MAAzB,CAAL,EAAuC;MACrC0I,oBAAoB,CAAChd,GAArB,CAAyBsU,MAAzB,EAAiC,IAAI1S,GAAJ,CAAQ,CAACub,WAAD,CAAR,CAAjC;IACD,CAFD,MAEO;MACLH,oBAAoB,CAACjd,GAArB,CAAyBuU,MAAzB,EAAkCrR,GAAlC,CAAsCka,WAAtC;IACD;;IAED,OAAO,YAAM;MACXA,WAAW;MAEX,IAAMC,YAAY,GAAGJ,oBAAoB,CAACjd,GAArB,CAAyBuU,MAAzB,CAArB;MACA8I,YAAY,UAAZ,CAAoBD,WAApB;;MACA,IAAI,CAACC,YAAY,CAACxY,IAAlB,EAAwB;QACtBoY,oBAAoB,UAApB,CAA4B1I,MAA5B;MACD;IACF,CARD;EASD;;EAED,SAAS+I,MAAT,GAAkB;IAChB,IAAIJ,aAAJ,EAAmB;MACjB/G,SAAS,CAAC+G,aAAD,CAAT;IACD;;IAED,OAAOxL,KAAK,CAAC/H,KAAb;EACD;;EAED,SAASoL,MAAT,CAAgB/G,QAAhB,EAA6B;IAC3B,IAAI0D,KAAK,CAAC/H,KAAN,KAAgBqE,QAApB,EAA8B;MAC5B;IACD;;IAED0D,KAAK,CAAC/H,KAAN,GAAcqE,QAAd;IACA0D,KAAK,CAACG,OAAN,CAAc0F,YAAd;EACD;;EAED,IAAMrB,MAAM,GAAG3W,MAAM,CAACge,MAAP,CAAcD,MAAd,wDACZP,WADY,EACEA,WADF,gDAEb5G,SAFa,mBAAf;EAKA,OAAO,CAACD,MAAD,EAASnB,MAAT,CAAP;AACD;AAEM,SAASyI,aAAT,CAAuBjJ,MAAvB,EAAmD;EAAA;;EACxD,yBAAA0I,oBAAoB,CAACjd,GAArB,CAAyBuU,MAAzB,iFAAkCjY,OAAlC,CAA0C,UAAC8gB,WAAD,EAAiB;IACzDA,WAAW;EACZ,CAFD;EAGAH,oBAAoB,UAApB,CAA4B1I,MAA5B;AACD;;;;;;UChFD;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;;;;;;;;;;;;;;;;;;;;;ACNA;AACA;AAEAxE,mEAAA,eACE,uEAAC,GAAD,OADF,EAEEhP,QAAQ,CAAC2c,cAAT,CAAwB,MAAxB,CAFF;;AAKA,SAASC,GAAT,GAAe;EACb,oBACE,iGACE,kGADF,eAGE,uEAAC,KAAD,OAHF,eAIE,uEAAC,QAAD,OAJF,CADF;AAQD;;AAED,SAASC,KAAT,GAAiB;EACf,oBACE,oHADF;AAKD;;AAED,SAASC,QAAT,GAAoB;EAClB,gBAAkC5I,0DAAQ,CAAC,IAAD,CAA1C;EAAA;EAAA,IAAO6I,SAAP;EAAA,IAAkBC,YAAlB;;EAEA,SAASC,WAAT,GAAuB;IACrBD,YAAY,CAAC,UAACva,OAAD;MAAA,OAAa,CAACA,OAAd;IAAA,CAAD,CAAZ;EACD;;EAED,oBACE,mGACE;IAAO,IAAI,EAAC,UAAZ;IAAuB,OAAO,EAAEsa,SAAhC;IAA2C,QAAQ,EAAEE;EAArD,EADF,uCADF;AAMD,C","sources":["webpack://teact/./src/config.ts","webpack://teact/./src/lib/fasterdom/fasterdom.ts","webpack://teact/./src/lib/fasterdom/layoutCauses.ts","webpack://teact/./src/lib/fasterdom/stricterdom.ts","webpack://teact/./src/teact/dom-events.ts","webpack://teact/./src/teact/teact-dom.ts","webpack://teact/./src/teact/teact.ts","webpack://teact/./src/util/arePropsShallowEqual.ts","webpack://teact/./src/util/callbacks.ts","webpack://teact/./src/util/debugOverlay.ts","webpack://teact/./src/util/handleError.ts","webpack://teact/./src/util/iteratees.ts","webpack://teact/./src/util/safeExec.ts","webpack://teact/./src/util/schedulers.ts","webpack://teact/./src/util/signals.ts","webpack://teact/webpack/bootstrap","webpack://teact/webpack/runtime/define property getters","webpack://teact/webpack/runtime/hasOwnProperty shorthand","webpack://teact/webpack/runtime/make namespace object","webpack://teact/./demo/index.tsx"],"sourcesContent":["export const DEBUG = true;\nexport const DEBUG_MORE = false;\n","import { fastRaf, throttleWith } from '../../util/schedulers';\nimport safeExec from '../../util/safeExec';\n\nimport { setPhase } from './stricterdom';\n\nlet pendingMeasureTasks: NoneToVoidFunction[] = [];\nlet pendingMutationTasks: NoneToVoidFunction[] = [];\nlet pendingForceReflowTasks: (() => NoneToVoidFunction | void)[] = [];\n\nconst runUpdatePassOnRaf = throttleWithRafFallback(() => {\n  const currentMeasureTasks = pendingMeasureTasks;\n  pendingMeasureTasks = [];\n  currentMeasureTasks.forEach((task) => {\n    safeExec(task);\n  });\n\n  // We use promises to provide correct order for Mutation Observer callback microtasks\n  Promise.resolve()\n    .then(() => {\n      setPhase('mutate');\n\n      const currentMutationTasks = pendingMutationTasks;\n      pendingMutationTasks = [];\n\n      currentMutationTasks.forEach((task) => {\n        safeExec(task);\n      });\n    })\n    .then(() => {\n      setPhase('measure');\n\n      const pendingForceReflowMutationTasks: NoneToVoidFunction[] = [];\n      // Will include tasks created during the loop\n      for (const task of pendingForceReflowTasks) {\n        safeExec(() => {\n          const mutationTask = task();\n          if (mutationTask) {\n            pendingForceReflowMutationTasks.push(mutationTask);\n          }\n        });\n      }\n      pendingForceReflowTasks = [];\n\n      return pendingForceReflowMutationTasks;\n    })\n    .then((pendingForceReflowMutationTasks) => {\n      setPhase('mutate');\n\n      // Will include tasks created during the loop\n      for (const task of pendingForceReflowMutationTasks) {\n        safeExec(task);\n      }\n    })\n    .then(() => {\n      setPhase('measure');\n    });\n});\n\nexport function requestMeasure(cb: NoneToVoidFunction) {\n  pendingMeasureTasks.push(cb);\n  runUpdatePassOnRaf();\n}\n\nexport function requestMutation(cb: NoneToVoidFunction) {\n  pendingMutationTasks.push(cb);\n  runUpdatePassOnRaf();\n}\n\nexport function requestNextMutation(cb: () => (NoneToVoidFunction | void)) {\n  requestMeasure(() => {\n    requestMutation(cb);\n  });\n}\n\nexport function requestForcedReflow(cb: () => (NoneToVoidFunction | void)) {\n  pendingForceReflowTasks.push(cb);\n  runUpdatePassOnRaf();\n}\n\nfunction throttleWithRafFallback<F extends AnyToVoidFunction>(fn: F) {\n  return throttleWith((throttledFn: NoneToVoidFunction) => {\n    fastRaf(throttledFn, true);\n  }, fn);\n}\n\nexport * from './stricterdom';\n","// https://gist.github.com/paulirish/5d52fb081b3570c81e3a\n\nexport default {\n  Element: {\n    props: [\n      'clientLeft', 'clientTop', 'clientWidth', 'clientHeight',\n      'scrollWidth', 'scrollHeight', 'scrollLeft', 'scrollTop',\n    ] as const,\n    methods: [\n      'getClientRects', 'getBoundingClientRect',\n      'scrollBy', 'scrollTo', 'scrollIntoView', 'scrollIntoViewIfNeeded',\n    ] as const,\n  },\n  HTMLElement: {\n    props: [\n      'offsetLeft', 'offsetTop', 'offsetWidth', 'offsetHeight', 'offsetParent',\n      'innerText',\n    ] as const,\n    methods: ['focus'] as const,\n  },\n  window: {\n    props: [\n      'scrollX', 'scrollY',\n      'innerHeight', 'innerWidth',\n    ] as const,\n    methods: ['getComputedStyle'] as const,\n  },\n  VisualViewport: {\n    props: [\n      'height', 'width', 'offsetTop', 'offsetLeft',\n    ] as const,\n  },\n  Document: {\n    props: ['scrollingElement'] as const,\n    methods: ['elementFromPoint'] as const,\n  },\n  HTMLInputElement: {\n    methods: ['select'] as const,\n  },\n  MouseEvent: {\n    props: ['layerX', 'layerY', 'offsetX', 'offsetY'] as const,\n  },\n  Range: {\n    methods: ['getClientRects', 'getBoundingClientRect'] as const,\n  },\n};\n","import LAYOUT_CAUSES from './layoutCauses';\n\ntype Entities = keyof typeof LAYOUT_CAUSES;\ntype Phase =\n  'measure'\n  | 'mutate';\ntype ErrorHandler = (error: Error) => any;\n\n// eslint-disable-next-line no-console\nconst DEFAULT_ERROR_HANDLER = console.error;\n\nlet onError: ErrorHandler = DEFAULT_ERROR_HANDLER;\n\nconst nativeMethods = new Map<string, AnyFunction>();\n\nlet phase: Phase = 'measure';\nlet isStrict = false;\nlet observer: MutationObserver | undefined;\n\nexport function setPhase(newPhase: Phase) {\n  phase = newPhase;\n}\n\nexport function getPhase() {\n  return phase;\n}\n\nexport function enableStrict() {\n  if (isStrict) return;\n\n  isStrict = true;\n  setupLayoutDetectors();\n  setupMutationObserver();\n}\n\nexport function disableStrict() {\n  if (!isStrict) return;\n\n  clearMutationObserver();\n  clearLayoutDetectors();\n  isStrict = false;\n}\n\nexport function forceMeasure(cb: () => any) {\n  if (phase !== 'mutate') {\n    throw new Error('The current phase is \\'measure\\'');\n  }\n\n  phase = 'measure';\n  const result = cb();\n  phase = 'mutate';\n\n  return result;\n}\n\nexport function setHandler(handler?: ErrorHandler) {\n  onError = handler || DEFAULT_ERROR_HANDLER;\n}\n\nfunction setupLayoutDetectors() {\n  Object.entries(LAYOUT_CAUSES).forEach(([name, causes]) => {\n    const entity = window[name as Entities];\n    const prototype = typeof entity === 'object' ? entity : entity.prototype;\n\n    if ('props' in causes) {\n      causes.props.forEach((prop) => {\n        const nativeGetter = Object.getOwnPropertyDescriptor(prototype, prop)?.get;\n        if (!nativeGetter) {\n          return;\n        }\n\n        nativeMethods.set(`${name}#${prop}`, nativeGetter);\n\n        Object.defineProperty(prototype, prop, {\n          get() {\n            onMeasure(prop);\n\n            return nativeGetter.call(this);\n          },\n        });\n      });\n    }\n\n    if ('methods' in causes) {\n      causes.methods.forEach((method) => {\n        const nativeMethod = (prototype as any)[method]!;\n        nativeMethods.set(`${name}#${method}`, nativeMethod);\n\n        // eslint-disable-next-line func-names\n        (prototype as any)[method] = function (...args: any[]) {\n          onMeasure(method);\n\n          return nativeMethod.apply(this, args);\n        };\n      });\n    }\n  });\n}\n\nfunction clearLayoutDetectors() {\n  Object.entries(LAYOUT_CAUSES).forEach(([name, causes]) => {\n    const entity = window[name as Entities];\n    const prototype = typeof entity === 'object' ? entity : entity.prototype;\n\n    if ('props' in causes) {\n      causes.props.forEach((prop) => {\n        const nativeGetter = nativeMethods.get(`${name}#${prop}`);\n        if (!nativeGetter) {\n          return;\n        }\n\n        Object.defineProperty(prototype, prop, { get: nativeGetter });\n      });\n    }\n\n    if ('methods' in causes) {\n      causes.methods.forEach((method) => {\n        (prototype as any)[method] = nativeMethods.get(`${name}#${method}`)!;\n      });\n    }\n  });\n\n  nativeMethods.clear();\n}\n\nfunction setupMutationObserver() {\n  observer = new MutationObserver((mutations) => {\n    if (phase !== 'mutate') {\n      mutations.forEach(({ target, type, attributeName }) => {\n        if (!document.contains(target)) {\n          return;\n        }\n\n        if (type === 'childList' && target instanceof HTMLElement && target.contentEditable) {\n          return;\n        }\n\n        if (attributeName?.startsWith('data-')) {\n          return;\n        }\n\n        // eslint-disable-next-line no-console\n        onError(new Error(`Unexpected mutation detected: \\`${type === 'attributes' ? attributeName : type}\\``));\n      });\n    }\n  });\n\n  observer.observe(document.body, {\n    childList: true,\n    attributes: true,\n    subtree: true,\n    characterData: false,\n  });\n}\n\nfunction clearMutationObserver() {\n  observer?.disconnect();\n  observer = undefined;\n}\n\nfunction onMeasure(propName: string) {\n  if (phase !== 'measure') {\n    onError(new Error(`Unexpected measurement detected: \\`${propName}\\``));\n  }\n}\n","import { DEBUG } from '../config';\n\ntype Handler = (e: Event) => void;\ntype DelegationRegistry = Map<HTMLElement, Handler>;\n\nconst NON_BUBBLEABLE_EVENTS = new Set(['scroll', 'mouseenter', 'mouseleave', 'load']);\n\nconst documentEventCounters: Record<string, number> = {};\nconst delegationRegistryByEventType: Record<string, DelegationRegistry> = {};\nconst delegatedEventTypesByElement = new Map<HTMLElement, Set<string>>();\n\nexport function addEventListener(element: HTMLElement, propName: string, handler: Handler, asCapture = false) {\n  const eventType = resolveEventType(propName, element);\n  if (canUseEventDelegation(eventType, element, asCapture)) {\n    addDelegatedListener(eventType, element, handler);\n  } else {\n    element.addEventListener(eventType, handler, asCapture);\n  }\n}\n\nexport function removeEventListener(element: HTMLElement, propName: string, handler: Handler, asCapture = false) {\n  const eventType = resolveEventType(propName, element);\n  if (canUseEventDelegation(eventType, element, asCapture)) {\n    removeDelegatedListener(eventType, element);\n  } else {\n    element.removeEventListener(eventType, handler, asCapture);\n  }\n}\n\nfunction resolveEventType(propName: string, element: HTMLElement) {\n  const eventType = propName\n    .replace(/^on/, '')\n    .replace(/Capture$/, '').toLowerCase();\n\n  if (eventType === 'change' && element.tagName !== 'SELECT') {\n    // React behavior repeated here.\n    // https://stackoverflow.com/questions/38256332/in-react-whats-the-difference-between-onchange-and-oninput\n    return 'input';\n  }\n\n  if (eventType === 'doubleclick') {\n    return 'dblclick';\n  }\n\n  // Replace focus/blur by their \"bubbleable\" versions\n  if (eventType === 'focus') {\n    return 'focusin';\n  }\n\n  if (eventType === 'blur') {\n    return 'focusout';\n  }\n\n  return eventType;\n}\n\nfunction canUseEventDelegation(realEventType: string, element: HTMLElement, asCapture: boolean) {\n  return (\n    !asCapture\n    && !NON_BUBBLEABLE_EVENTS.has(realEventType)\n    && element.tagName !== 'VIDEO'\n    && element.tagName !== 'IFRAME'\n  );\n}\n\nfunction addDelegatedListener(eventType: string, element: HTMLElement, handler: Handler) {\n  if (!documentEventCounters[eventType]) {\n    documentEventCounters[eventType] = 0;\n    document.addEventListener(eventType, handleEvent);\n  }\n\n  resolveDelegationRegistry(eventType).set(element, handler);\n  resolveDelegatedEventTypes(element).add(eventType);\n  documentEventCounters[eventType]++;\n}\n\nfunction removeDelegatedListener(eventType: string, element: HTMLElement) {\n  documentEventCounters[eventType]--;\n  if (!documentEventCounters[eventType]) {\n    // Synchronous deletion on 0 will cause perf degradation in the case of 1 element\n    // which is not a real case, so it's ok to do it this way\n    document.removeEventListener(eventType, handleEvent);\n  }\n\n  delegationRegistryByEventType[eventType].delete(element);\n  delegatedEventTypesByElement.get(element)!.delete(eventType);\n}\n\nexport function removeAllDelegatedListeners(element: HTMLElement) {\n  const eventTypes = delegatedEventTypesByElement.get(element);\n  if (!eventTypes) {\n    return;\n  }\n\n  eventTypes.forEach((eventType) => removeDelegatedListener(eventType, element));\n  delegatedEventTypesByElement.delete(element);\n}\n\nfunction handleEvent(realEvent: Event) {\n  const events = delegationRegistryByEventType[realEvent.type];\n\n  if (events) {\n    let furtherCallsPrevented = false;\n    let current: HTMLElement = realEvent.target as HTMLElement;\n\n    const stopPropagation = () => {\n      furtherCallsPrevented = true;\n    };\n\n    const preventDefault = () => {\n      realEvent.preventDefault();\n    };\n\n    // Proxy is a simplest way to provide an access to the event property\n    const event = new Proxy(realEvent, {\n      get(target, p) {\n        if (p === 'currentTarget') {\n          return current;\n        }\n        if (p === 'stopPropagation' || p === 'stopImmediatePropagation') {\n          return stopPropagation;\n        }\n        if (p === 'preventDefault') {\n          // \"this\" is changed to proxy and one can't call methods via it\n          return preventDefault;\n        }\n        return Reflect.get(target, p);\n      },\n    });\n\n    // This can also be limited by teact root\n    while (current && current !== document.body) {\n      const handler = events.get(current);\n      if (handler) {\n        handler(event);\n        if (furtherCallsPrevented) {\n          return;\n        }\n      }\n\n      current = current.parentNode as HTMLElement;\n    }\n  }\n}\n\nfunction resolveDelegationRegistry(eventType: string) {\n  if (!delegationRegistryByEventType[eventType]) {\n    delegationRegistryByEventType[eventType] = new Map();\n  }\n\n  return delegationRegistryByEventType[eventType];\n}\n\nfunction resolveDelegatedEventTypes(element: HTMLElement) {\n  const existing = delegatedEventTypesByElement.get(element);\n  if (existing) {\n    return existing;\n  }\n\n  const newSet = new Set<string>();\n  delegatedEventTypesByElement.set(element, newSet);\n\n  return newSet;\n}\n\nif (DEBUG) {\n  document.addEventListener('dblclick', () => {\n    const documentListenersCount = Object.keys(documentEventCounters).length;\n    const delegatedHandlersCount1 = Object.values(documentEventCounters)\n      .reduce((acc, counter) => acc + counter, 0);\n    const delegationRegistriesCount = Object.keys(delegationRegistryByEventType).length;\n    const delegatedHandlersCount2 = Object.values(delegationRegistryByEventType)\n      .reduce((acc, delegationRegistry) => acc + delegationRegistry.size, 0);\n    const delegationElementsCount = delegatedEventTypesByElement.size;\n    const delegatedEventTypesCount = Array.from(delegatedEventTypesByElement.values())\n      .reduce((acc, eventTypes) => acc + eventTypes.size, 0);\n\n    // eslint-disable-next-line no-console\n    console.warn('DELEGATED EVENTS STATS', {\n      delegatedHandlersCount1,\n      delegatedHandlersCount2,\n      delegatedEventTypesCount,\n      delegationRegistriesCount,\n      delegationElementsCount,\n      documentListenersCount,\n    });\n  });\n}\n","import type { ChangeEvent } from 'react';\nimport type {\n  VirtualElement,\n  VirtualElementComponent,\n  VirtualElementTag,\n  VirtualElementParent,\n  VirtualElementChildren,\n  VirtualElementReal,\n  VirtualElementFragment,\n} from './teact';\nimport {\n  hasElementChanged,\n  isComponentElement,\n  isTagElement,\n  isParentElement,\n  isTextElement,\n  isEmptyElement,\n  mountComponent,\n  renderComponent,\n  unmountComponent,\n  isFragmentElement,\n  runImmediateEffects,\n  willRunImmediateEffects,\n} from './teact';\nimport { DEBUG } from '../config';\nimport { addEventListener, removeAllDelegatedListeners, removeEventListener } from './dom-events';\nimport { unique } from '../util/iteratees';\n\ninterface VirtualDomHead {\n  children: [VirtualElement] | [];\n}\n\ninterface SelectionState {\n  selectionStart: number | null;\n  selectionEnd: number | null;\n  isCaretAtEnd: boolean;\n}\n\nconst FILTERED_ATTRIBUTES = new Set(['key', 'ref', 'teactFastList', 'teactOrderKey']);\nconst HTML_ATTRIBUTES = new Set(['dir', 'role', 'form']);\nconst CONTROLLABLE_TAGS = ['INPUT', 'TEXTAREA', 'SELECT'];\nconst MAPPED_ATTRIBUTES: { [k: string]: string } = {\n  autoPlay: 'autoplay',\n  autoComplete: 'autocomplete',\n};\nconst INDEX_KEY_PREFIX = '__indexKey#';\n\nconst headsByElement = new WeakMap<Element, VirtualDomHead>();\nconst extraClasses = new WeakMap<Element, Set<string>>();\n\n// eslint-disable-next-line @typescript-eslint/naming-convention\nlet DEBUG_virtualTreeSize = 1;\n\nfunction render($element: VirtualElement | undefined, parentEl: HTMLElement) {\n  if (!headsByElement.has(parentEl)) {\n    headsByElement.set(parentEl, { children: [] });\n  }\n\n  const $head = headsByElement.get(parentEl)!;\n  const $newElement = renderWithVirtual(parentEl, $head.children[0], $element, $head, 0);\n\n  if (!willRunImmediateEffects()) {\n    runImmediateEffects();\n  }\n\n  $head.children = $newElement ? [$newElement] : [];\n\n  return undefined;\n}\n\nfunction renderWithVirtual<T extends VirtualElement | undefined>(\n  parentEl: HTMLElement,\n  $current: VirtualElement | undefined,\n  $new: T,\n  $parent: VirtualElementParent | VirtualDomHead,\n  index: number,\n  options: {\n    skipComponentUpdate?: boolean;\n    nextSibling?: ChildNode;\n    fragment?: DocumentFragment;\n  } = {},\n): T {\n  const { skipComponentUpdate, fragment } = options;\n  let { nextSibling } = options;\n\n  const isCurrentComponent = $current && isComponentElement($current);\n  const isNewComponent = $new && isComponentElement($new);\n  const $newAsReal = $new as VirtualElementReal;\n\n  const isCurrentFragment = $current && !isCurrentComponent && isFragmentElement($current);\n  const isNewFragment = $new && !isNewComponent && isFragmentElement($new);\n\n  if (\n    !skipComponentUpdate\n    && isCurrentComponent && isNewComponent\n    && !hasElementChanged($current!, $new!)\n  ) {\n    $new = updateComponent($current, $new as VirtualElementComponent) as typeof $new;\n  }\n\n  // Parent element may have changed, so we need to update the listener closure.\n  if (!skipComponentUpdate && isNewComponent && ($new as VirtualElementComponent).componentInstance.isMounted) {\n    setupComponentUpdateListener(parentEl, $new as VirtualElementComponent, $parent, index);\n  }\n\n  if ($current === $new) {\n    return $new;\n  }\n\n  if (DEBUG && $new) {\n    const newTarget = 'target' in $new && $new.target;\n    if (newTarget && (!$current || ('target' in $current && newTarget !== $current.target))) {\n      throw new Error('[Teact] Cached virtual element was moved within tree');\n    }\n  }\n\n  if (!$current && $new) {\n    if (isNewComponent || isNewFragment) {\n      if (isNewComponent) {\n        $new = initComponent(parentEl, $new as VirtualElementComponent, $parent, index) as unknown as typeof $new;\n      }\n\n      mountChildren(parentEl, $new as VirtualElementComponent | VirtualElementFragment, { nextSibling, fragment });\n    } else {\n      const node = createNode($newAsReal);\n      $newAsReal.target = node;\n      insertBefore(fragment || parentEl, node, nextSibling);\n    }\n  } else if ($current && !$new) {\n    remount(parentEl, $current, undefined);\n  } else if ($current && $new) {\n    if (hasElementChanged($current, $new)) {\n      if (!nextSibling) {\n        nextSibling = getNextSibling($current);\n      }\n\n      if (isNewComponent || isNewFragment) {\n        if (isNewComponent) {\n          $new = initComponent(parentEl, $new as VirtualElementComponent, $parent, index) as unknown as typeof $new;\n        }\n\n        remount(parentEl, $current, undefined);\n        mountChildren(parentEl, $new as VirtualElementComponent | VirtualElementFragment, { nextSibling, fragment });\n      } else {\n        const node = createNode($newAsReal);\n        $newAsReal.target = node;\n        remount(parentEl, $current, node, nextSibling);\n      }\n    } else {\n      const isComponent = isCurrentComponent && isNewComponent;\n      const isFragment = isCurrentFragment && isNewFragment;\n\n      if (isComponent || isFragment) {\n        ($new as VirtualElementComponent | VirtualElementFragment).children = renderChildren(\n          $current,\n          $new as VirtualElementComponent | VirtualElementFragment,\n          parentEl,\n          nextSibling,\n        );\n      } else {\n        const $currentAsReal = $current as VirtualElementReal;\n        const currentTarget = $currentAsReal.target!;\n\n        $newAsReal.target = currentTarget;\n        $currentAsReal.target = undefined; // Help GC\n\n        const isTag = isTagElement($current);\n        if (isTag) {\n          const $newAsTag = $new as VirtualElementTag;\n\n          $newAsTag.props.ref = $current.props.ref;\n\n          if (nextSibling) {\n            insertBefore(parentEl, currentTarget, nextSibling);\n          }\n\n          updateAttributes($current, $newAsTag, currentTarget as HTMLElement);\n\n          $newAsTag.children = renderChildren(\n            $current,\n            $newAsTag,\n            currentTarget as HTMLElement,\n          );\n        }\n      }\n    }\n  }\n\n  return $new;\n}\n\nfunction initComponent(\n  parentEl: HTMLElement,\n  $element: VirtualElementComponent,\n  $parent: VirtualElementParent | VirtualDomHead,\n  index: number,\n) {\n  const { componentInstance } = $element;\n\n  if (!componentInstance.isMounted) {\n    $element = mountComponent(componentInstance);\n    setupComponentUpdateListener(parentEl, $element, $parent, index);\n\n    const $firstChild = $element.children[0];\n    if (isComponentElement($firstChild)) {\n      $element.children = [initComponent(parentEl, $firstChild, $element, 0)];\n    }\n\n    componentInstance.isMounted = true;\n  }\n\n  return $element;\n}\n\nfunction updateComponent($current: VirtualElementComponent, $new: VirtualElementComponent) {\n  $current.componentInstance.props = $new.componentInstance.props;\n\n  return renderComponent($current.componentInstance);\n}\n\nfunction setupComponentUpdateListener(\n  parentEl: HTMLElement,\n  $element: VirtualElementComponent,\n  $parent: VirtualElementParent | VirtualDomHead,\n  index: number,\n) {\n  const { componentInstance } = $element;\n\n  componentInstance.onUpdate = () => {\n    $parent.children[index] = renderWithVirtual(\n      parentEl,\n      $parent.children[index],\n      componentInstance.$element,\n      $parent,\n      index,\n      { skipComponentUpdate: true },\n    );\n  };\n}\n\nfunction mountChildren(\n  parentEl: HTMLElement,\n  $element: VirtualElementComponent | VirtualElementFragment,\n  options: {\n    nextSibling?: ChildNode;\n    fragment?: DocumentFragment;\n  },\n) {\n  $element.children = $element.children.map(($child, i) => {\n    return renderWithVirtual(parentEl, undefined, $child, $element, i, options);\n  });\n}\n\nfunction unmountChildren(parentEl: HTMLElement, $element: VirtualElementComponent | VirtualElementFragment) {\n  $element.children.forEach(($child) => {\n    renderWithVirtual(parentEl, $child, undefined, $element, -1);\n  });\n}\n\nfunction createNode($element: VirtualElementReal): Node {\n  if (isEmptyElement($element)) {\n    return document.createTextNode('');\n  }\n\n  if (isTextElement($element)) {\n    return document.createTextNode($element.value);\n  }\n\n  const { tag, props, children = [] } = $element;\n  const element = document.createElement(tag);\n\n  if (typeof props.ref === 'object') {\n    props.ref.current = element;\n  } else if (typeof props.ref === 'function') {\n    props.ref(element);\n  }\n\n  processControlled(tag, props);\n\n  Object.entries(props).forEach(([key, value]) => {\n    if (props[key] !== undefined) {\n      setAttribute(element, key, value);\n    }\n  });\n\n  processUncontrolledOnMount(element, props);\n\n  $element.children = children.map(($child, i) => (\n    renderWithVirtual(element, undefined, $child, $element, i)\n  ));\n\n  return element;\n}\n\nfunction remount(\n  parentEl: HTMLElement,\n  $current: VirtualElement,\n  node: Node | undefined,\n  componentNextSibling?: ChildNode,\n) {\n  const isComponent = isComponentElement($current);\n  const isFragment = !isComponent && isFragmentElement($current);\n\n  if (isComponent || isFragment) {\n    if (isComponent) {\n      unmountComponent($current.componentInstance);\n    }\n\n    unmountChildren(parentEl, $current);\n\n    if (node) {\n      insertBefore(parentEl, node, componentNextSibling);\n    }\n  } else {\n    if (node) {\n      parentEl.replaceChild(node, $current.target!);\n    } else {\n      parentEl.removeChild($current.target!);\n    }\n\n    unmountRealTree($current);\n  }\n}\n\nfunction unmountRealTree($element: VirtualElement) {\n  if (isComponentElement($element)) {\n    unmountComponent($element.componentInstance);\n  } else if (!isFragmentElement($element)) {\n    if (isTagElement($element)) {\n      const { target } = $element;\n\n      if (target) {\n        extraClasses.delete(target);\n        removeAllDelegatedListeners(target);\n\n        if ($element.props.ref?.current === target) {\n          $element.props.ref.current = undefined;\n        }\n      }\n    }\n\n    if ($element.target) {\n      $element.target = undefined; // Help GC\n    }\n\n    if (!isParentElement($element)) {\n      return;\n    }\n  }\n\n  $element.children.forEach(unmountRealTree);\n}\n\nfunction insertBefore(parentEl: HTMLElement | DocumentFragment, node: Node, nextSibling?: ChildNode) {\n  if (nextSibling) {\n    parentEl.insertBefore(node, nextSibling);\n  } else {\n    parentEl.appendChild(node);\n  }\n}\n\nfunction getNextSibling($current: VirtualElement): ChildNode | undefined {\n  if (isComponentElement($current) || isFragmentElement($current)) {\n    const lastChild = $current.children[$current.children.length - 1];\n    return getNextSibling(lastChild);\n  }\n\n  const target = $current.target!;\n  const { nextSibling } = target;\n  return nextSibling || undefined;\n}\n\nfunction renderChildren(\n  $current: VirtualElementParent, $new: VirtualElementParent, currentEl: HTMLElement, nextSibling?: ChildNode,\n) {\n  if (DEBUG) {\n    DEBUG_checkKeyUniqueness($new.children);\n  }\n\n  if (('props' in $new) && $new.props.teactFastList) {\n    return renderFastListChildren($current, $new, currentEl);\n  }\n\n  const currentChildrenLength = $current.children.length;\n  const newChildrenLength = $new.children.length;\n  const maxLength = Math.max(currentChildrenLength, newChildrenLength);\n  const newChildren = [];\n\n  const fragment = newChildrenLength > currentChildrenLength ? document.createDocumentFragment() : undefined;\n  const lastCurrentChild = $current.children[currentChildrenLength - 1];\n  const fragmentNextSibling = nextSibling || (\n    newChildrenLength > currentChildrenLength && lastCurrentChild ? getNextSibling(lastCurrentChild) : undefined\n  );\n\n  for (let i = 0; i < maxLength; i++) {\n    const $newChild = renderWithVirtual(\n      currentEl,\n      $current.children[i],\n      $new.children[i],\n      $new,\n      i,\n      i >= currentChildrenLength ? { fragment } : { nextSibling },\n    );\n\n    if ($newChild) {\n      newChildren.push($newChild);\n    }\n  }\n\n  if (fragment) {\n    insertBefore(currentEl, fragment, fragmentNextSibling);\n  }\n\n  return newChildren;\n}\n\n// This function allows to prepend/append a bunch of new DOM nodes to the top/bottom of preserved ones.\n// It also allows to selectively move particular preserved nodes within their DOM list.\nfunction renderFastListChildren($current: VirtualElementParent, $new: VirtualElementParent, currentEl: HTMLElement) {\n  const newKeys = new Set(\n    $new.children.map(($newChild) => {\n      const key = 'props' in $newChild ? $newChild.props.key : undefined;\n\n      if (DEBUG && isParentElement($newChild)) {\n        // eslint-disable-next-line no-null/no-null\n        if (key === undefined || key === null) {\n          // eslint-disable-next-line no-console\n          console.warn('Missing `key` in `teactFastList`');\n        }\n\n        if (isFragmentElement($newChild)) {\n          throw new Error('[Teact] Fragment can not be child of container with `teactFastList`');\n        }\n      }\n\n      return key;\n    }),\n  );\n\n  // Build a collection of old children that also remain in the new list\n  let currentRemainingIndex = 0;\n  const remainingByKey = $current.children\n    .reduce((acc, $currentChild, i) => {\n      let key = 'props' in $currentChild ? $currentChild.props.key : undefined;\n      // eslint-disable-next-line no-null/no-null\n      const isKeyPresent = key !== undefined && key !== null;\n\n      // First we process removed children\n      if (isKeyPresent && !newKeys.has(key)) {\n        renderWithVirtual(currentEl, $currentChild, undefined, $new, -1);\n\n        return acc;\n      } else if (!isKeyPresent) {\n        const $newChild = $new.children[i];\n        const newChildKey = ($newChild && 'props' in $newChild) ? $newChild.props.key : undefined;\n        // If a non-key element remains at the same index we preserve it with a virtual `key`\n        if ($newChild && !newChildKey) {\n          key = `${INDEX_KEY_PREFIX}${i}`;\n          // Otherwise, we just remove it\n        } else {\n          renderWithVirtual(currentEl, $currentChild, undefined, $new, -1);\n\n          return acc;\n        }\n      }\n\n      // Then we build up info about remaining children\n      acc[key] = {\n        $element: $currentChild,\n        index: currentRemainingIndex++,\n        orderKey: 'props' in $currentChild ? $currentChild.props.teactOrderKey : undefined,\n      };\n      return acc;\n    }, {} as Record<string, { $element: VirtualElement; index: number; orderKey?: number }>);\n\n  let newChildren: VirtualElement[] = [];\n\n  let fragmentElements: VirtualElement[] | undefined;\n  let fragmentIndex: number | undefined;\n\n  let currentPreservedIndex = 0;\n\n  $new.children.forEach(($newChild, i) => {\n    const key = 'props' in $newChild ? $newChild.props.key : `${INDEX_KEY_PREFIX}${i}`;\n    const currentChildInfo = remainingByKey[key];\n\n    if (!currentChildInfo) {\n      if (!fragmentElements) {\n        fragmentElements = [];\n        fragmentIndex = i;\n      }\n\n      fragmentElements.push($newChild);\n      return;\n    }\n\n    // This prepends new children to the top\n    if (fragmentElements) {\n      newChildren = newChildren.concat(renderFragment(fragmentElements, fragmentIndex!, currentEl, $new));\n      fragmentElements = undefined;\n      fragmentIndex = undefined;\n    }\n\n    // Now we check if a preserved node was moved within preserved list\n    const newOrderKey = 'props' in $newChild ? $newChild.props.teactOrderKey : undefined;\n    // That is indicated by a changed `teactOrderKey` value\n    const shouldMoveNode = (\n      currentChildInfo.index !== currentPreservedIndex && currentChildInfo.orderKey !== newOrderKey\n    );\n    const isMovingDown = shouldMoveNode && currentPreservedIndex > currentChildInfo.index;\n\n    if (!shouldMoveNode || isMovingDown) {\n      currentPreservedIndex++;\n    }\n\n    newChildren.push(\n      renderWithVirtual(currentEl, currentChildInfo.$element, $newChild, $new, i, {\n        // `+ 1` is needed because before moving down the node still takes place above\n        nextSibling: shouldMoveNode ? currentEl.childNodes[isMovingDown ? i + 1 : i] : undefined,\n      }),\n    );\n  });\n\n  // This appends new children to the bottom\n  if (fragmentElements) {\n    newChildren = newChildren.concat(renderFragment(fragmentElements, fragmentIndex!, currentEl, $new));\n  }\n\n  return newChildren;\n}\n\nfunction renderFragment(\n  elements: VirtualElement[], fragmentIndex: number, parentEl: HTMLElement, $parent: VirtualElementParent,\n) {\n  const nextSibling = parentEl.childNodes[fragmentIndex];\n\n  if (elements.length === 1) {\n    return [renderWithVirtual(parentEl, undefined, elements[0], $parent, fragmentIndex, { nextSibling })];\n  }\n\n  const fragment = document.createDocumentFragment();\n  const newChildren = elements.map(($element, i) => (\n    renderWithVirtual(parentEl, undefined, $element, $parent, fragmentIndex + i, { fragment })\n  ));\n\n  insertBefore(parentEl, fragment, nextSibling);\n\n  return newChildren;\n}\n\nfunction processControlled(tag: string, props: AnyLiteral) {\n  const isValueControlled = props.value !== undefined;\n  const isCheckedControlled = props.checked !== undefined;\n  const isControlled = (isValueControlled || isCheckedControlled) && CONTROLLABLE_TAGS.includes(tag.toUpperCase());\n  if (!isControlled) {\n    return;\n  }\n\n  const {\n    value, checked, onInput, onChange,\n  } = props;\n\n  props.onChange = undefined;\n  props.onInput = (e: ChangeEvent<HTMLInputElement>) => {\n    onInput?.(e);\n    onChange?.(e);\n\n    if (value !== undefined && value !== e.currentTarget.value) {\n      const { selectionStart, selectionEnd } = e.currentTarget;\n      const isCaretAtEnd = selectionStart === selectionEnd && selectionEnd === e.currentTarget.value.length;\n\n      e.currentTarget.value = value;\n\n      if (typeof selectionStart === 'number' && typeof selectionEnd === 'number') {\n        e.currentTarget.setSelectionRange(selectionStart, selectionEnd);\n\n        const selectionState: SelectionState = { selectionStart, selectionEnd, isCaretAtEnd };\n        // eslint-disable-next-line no-underscore-dangle\n        e.currentTarget.dataset.__teactSelectionState = JSON.stringify(selectionState);\n      }\n    }\n\n    if (checked !== undefined) {\n      e.currentTarget.checked = checked;\n    }\n  };\n}\n\nfunction processUncontrolledOnMount(element: HTMLElement, props: AnyLiteral) {\n  if (!CONTROLLABLE_TAGS.includes(element.tagName)) {\n    return;\n  }\n\n  if (props.defaultValue) {\n    setAttribute(element, 'value', props.defaultValue);\n  }\n\n  if (props.defaultChecked) {\n    setAttribute(element, 'checked', props.defaultChecked);\n  }\n}\n\nfunction updateAttributes($current: VirtualElementTag, $new: VirtualElementTag, element: HTMLElement) {\n  processControlled(element.tagName, $new.props);\n\n  const currentEntries = Object.entries($current.props);\n  const newEntries = Object.entries($new.props);\n\n  currentEntries.forEach(([key, currentValue]) => {\n    const newValue = $new.props[key];\n\n    if (\n      currentValue !== undefined\n      && (\n        newValue === undefined\n        || (currentValue !== newValue && key.startsWith('on'))\n      )\n    ) {\n      removeAttribute(element, key, currentValue);\n    }\n  });\n\n  newEntries.forEach(([key, newValue]) => {\n    const currentValue = $current.props[key];\n\n    if (newValue !== undefined && newValue !== currentValue) {\n      setAttribute(element, key, newValue);\n    }\n  });\n}\n\nfunction setAttribute(element: HTMLElement, key: string, value: any) {\n  if (key === 'className') {\n    updateClassName(element, value);\n  } else if (key === 'value') {\n    const inputEl = element as HTMLInputElement;\n\n    if (inputEl.value !== value) {\n      inputEl.value = value;\n\n      // eslint-disable-next-line no-underscore-dangle\n      const selectionStateJson = inputEl.dataset.__teactSelectionState;\n      if (selectionStateJson) {\n        const { selectionStart, selectionEnd, isCaretAtEnd } = JSON.parse(selectionStateJson) as SelectionState;\n\n        if (isCaretAtEnd) {\n          const length = inputEl.value.length;\n          inputEl.setSelectionRange(length, length);\n        } else if (typeof selectionStart === 'number' && typeof selectionEnd === 'number') {\n          inputEl.setSelectionRange(selectionStart, selectionEnd);\n        }\n      }\n    }\n  } else if (key === 'style') {\n    element.style.cssText = value;\n  } else if (key === 'dangerouslySetInnerHTML') {\n    // eslint-disable-next-line no-underscore-dangle\n    element.innerHTML = value.__html;\n  } else if (key.startsWith('on')) {\n    addEventListener(element, key, value, key.endsWith('Capture'));\n  } else if (key.startsWith('data-') || key.startsWith('aria-') || HTML_ATTRIBUTES.has(key)) {\n    element.setAttribute(key, value);\n  } else if (!FILTERED_ATTRIBUTES.has(key)) {\n    (element as any)[MAPPED_ATTRIBUTES[key] || key] = value;\n  }\n}\n\nfunction removeAttribute(element: HTMLElement, key: string, value: any) {\n  if (key === 'className') {\n    updateClassName(element, '');\n  } else if (key === 'value') {\n    (element as HTMLInputElement).value = '';\n  } else if (key === 'style') {\n    element.style.cssText = '';\n  } else if (key === 'dangerouslySetInnerHTML') {\n    element.innerHTML = '';\n  } else if (key.startsWith('on')) {\n    removeEventListener(element, key, value, key.endsWith('Capture'));\n  } else if (!FILTERED_ATTRIBUTES.has(key)) {\n    element.removeAttribute(key);\n  }\n}\n\nfunction updateClassName(element: HTMLElement, value: string) {\n  const extra = extraClasses.get(element);\n  if (!extra) {\n    element.className = value;\n    return;\n  }\n\n  const extraArray = Array.from(extra);\n  if (value) {\n    extraArray.push(value);\n  }\n\n  element.className = extraArray.join(' ');\n}\n\nexport function addExtraClass(element: Element, className: string, forceSingle = false) {\n  if (!forceSingle) {\n    const classNames = className.split(' ');\n    if (classNames.length > 1) {\n      classNames.forEach((cn) => {\n        addExtraClass(element, cn, true);\n      });\n\n      return;\n    }\n  }\n\n  element.classList.add(className);\n\n  const classList = extraClasses.get(element);\n  if (classList) {\n    classList.add(className);\n  } else {\n    extraClasses.set(element, new Set([className]));\n  }\n}\n\nexport function removeExtraClass(element: Element, className: string, forceSingle = false) {\n  if (!forceSingle) {\n    const classNames = className.split(' ');\n    if (classNames.length > 1) {\n      classNames.forEach((cn) => {\n        removeExtraClass(element, cn, true);\n      });\n\n      return;\n    }\n  }\n\n  element.classList.remove(className);\n\n  const classList = extraClasses.get(element);\n  if (classList) {\n    classList.delete(className);\n\n    if (!classList.size) {\n      extraClasses.delete(element);\n    }\n  }\n}\n\nexport function toggleExtraClass(element: Element, className: string, force?: boolean, forceSingle = false) {\n  if (!forceSingle) {\n    const classNames = className.split(' ');\n    if (classNames.length > 1) {\n      classNames.forEach((cn) => {\n        toggleExtraClass(element, cn, force, true);\n      });\n\n      return;\n    }\n  }\n\n  element.classList.toggle(className, force);\n\n  if (element.classList.contains(className)) {\n    addExtraClass(element, className);\n  } else {\n    removeExtraClass(element, className);\n  }\n}\n\n// eslint-disable-next-line @typescript-eslint/naming-convention\nfunction DEBUG_checkKeyUniqueness(children: VirtualElementChildren) {\n  const firstChild = children[0];\n  if (firstChild && 'props' in firstChild && firstChild.props.key !== undefined) {\n    const keys = children.reduce((acc: any[], child) => {\n      if ('props' in child && child.props.key) {\n        acc.push(child.props.key);\n      }\n\n      return acc;\n    }, []);\n\n    if (keys.length !== unique(keys).length) {\n      // eslint-disable-next-line no-console\n      console.warn('[Teact] Duplicated keys:', keys.filter((e, i, a) => a.indexOf(e) !== i));\n      throw new Error('[Teact] Children keys are not unique');\n    }\n  }\n}\n\nconst TeactDOM = { render };\nexport default TeactDOM;\n","import type { ReactElement } from 'react';\nimport { requestMeasure, requestMutation } from '../lib/fasterdom/fasterdom';\n\nimport { DEBUG, DEBUG_MORE } from '../config';\nimport { throttleWith } from '../util/schedulers';\nimport { orderBy } from '../util/iteratees';\nimport { getUnequalProps } from '../util/arePropsShallowEqual';\nimport { incrementOverlayCounter } from '../util/debugOverlay';\nimport { isSignal } from '../util/signals';\nimport safeExec from '../util/safeExec';\n\nexport type Props = AnyLiteral;\nexport type FC<P extends Props = any> = (props: P) => any;\n// eslint-disable-next-line @typescript-eslint/naming-convention\nexport type FC_withDebug =\n  FC\n  & { DEBUG_contentComponentName?: string };\n\nexport enum VirtualElementTypesEnum {\n  Empty,\n  Text,\n  Tag,\n  Component,\n  Fragment,\n}\n\ninterface VirtualElementEmpty {\n  type: VirtualElementTypesEnum.Empty;\n  target?: Node;\n}\n\ninterface VirtualElementText {\n  type: VirtualElementTypesEnum.Text;\n  target?: Node;\n  value: string;\n}\n\nexport interface VirtualElementTag {\n  type: VirtualElementTypesEnum.Tag;\n  target?: HTMLElement;\n  tag: string;\n  props: Props;\n  children: VirtualElementChildren;\n}\n\nexport interface VirtualElementComponent {\n  type: VirtualElementTypesEnum.Component;\n  componentInstance: ComponentInstance;\n  props: Props;\n  children: VirtualElementChildren;\n}\n\nexport interface VirtualElementFragment {\n  type: VirtualElementTypesEnum.Fragment;\n  children: VirtualElementChildren;\n}\n\nexport type StateHookSetter<T> = (newValue: ((current: T) => T) | T) => void;\n\ninterface ComponentInstance {\n  id: number;\n  $element: VirtualElementComponent;\n  Component: FC;\n  name: string;\n  props: Props;\n  renderedValue?: any;\n  isMounted: boolean;\n  hooks: {\n    state: {\n      cursor: number;\n      byCursor: {\n        value: any;\n        nextValue: any;\n        setter: StateHookSetter<any>;\n      }[];\n    };\n    effects: {\n      cursor: number;\n      byCursor: {\n        dependencies?: readonly any[];\n        schedule: NoneToVoidFunction;\n        cleanup?: NoneToVoidFunction;\n        releaseSignals?: NoneToVoidFunction;\n      }[];\n    };\n    memos: {\n      cursor: number;\n      byCursor: {\n        value: any;\n        dependencies: any[];\n      }[];\n    };\n    refs: {\n      cursor: number;\n      byCursor: {\n        current: any;\n      }[];\n    };\n  };\n  prepareForFrame?: () => void;\n  forceUpdate?: () => void;\n  onUpdate?: () => void;\n}\n\nexport type VirtualElement =\n  VirtualElementEmpty\n  | VirtualElementText\n  | VirtualElementTag\n  | VirtualElementComponent\n  | VirtualElementFragment;\nexport type VirtualElementParent =\n  VirtualElementTag\n  | VirtualElementComponent\n  | VirtualElementFragment;\nexport type VirtualElementChildren = VirtualElement[];\nexport type VirtualElementReal = Exclude<VirtualElement, VirtualElementComponent | VirtualElementFragment>;\n\n// Compatibility with JSX types\nexport type TeactNode =\n  ReactElement\n  | string\n  | number\n  | boolean\n  | TeactNode[];\n\ntype Effect = () => (NoneToVoidFunction | void);\ntype EffectCleanup = NoneToVoidFunction;\n\nconst Fragment = Symbol('Fragment');\n\nconst DEBUG_RENDER_THRESHOLD = 7;\nconst DEBUG_EFFECT_THRESHOLD = 7;\nconst DEBUG_SILENT_RENDERS_FOR = new Set(['TeactMemoWrapper', 'TeactNContainer', 'Button', 'ListItem', 'MenuItem']);\n\nlet lastComponentId = 0;\nlet renderingInstance: ComponentInstance;\n\nexport function isEmptyElement($element: VirtualElement): $element is VirtualElementEmpty {\n  return $element.type === VirtualElementTypesEnum.Empty;\n}\n\nexport function isTextElement($element: VirtualElement): $element is VirtualElementText {\n  return $element.type === VirtualElementTypesEnum.Text;\n}\n\nexport function isTagElement($element: VirtualElement): $element is VirtualElementTag {\n  return $element.type === VirtualElementTypesEnum.Tag;\n}\n\nexport function isComponentElement($element: VirtualElement): $element is VirtualElementComponent {\n  return $element.type === VirtualElementTypesEnum.Component;\n}\n\nexport function isFragmentElement($element: VirtualElement): $element is VirtualElementFragment {\n  return $element.type === VirtualElementTypesEnum.Fragment;\n}\n\nexport function isParentElement($element: VirtualElement): $element is VirtualElementParent {\n  return isTagElement($element) || isComponentElement($element) || isFragmentElement($element);\n}\n\nfunction createElement(\n  source: string | FC | typeof Fragment,\n  props: Props,\n  ...children: any[]\n): VirtualElementParent | VirtualElementChildren {\n  children = children.flat();\n\n  if (source === Fragment) {\n    return buildFragmentElement(children);\n  } else if (typeof source === 'function') {\n    return createComponentInstance(source, props || {}, children);\n  } else {\n    return buildTagElement(source, props || {}, children);\n  }\n}\n\nfunction buildFragmentElement(children: any[]): VirtualElementFragment {\n  return {\n    type: VirtualElementTypesEnum.Fragment,\n    children: dropEmptyTail(children, true).map(buildChildElement),\n  };\n}\n\nfunction createComponentInstance(Component: FC, props: Props, children: any[]): VirtualElementComponent {\n  let parsedChildren: any | any[] | undefined;\n  if (children.length === 0) {\n    parsedChildren = undefined;\n  } else if (children.length === 1) {\n    [parsedChildren] = children;\n  } else {\n    parsedChildren = children;\n  }\n\n  const componentInstance: ComponentInstance = {\n    id: ++lastComponentId,\n    $element: {} as VirtualElementComponent,\n    Component,\n    name: Component.name,\n    props: {\n      ...props,\n      ...(parsedChildren && { children: parsedChildren }),\n    },\n    isMounted: false,\n    hooks: {\n      state: {\n        cursor: 0,\n        byCursor: [],\n      },\n      effects: {\n        cursor: 0,\n        byCursor: [],\n      },\n      memos: {\n        cursor: 0,\n        byCursor: [],\n      },\n      refs: {\n        cursor: 0,\n        byCursor: [],\n      },\n    },\n  };\n\n  componentInstance.$element = buildComponentElement(componentInstance);\n\n  return componentInstance.$element;\n}\n\nfunction buildComponentElement(\n  componentInstance: ComponentInstance,\n  children: VirtualElementChildren = [],\n): VirtualElementComponent {\n  return {\n    type: VirtualElementTypesEnum.Component,\n    componentInstance,\n    props: componentInstance.props,\n    children: dropEmptyTail(children, true).map(buildChildElement),\n  };\n}\n\nfunction buildTagElement(tag: string, props: Props, children: any[]): VirtualElementTag {\n  return {\n    type: VirtualElementTypesEnum.Tag,\n    tag,\n    props,\n    children: dropEmptyTail(children).map(buildChildElement),\n  };\n}\n\n// We only need placeholders in the middle of collection (to ensure other elements order).\nfunction dropEmptyTail(children: any[], noEmpty = false) {\n  let i = children.length - 1;\n\n  for (; i >= 0; i--) {\n    if (!isEmptyPlaceholder(children[i])) {\n      break;\n    }\n  }\n\n  if (i === children.length - 1) {\n    return children;\n  }\n\n  if (i === -1 && noEmpty) {\n    return children.slice(0, 1);\n  }\n\n  return children.slice(0, i + 1);\n}\n\nfunction isEmptyPlaceholder(child: any) {\n  // eslint-disable-next-line no-null/no-null\n  return child === false || child === null || child === undefined;\n}\n\nfunction buildChildElement(child: any): VirtualElement {\n  if (isEmptyPlaceholder(child)) {\n    return buildEmptyElement();\n  } else if (isParentElement(child)) {\n    return child;\n  } else {\n    return buildTextElement(child);\n  }\n}\n\nfunction buildTextElement(value: any): VirtualElementText {\n  return {\n    type: VirtualElementTypesEnum.Text,\n    value: String(value),\n  };\n}\n\nfunction buildEmptyElement(): VirtualElementEmpty {\n  return { type: VirtualElementTypesEnum.Empty };\n}\n\n// eslint-disable-next-line @typescript-eslint/naming-convention\nconst DEBUG_components: AnyLiteral = { TOTAL: { componentName: 'TOTAL', renderCount: 0 } };\n\ndocument.addEventListener('dblclick', () => {\n  // eslint-disable-next-line no-console\n  console.warn('COMPONENTS', orderBy(Object.values(DEBUG_components), 'renderCount', 'desc'));\n});\n\nlet instancesPendingUpdate = new Set<ComponentInstance>();\nlet idsToExcludeFromUpdate = new Set<number>();\nlet pendingEffects = new Map<string, Effect>();\nlet pendingCleanups = new Map<string, EffectCleanup>();\nlet pendingLayoutEffects = new Map<string, Effect>();\nlet pendingLayoutCleanups = new Map<string, EffectCleanup>();\nlet areImmediateEffectsPending = false;\n\n/*\n  Order:\n  - component effect cleanups\n  - component effects\n  - measure tasks\n  - mutation tasks\n  - component updates\n  - component layout effect cleanups\n  - component layout effects\n  - forced layout measure tasks\n  - forced layout mutation tasks\n */\n\nconst runUpdatePassOnRaf = throttleWith(requestMeasure, () => {\n  areImmediateEffectsPending = true;\n\n  idsToExcludeFromUpdate = new Set();\n  const instancesToUpdate = Array\n    .from(instancesPendingUpdate)\n    .sort((a, b) => a.id - b.id);\n  instancesPendingUpdate = new Set();\n\n  const currentCleanups = pendingCleanups;\n  pendingCleanups = new Map();\n  currentCleanups.forEach((cb) => cb());\n\n  const currentEffects = pendingEffects;\n  pendingEffects = new Map();\n  currentEffects.forEach((cb) => cb());\n\n  requestMutation(() => {\n    instancesToUpdate.forEach(prepareComponentForFrame);\n    instancesToUpdate.forEach((instance) => {\n      if (idsToExcludeFromUpdate!.has(instance.id)) {\n        return;\n      }\n\n      forceUpdateComponent(instance);\n    });\n\n    areImmediateEffectsPending = false;\n    runImmediateEffects();\n  });\n});\n\nexport function willRunImmediateEffects() {\n  return areImmediateEffectsPending;\n}\n\nexport function runImmediateEffects() {\n  const currentLayoutCleanups = pendingLayoutCleanups;\n  pendingLayoutCleanups = new Map();\n  currentLayoutCleanups.forEach((cb) => cb());\n\n  const currentLayoutEffects = pendingLayoutEffects;\n  pendingLayoutEffects = new Map();\n  currentLayoutEffects.forEach((cb) => cb());\n}\n\nexport function renderComponent(componentInstance: ComponentInstance) {\n  idsToExcludeFromUpdate.add(componentInstance.id);\n\n  const { Component, props } = componentInstance;\n  let newRenderedValue: any;\n\n  safeExec(() => {\n    renderingInstance = componentInstance;\n    componentInstance.hooks.state.cursor = 0;\n    componentInstance.hooks.effects.cursor = 0;\n    componentInstance.hooks.memos.cursor = 0;\n    componentInstance.hooks.refs.cursor = 0;\n\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    let DEBUG_startAt: number | undefined;\n    if (DEBUG) {\n      const componentName = componentInstance.name;\n      if (!DEBUG_components[componentName]) {\n        DEBUG_components[componentName] = {\n          componentName,\n          renderCount: 0,\n          renderTimes: [],\n        };\n      }\n\n      if (DEBUG_MORE) {\n        if (!DEBUG_SILENT_RENDERS_FOR.has(componentName)) {\n          // eslint-disable-next-line no-console\n          console.log(`[Teact] Render ${componentName}`);\n        }\n      }\n\n      DEBUG_startAt = performance.now();\n    }\n\n    newRenderedValue = Component(props);\n\n    if (DEBUG) {\n      const duration = performance.now() - DEBUG_startAt!;\n      const componentName = componentInstance.name;\n      if (duration > DEBUG_RENDER_THRESHOLD) {\n        // eslint-disable-next-line no-console\n        console.warn(`[Teact] Slow component render: ${componentName}, ${Math.round(duration)} ms`);\n      }\n      DEBUG_components[componentName].renderTimes.push(duration);\n      DEBUG_components[componentName].renderCount++;\n      DEBUG_components.TOTAL.renderCount++;\n\n      if (DEBUG_MORE) {\n        incrementOverlayCounter(`${componentName} renders`);\n        incrementOverlayCounter(`${componentName} duration`, duration);\n      }\n    }\n  }, () => {\n    // eslint-disable-next-line no-console\n    console.error(`[Teact] Error while rendering component ${componentInstance.name}`);\n\n    newRenderedValue = componentInstance.renderedValue;\n  });\n\n  if (componentInstance.isMounted && newRenderedValue === componentInstance.renderedValue) {\n    return componentInstance.$element;\n  }\n\n  componentInstance.renderedValue = newRenderedValue;\n\n  const children = Array.isArray(newRenderedValue) ? newRenderedValue : [newRenderedValue];\n  componentInstance.$element = buildComponentElement(componentInstance, children);\n\n  return componentInstance.$element;\n}\n\nexport function hasElementChanged($old: VirtualElement, $new: VirtualElement) {\n  if (typeof $old !== typeof $new) {\n    return true;\n  } else if ($old.type !== $new.type) {\n    return true;\n  } else if (isTextElement($old) && isTextElement($new)) {\n    return $old.value !== $new.value;\n  } else if (isTagElement($old) && isTagElement($new)) {\n    return ($old.tag !== $new.tag) || ($old.props.key !== $new.props.key);\n  } else if (isComponentElement($old) && isComponentElement($new)) {\n    return (\n      $old.componentInstance.Component !== $new.componentInstance.Component\n    ) || (\n      $old.props.key !== $new.props.key\n    );\n  }\n\n  return false;\n}\n\nexport function mountComponent(componentInstance: ComponentInstance) {\n  renderComponent(componentInstance);\n  componentInstance.isMounted = true;\n  return componentInstance.$element;\n}\n\nexport function unmountComponent(componentInstance: ComponentInstance) {\n  if (!componentInstance.isMounted) {\n    return;\n  }\n\n  idsToExcludeFromUpdate.add(componentInstance.id);\n\n  componentInstance.hooks.effects.byCursor.forEach((effect) => {\n    if (effect.cleanup) {\n      safeExec(effect.cleanup);\n    }\n\n    effect.cleanup = undefined;\n    effect.releaseSignals?.();\n  });\n\n  componentInstance.isMounted = false;\n\n  helpGc(componentInstance);\n}\n\n// We need to remove all references to DOM objects. We also clean all other references, just in case\nfunction helpGc(componentInstance: ComponentInstance) {\n  componentInstance.hooks.effects.byCursor.forEach((hook) => {\n    hook.schedule = undefined as any;\n    hook.cleanup = undefined as any;\n    hook.releaseSignals = undefined as any;\n    hook.dependencies = undefined;\n  });\n\n  componentInstance.hooks.state.byCursor.forEach((hook) => {\n    hook.value = undefined;\n    hook.nextValue = undefined;\n    hook.setter = undefined as any;\n  });\n\n  componentInstance.hooks.memos.byCursor.forEach((hook) => {\n    hook.value = undefined as any;\n    hook.dependencies = undefined as any;\n  });\n\n  componentInstance.hooks.refs.byCursor.forEach((hook) => {\n    hook.current = undefined as any;\n  });\n\n  componentInstance.hooks = undefined as any;\n  componentInstance.$element = undefined as any;\n  componentInstance.renderedValue = undefined;\n  componentInstance.Component = undefined as any;\n  componentInstance.props = undefined as any;\n  componentInstance.onUpdate = undefined;\n}\n\nfunction prepareComponentForFrame(componentInstance: ComponentInstance) {\n  if (!componentInstance.isMounted) {\n    return;\n  }\n\n  componentInstance.hooks.state.byCursor.forEach((hook) => {\n    hook.value = hook.nextValue;\n  });\n}\n\nfunction forceUpdateComponent(componentInstance: ComponentInstance) {\n  if (!componentInstance.isMounted || !componentInstance.onUpdate) {\n    return;\n  }\n\n  const currentElement = componentInstance.$element;\n\n  renderComponent(componentInstance);\n\n  if (componentInstance.$element !== currentElement) {\n    componentInstance.onUpdate();\n  }\n}\n\nexport function useState<T>(): [T | undefined, StateHookSetter<T | undefined>];\nexport function useState<T>(initial: T, debugKey?: string): [T, StateHookSetter<T>];\nexport function useState<T>(initial?: T, debugKey?: string): [T, StateHookSetter<T>] {\n  const { cursor, byCursor } = renderingInstance.hooks.state;\n\n  if (byCursor[cursor] === undefined) {\n    byCursor[cursor] = {\n      value: initial,\n      nextValue: initial,\n      setter: ((componentInstance) => (newValue: ((current: T) => T) | T) => {\n        if (typeof newValue === 'function') {\n          newValue = (newValue as (current: T) => T)(byCursor[cursor].value);\n        }\n\n        if (byCursor[cursor].nextValue === newValue) {\n          return;\n        }\n\n        byCursor[cursor].nextValue = newValue;\n\n        instancesPendingUpdate.add(componentInstance);\n        runUpdatePassOnRaf();\n\n        if (DEBUG_MORE) {\n          if (componentInstance.name !== 'TeactNContainer') {\n            // eslint-disable-next-line no-console\n            console.log(\n              '[Teact.useState]',\n              componentInstance.name,\n              // `componentInstance.Component` may be set to `null` by GC helper\n              componentInstance.Component && (componentInstance.Component as FC_withDebug).DEBUG_contentComponentName\n                ? `> ${(componentInstance.Component as FC_withDebug).DEBUG_contentComponentName}`\n                : '',\n              `State update at cursor #${cursor}${debugKey ? ` (${debugKey})` : ''}, next value: `,\n              byCursor[cursor].nextValue,\n            );\n          }\n        }\n      })(renderingInstance),\n    };\n  }\n\n  renderingInstance.hooks.state.cursor++;\n\n  return [\n    byCursor[cursor].value,\n    byCursor[cursor].setter,\n  ];\n}\n\nfunction useEffectBase(\n  isLayout: boolean,\n  effect: Effect,\n  dependencies?: readonly any[],\n  debugKey?: string,\n) {\n  const { cursor, byCursor } = renderingInstance.hooks.effects;\n  const componentInstance = renderingInstance;\n\n  const runEffectCleanup = () => safeExec(() => {\n    const { cleanup } = byCursor[cursor];\n    if (!cleanup) {\n      return;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    let DEBUG_startAt: number | undefined;\n    if (DEBUG) {\n      DEBUG_startAt = performance.now();\n    }\n\n    cleanup();\n\n    if (DEBUG) {\n      const duration = performance.now() - DEBUG_startAt!;\n      const componentName = componentInstance.name;\n      if (duration > DEBUG_EFFECT_THRESHOLD) {\n        // eslint-disable-next-line no-console\n        console.warn(\n          `[Teact] Slow cleanup at effect cursor #${cursor}: ${componentName}, ${Math.round(duration)} ms`,\n        );\n      }\n    }\n  }, () => {\n    // eslint-disable-next-line no-console\n    console.error(`[Teact] Error in effect cleanup at cursor #${cursor} in ${componentInstance.name}`);\n  }, () => {\n    byCursor[cursor].cleanup = undefined;\n  });\n\n  const runEffect = () => safeExec(() => {\n    if (!componentInstance.isMounted) {\n      return;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    let DEBUG_startAt: number | undefined;\n    if (DEBUG) {\n      DEBUG_startAt = performance.now();\n    }\n\n    const result = effect();\n    if (typeof result === 'function') {\n      byCursor[cursor].cleanup = result;\n    }\n\n    if (DEBUG) {\n      const duration = performance.now() - DEBUG_startAt!;\n      const componentName = componentInstance.name;\n      if (duration > DEBUG_EFFECT_THRESHOLD) {\n        // eslint-disable-next-line no-console\n        console.warn(`[Teact] Slow effect at cursor #${cursor}: ${componentName}, ${Math.round(duration)} ms`);\n      }\n    }\n  }, () => {\n    // eslint-disable-next-line no-console\n    console.error(`[Teact] Error in effect at cursor #${cursor} in ${componentInstance.name}`);\n  });\n\n  function schedule() {\n    const effectId = `${componentInstance.id}_${cursor}`;\n\n    if (isLayout) {\n      pendingLayoutCleanups.set(effectId, runEffectCleanup);\n      pendingLayoutEffects.set(effectId, runEffect);\n    } else {\n      pendingCleanups.set(effectId, runEffectCleanup);\n      pendingEffects.set(effectId, runEffect);\n    }\n\n    runUpdatePassOnRaf();\n  }\n\n  if (dependencies && byCursor[cursor]?.dependencies) {\n    if (dependencies.some((dependency, i) => dependency !== byCursor[cursor].dependencies![i])) {\n      if (debugKey) {\n        const causedBy = dependencies.reduce((res, newValue, i) => {\n          const prevValue = byCursor[cursor].dependencies![i];\n          if (newValue !== prevValue) {\n            res.push(`${i}: ${prevValue} => ${newValue}`);\n          }\n\n          return res;\n        }, []);\n\n        // eslint-disable-next-line no-console\n        console.log(`[Teact] Effect \"${debugKey}\" caused by dependencies.`, causedBy.join(', '));\n      }\n\n      schedule();\n    }\n  } else {\n    if (debugKey) {\n      // eslint-disable-next-line no-console\n      console.log(`[Teact] Effect \"${debugKey}\" caused by missing dependencies.`);\n    }\n\n    schedule();\n  }\n\n  const isFirstRun = !byCursor[cursor];\n\n  byCursor[cursor] = {\n    ...byCursor[cursor],\n    dependencies,\n    schedule,\n  };\n\n  function setupSignals() {\n    const cleanups = dependencies?.filter(isSignal).map((signal) => signal.subscribe(() => {\n      byCursor[cursor].schedule();\n    }));\n\n    if (!cleanups?.length) {\n      return undefined;\n    }\n\n    return () => {\n      cleanups.forEach((cleanup) => cleanup());\n    };\n  }\n\n  if (isFirstRun) {\n    byCursor[cursor].releaseSignals = setupSignals();\n  }\n\n  renderingInstance.hooks.effects.cursor++;\n}\n\nexport function useEffect(effect: Effect, dependencies?: readonly any[], debugKey?: string) {\n  return useEffectBase(false, effect, dependencies, debugKey);\n}\n\nexport function useLayoutEffect(effect: Effect, dependencies?: readonly any[], debugKey?: string) {\n  return useEffectBase(true, effect, dependencies, debugKey);\n}\n\nexport function useMemo<T extends any>(resolver: () => T, dependencies: any[], debugKey?: string): T {\n  const { cursor, byCursor } = renderingInstance.hooks.memos;\n  let { value } = byCursor[cursor] || {};\n\n  if (\n    byCursor[cursor] === undefined\n    || dependencies.length !== byCursor[cursor].dependencies.length\n    || dependencies.some((dependency, i) => dependency !== byCursor[cursor].dependencies[i])\n  ) {\n    if (DEBUG && debugKey) {\n      // eslint-disable-next-line no-console\n      console.log(\n        `[Teact.useMemo] ${renderingInstance.name} (${debugKey}): Update is caused by:`,\n        byCursor[cursor]\n          ? getUnequalProps(byCursor[cursor].dependencies, dependencies).join(', ')\n          : '[first render]',\n      );\n    }\n\n    value = resolver();\n  }\n\n  byCursor[cursor] = {\n    value,\n    dependencies,\n  };\n\n  renderingInstance.hooks.memos.cursor++;\n\n  return value;\n}\n\nexport function useCallback<F extends AnyFunction>(newCallback: F, dependencies: any[], debugKey?: string): F {\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  return useMemo(() => newCallback, dependencies, debugKey);\n}\n\nexport function useRef<T>(initial: T): { current: T };\nexport function useRef<T>(): { current: T | undefined }; // TT way (empty is `undefined`)\nexport function useRef<T>(initial: null): { current: T | null }; // React way (empty is `null`)\n// eslint-disable-next-line no-null/no-null\nexport function useRef<T>(initial?: T | null) {\n  const { cursor, byCursor } = renderingInstance.hooks.refs;\n  if (!byCursor[cursor]) {\n    byCursor[cursor] = {\n      current: initial,\n    };\n  }\n\n  renderingInstance.hooks.refs.cursor++;\n\n  return byCursor[cursor];\n}\n\nexport function memo<T extends FC>(Component: T, debugKey?: string) {\n  return function TeactMemoWrapper(props: Props) {\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    return useMemo(() => createElement(Component, props), Object.values(props), debugKey);\n  } as T;\n}\n\nexport default {\n  createElement,\n  Fragment,\n};\n","export default function arePropsShallowEqual(currentProps: AnyLiteral, newProps: AnyLiteral) {\n  if (currentProps === newProps) {\n    return true;\n  }\n\n  const currentKeys = Object.keys(currentProps);\n  const currentKeysLength = currentKeys.length;\n  const newKeysLength = Object.keys(newProps).length;\n\n  if (currentKeysLength !== newKeysLength) {\n    return false;\n  }\n\n  if (currentKeysLength === 0) {\n    return true;\n  }\n\n  for (let i = 0; i < currentKeysLength; i++) {\n    const prop = currentKeys[i];\n    if (currentProps[prop] !== newProps[prop]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexport function getUnequalProps(currentProps: AnyLiteral, newProps: AnyLiteral) {\n  const currentKeys = Object.keys(currentProps);\n  const currentKeysLength = currentKeys.length;\n  const newKeysLength = Object.keys(newProps).length;\n\n  if (currentKeysLength !== newKeysLength) {\n    return ['%LENGTH%'];\n  }\n\n  return currentKeys.reduce((res, prop) => {\n    if (currentProps[prop] !== newProps[prop]) {\n      res.push(`${prop}: ${currentProps[prop]} => ${newProps[prop]}`);\n    }\n\n    return res;\n  }, [] as string[]);\n}\n","export function createCallbackManager() {\n  const callbacks = new Set<AnyToVoidFunction>();\n\n  function addCallback(cb: AnyToVoidFunction) {\n    callbacks.add(cb);\n\n    return () => {\n      removeCallback(cb);\n    };\n  }\n\n  function removeCallback(cb: AnyToVoidFunction) {\n    callbacks.delete(cb);\n  }\n\n  function runCallbacks(...args: any[]) {\n    callbacks.forEach((callback) => {\n      callback(...args);\n    });\n  }\n\n  function hasCallbacks() {\n    return Boolean(callbacks.size);\n  }\n\n  return {\n    runCallbacks,\n    addCallback,\n    removeCallback,\n    hasCallbacks,\n  };\n}\n\nexport type CallbackManager = ReturnType<typeof createCallbackManager>;\n","import { throttle } from './schedulers';\n\nconst KEYS_TO_IGNORE = new Set([\n  'TeactMemoWrapper renders',\n  'TeactNContainer renders',\n  'Button renders',\n]);\nconst MIN_RENDERS_TO_SHOW = 5;\nconst MIN_DURATION_TO_SHOW = 2;\nconst BG_GREEN = ' style=\"background: lightgreen\"';\n\nlet counters: Record<string, {\n  value: number;\n  lastUpdateAt: number;\n}> = {};\n\nconst renderCountersThrottled = throttle(renderCounters, 500, false);\n\nlet loggerEl: HTMLDivElement;\n\nexport function debugToOverlay(text: string) {\n  if (!loggerEl) {\n    setupOverlay();\n  }\n\n  const date = new Date();\n  const dateFormatted = `${date.toLocaleTimeString()}.${date.getMilliseconds()}`;\n  const wasAtBottom = loggerEl.scrollTop + 10 >= loggerEl.scrollHeight - loggerEl.offsetHeight;\n\n  loggerEl.innerHTML += `${dateFormatted}: ${text}<br/>`;\n\n  if (wasAtBottom) {\n    loggerEl.scrollTop = loggerEl.scrollHeight;\n  }\n}\n\nexport function incrementOverlayCounter(key: string, value = 1) {\n  const now = Date.now();\n  if (!counters[key]) {\n    counters[key] = { value, lastUpdateAt: now };\n  } else {\n    counters[key].value += value;\n    counters[key].lastUpdateAt = now;\n  }\n\n  renderCountersThrottled();\n}\n\nexport function renderCounters() {\n  if (!loggerEl) {\n    setupOverlay();\n  }\n\n  const halfSecondAgo = Date.now() - 500;\n  const [maxRenders, maxDuration] = Object.entries(counters).reduce((acc, [key, { value }]) => {\n    if (KEYS_TO_IGNORE.has(key)) {\n      return acc;\n    }\n\n    if (key.includes('renders') && value > acc[0]) {\n      acc[0] = value;\n    }\n\n    if (key.includes('duration') && value > acc[1]) {\n      acc[1] = value;\n    }\n\n    return acc;\n  }, [0, 0]);\n\n  loggerEl.innerHTML = Object\n    .entries(counters)\n    .filter(([key, { value }]) => (\n      (!KEYS_TO_IGNORE.has(key)) && (\n        (key.includes('renders') && value > MIN_RENDERS_TO_SHOW)\n        || (key.includes('duration') && value > MIN_DURATION_TO_SHOW)\n      )\n    ))\n    .sort((a, b) => (\n      b[1].lastUpdateAt - a[1].lastUpdateAt\n    ))\n    .map(([key, { value, lastUpdateAt }]) => ([\n      `<div style=\"background: #ff0000${factorToHex(value / (key.includes('renders') ? maxRenders : maxDuration))}\">`,\n      `  <span${lastUpdateAt > halfSecondAgo ? BG_GREEN : ''}>${key}: ${Math.round(value)}</span>`,\n      '</div>',\n    ].join('\\n')))\n    .join('\\n');\n}\n\nfunction setupOverlay() {\n  loggerEl = document.createElement('div');\n  loggerEl.style.cssText = 'position: absolute; left: 0; bottom: 25px; z-index: 9998; width: 260px; height: 200px;'\n    + ' border: 1px solid #555; background: rgba(255, 255, 255, 0.9); overflow: auto; font-size: 10px;';\n  document.body.appendChild(loggerEl);\n\n  const clearEl = document.createElement('a');\n  clearEl.style.cssText = 'position: absolute; left: 222px; bottom: 198px; z-index: 9999; font-size: 20px; '\n    + 'cursor: pointer;';\n  clearEl.innerText = '';\n  clearEl.addEventListener('click', () => {\n    counters = {};\n    renderCountersThrottled();\n  });\n  document.body.appendChild(clearEl);\n}\n\nfunction factorToHex(factor: number) {\n  return Math.round(255 * factor).toString(16).padStart(2, '0');\n}\n","window.addEventListener('error', handleErrorEvent);\nwindow.addEventListener('unhandledrejection', handleErrorEvent);\n\nfunction handleErrorEvent(e: ErrorEvent | PromiseRejectionEvent) {\n  e.preventDefault();\n\n  handleError(e instanceof ErrorEvent ? e.error : e.reason);\n}\n\nexport function handleError(err: Error) {\n  // eslint-disable-next-line no-console\n  console.error(err);\n}\n","type OrderDirection =\n  'asc'\n  | 'desc';\n\ninterface OrderCallback<T> {\n  (member: T): any;\n}\n\nexport function orderBy<T>(\n  collection: T[],\n  orderRule: (keyof T) | OrderCallback<T> | ((keyof T) | OrderCallback<T>)[],\n  mode: OrderDirection | [OrderDirection, OrderDirection] = 'asc',\n): T[] {\n  function compareValues(a: T, b: T, currentOrderRule: (keyof T) | OrderCallback<T>, isAsc: boolean) {\n    const aValue = (typeof currentOrderRule === 'function' ? currentOrderRule(a) : a[currentOrderRule]) || 0;\n    const bValue = (typeof currentOrderRule === 'function' ? currentOrderRule(b) : b[currentOrderRule]) || 0;\n\n    return isAsc ? aValue - bValue : bValue - aValue;\n  }\n\n  if (Array.isArray(orderRule)) {\n    const [mode1, mode2] = Array.isArray(mode) ? mode : [mode, mode];\n    const [orderRule1, orderRule2] = orderRule;\n    const isAsc1 = mode1 === 'asc';\n    const isAsc2 = mode2 === 'asc';\n\n    return collection.sort((a, b) => {\n      return compareValues(a, b, orderRule1, isAsc1) || compareValues(a, b, orderRule2, isAsc2);\n    });\n  }\n\n  const isAsc = mode === 'asc';\n  return collection.sort((a, b) => {\n    return compareValues(a, b, orderRule, isAsc);\n  });\n}\n\nexport function unique<T extends any>(array: T[]): T[] {\n  return Array.from(new Set(array));\n}\n","import { DEBUG_MORE } from '../config';\nimport { handleError } from './handleError';\n\nconst SAFE_EXEC_ENABLED = !DEBUG_MORE;\n\nexport default function safeExec(cb: Function, rescue?: (err: Error) => void, always?: NoneToVoidFunction) {\n  if (!SAFE_EXEC_ENABLED) {\n    return cb();\n  }\n\n  try {\n    return cb();\n  } catch (err: any) {\n    rescue?.(err);\n    handleError(err);\n    return undefined;\n  } finally {\n    always?.();\n  }\n}\n","export type Scheduler = typeof requestAnimationFrame | typeof onTickEnd;\n\nexport function throttle<F extends AnyToVoidFunction>(\n  fn: F,\n  ms: number,\n  shouldRunFirst = true,\n) {\n  let interval: number | undefined;\n  let isPending: boolean;\n  let args: Parameters<F>;\n\n  return (..._args: Parameters<F>) => {\n    isPending = true;\n    args = _args;\n\n    if (!interval) {\n      if (shouldRunFirst) {\n        isPending = false;\n        fn(...args);\n      }\n\n      // eslint-disable-next-line no-restricted-globals\n      interval = self.setInterval(() => {\n        if (!isPending) {\n          // eslint-disable-next-line no-restricted-globals\n          self.clearInterval(interval!);\n          interval = undefined;\n          return;\n        }\n\n        isPending = false;\n        fn(...args);\n      }, ms);\n    }\n  };\n}\n\nexport function throttleWithTickEnd<F extends AnyToVoidFunction>(fn: F) {\n  return throttleWith(onTickEnd, fn);\n}\n\nexport function throttleWith<F extends AnyToVoidFunction>(schedulerFn: Scheduler, fn: F) {\n  let waiting = false;\n  let args: Parameters<F>;\n\n  return (..._args: Parameters<F>) => {\n    args = _args;\n\n    if (!waiting) {\n      waiting = true;\n\n      schedulerFn(() => {\n        waiting = false;\n        fn(...args);\n      });\n    }\n  };\n}\n\nexport function onIdle(cb: NoneToVoidFunction, timeout?: number) {\n  // eslint-disable-next-line no-restricted-globals\n  if (self.requestIdleCallback) {\n    // eslint-disable-next-line no-restricted-globals\n    self.requestIdleCallback(cb, { timeout });\n  } else {\n    onTickEnd(cb);\n  }\n}\n\nconst FAST_RAF_TIMEOUT_FALLBACK_MS = 300;\n\nlet fastRafCallbacks: Set<NoneToVoidFunction> | undefined;\nlet fastRafFallbackCallbacks: Set<NoneToVoidFunction> | undefined;\nlet fastRafFallbackTimeout: number | undefined;\n\n// May result in an immediate execution if called from another RAF callback which was scheduled\n// (and therefore is executed) earlier than RAF callback scheduled by `fastRaf`\nexport function fastRaf(callback: NoneToVoidFunction, withTimeoutFallback = false) {\n  if (!fastRafCallbacks) {\n    fastRafCallbacks = new Set([callback]);\n\n    requestAnimationFrame(() => {\n      const currentCallbacks = fastRafCallbacks!;\n\n      fastRafCallbacks = undefined;\n      fastRafFallbackCallbacks = undefined;\n\n      if (fastRafFallbackTimeout) {\n        clearTimeout(fastRafFallbackTimeout);\n        fastRafFallbackTimeout = undefined;\n      }\n\n      currentCallbacks.forEach((cb) => cb());\n    });\n  } else {\n    fastRafCallbacks.add(callback);\n  }\n\n  if (withTimeoutFallback) {\n    if (!fastRafFallbackCallbacks) {\n      fastRafFallbackCallbacks = new Set([callback]);\n    } else {\n      fastRafFallbackCallbacks.add(callback);\n    }\n\n    if (!fastRafFallbackTimeout) {\n      fastRafFallbackTimeout = window.setTimeout(() => {\n        const currentTimeoutCallbacks = fastRafFallbackCallbacks!;\n\n        if (fastRafCallbacks) {\n          currentTimeoutCallbacks.forEach(fastRafCallbacks.delete, fastRafCallbacks);\n        }\n        fastRafFallbackCallbacks = undefined;\n\n        if (fastRafFallbackTimeout) {\n          clearTimeout(fastRafFallbackTimeout);\n          fastRafFallbackTimeout = undefined;\n        }\n\n        currentTimeoutCallbacks.forEach((cb) => cb());\n      }, FAST_RAF_TIMEOUT_FALLBACK_MS);\n    }\n  }\n}\n\nlet onTickEndCallbacks: NoneToVoidFunction[] | undefined;\n\nexport function onTickEnd(callback: NoneToVoidFunction) {\n  if (!onTickEndCallbacks) {\n    onTickEndCallbacks = [callback];\n\n    Promise.resolve().then(() => {\n      const currentCallbacks = onTickEndCallbacks!;\n      onTickEndCallbacks = undefined;\n      currentCallbacks.forEach((cb) => cb());\n    });\n  } else {\n    onTickEndCallbacks.push(callback);\n  }\n}\n\nlet beforeUnloadCallbacks: NoneToVoidFunction[] | undefined;\n\nexport function onBeforeUnload(callback: NoneToVoidFunction, isLast = false) {\n  if (!beforeUnloadCallbacks) {\n    beforeUnloadCallbacks = [];\n    // eslint-disable-next-line no-restricted-globals\n    self.addEventListener('beforeunload', () => {\n      beforeUnloadCallbacks!.forEach((cb) => cb());\n    });\n  }\n\n  if (isLast) {\n    beforeUnloadCallbacks.push(callback);\n  } else {\n    beforeUnloadCallbacks.unshift(callback);\n  }\n\n  return () => {\n    beforeUnloadCallbacks = beforeUnloadCallbacks!.filter((cb) => cb !== callback);\n  };\n}\n","import type { CallbackManager } from './callbacks';\nimport { createCallbackManager } from './callbacks';\n\ninterface SignalState<T> {\n  value: T;\n  effects: CallbackManager;\n}\n\nconst SIGNAL_MARK = Symbol('SIGNAL_MARK');\n\nexport type Signal<T = any> = ((() => T) & {\n  readonly [SIGNAL_MARK]: symbol;\n  subscribe: (cb: AnyToVoidFunction) => NoneToVoidFunction;\n});\n\nexport function isSignal(obj: any): obj is Signal {\n  return typeof obj === 'function' && SIGNAL_MARK in obj;\n}\n\n// A shorthand to unsubscribe effect from all signals\nconst unsubscribesByEffect = new Map<NoneToVoidFunction, Set<NoneToVoidFunction>>();\n\nlet currentEffect: NoneToVoidFunction | undefined;\n\nexport function createSignal<T>(defaultValue?: T) {\n  const state: SignalState<typeof defaultValue> = {\n    value: defaultValue,\n    effects: createCallbackManager(),\n  };\n\n  function subscribe(effect: NoneToVoidFunction) {\n    const unsubscribe = state.effects.addCallback(effect);\n\n    if (!unsubscribesByEffect.has(effect)) {\n      unsubscribesByEffect.set(effect, new Set([unsubscribe]));\n    } else {\n      unsubscribesByEffect.get(effect)!.add(unsubscribe);\n    }\n\n    return () => {\n      unsubscribe();\n\n      const unsubscribes = unsubscribesByEffect.get(effect)!;\n      unsubscribes.delete(unsubscribe);\n      if (!unsubscribes.size) {\n        unsubscribesByEffect.delete(effect);\n      }\n    };\n  }\n\n  function getter() {\n    if (currentEffect) {\n      subscribe(currentEffect);\n    }\n\n    return state.value;\n  }\n\n  function setter(newValue: T) {\n    if (state.value === newValue) {\n      return;\n    }\n\n    state.value = newValue;\n    state.effects.runCallbacks();\n  }\n\n  const signal = Object.assign(getter as Signal<T>, {\n    [SIGNAL_MARK]: SIGNAL_MARK,\n    subscribe,\n  });\n\n  return [signal, setter] as const;\n}\n\nexport function cleanupEffect(effect: NoneToVoidFunction) {\n  unsubscribesByEffect.get(effect)?.forEach((unsubscribe) => {\n    unsubscribe();\n  });\n  unsubscribesByEffect.delete(effect);\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import React, { useState } from '../src/teact/teact';\nimport TeactDOM from '../src/teact/teact-dom';\n\nTeactDOM.render(\n  <App />,\n  document.getElementById('root')!,\n);\n\nfunction App() {\n  return (\n    <div>\n      <h2>Hello Teact!</h2>\n\n      <Child />\n      <Checkbox />\n    </div>\n  );\n}\n\nfunction Child() {\n  return (\n    <div>\n      This is your first component.\n    </div>\n  );\n}\n\nfunction Checkbox() {\n  const [isChecked, setIsChecked] = useState(true);\n\n  function handleCheck() {\n    setIsChecked((current) => !current);\n  }\n\n  return (\n    <label>\n      <input type=\"checkbox\" checked={isChecked} onChange={handleCheck} />\n      This is a controlled form element.\n    </label>\n  );\n}\n"],"names":["DEBUG","DEBUG_MORE","fastRaf","throttleWith","safeExec","setPhase","pendingMeasureTasks","pendingMutationTasks","pendingForceReflowTasks","runUpdatePassOnRaf","throttleWithRafFallback","currentMeasureTasks","forEach","task","Promise","resolve","then","currentMutationTasks","pendingForceReflowMutationTasks","mutationTask","push","requestMeasure","cb","requestMutation","requestNextMutation","requestForcedReflow","fn","throttledFn","Element","props","methods","HTMLElement","window","VisualViewport","Document","HTMLInputElement","MouseEvent","Range","LAYOUT_CAUSES","DEFAULT_ERROR_HANDLER","console","error","onError","nativeMethods","Map","phase","isStrict","observer","newPhase","getPhase","enableStrict","setupLayoutDetectors","setupMutationObserver","disableStrict","clearMutationObserver","clearLayoutDetectors","forceMeasure","Error","result","setHandler","handler","Object","entries","name","causes","entity","prototype","prop","nativeGetter","getOwnPropertyDescriptor","get","set","defineProperty","onMeasure","call","method","nativeMethod","args","apply","clear","MutationObserver","mutations","target","type","attributeName","document","contains","contentEditable","startsWith","observe","body","childList","attributes","subtree","characterData","disconnect","undefined","propName","NON_BUBBLEABLE_EVENTS","Set","documentEventCounters","delegationRegistryByEventType","delegatedEventTypesByElement","addEventListener","element","asCapture","eventType","resolveEventType","canUseEventDelegation","addDelegatedListener","removeEventListener","removeDelegatedListener","replace","toLowerCase","tagName","realEventType","has","handleEvent","resolveDelegationRegistry","resolveDelegatedEventTypes","add","removeAllDelegatedListeners","eventTypes","realEvent","events","furtherCallsPrevented","current","stopPropagation","preventDefault","event","Proxy","p","Reflect","parentNode","existing","newSet","documentListenersCount","keys","length","delegatedHandlersCount1","values","reduce","acc","counter","delegationRegistriesCount","delegatedHandlersCount2","delegationRegistry","size","delegationElementsCount","delegatedEventTypesCount","Array","from","warn","hasElementChanged","isComponentElement","isTagElement","isParentElement","isTextElement","isEmptyElement","mountComponent","renderComponent","unmountComponent","isFragmentElement","runImmediateEffects","willRunImmediateEffects","unique","FILTERED_ATTRIBUTES","HTML_ATTRIBUTES","CONTROLLABLE_TAGS","MAPPED_ATTRIBUTES","autoPlay","autoComplete","INDEX_KEY_PREFIX","headsByElement","WeakMap","extraClasses","DEBUG_virtualTreeSize","render","$element","parentEl","children","$head","$newElement","renderWithVirtual","$current","$new","$parent","index","options","skipComponentUpdate","fragment","nextSibling","isCurrentComponent","isNewComponent","$newAsReal","isCurrentFragment","isNewFragment","updateComponent","componentInstance","isMounted","setupComponentUpdateListener","newTarget","initComponent","mountChildren","node","createNode","insertBefore","remount","getNextSibling","isComponent","isFragment","renderChildren","$currentAsReal","currentTarget","isTag","$newAsTag","ref","updateAttributes","$firstChild","onUpdate","map","$child","i","unmountChildren","createTextNode","value","tag","createElement","processControlled","key","setAttribute","processUncontrolledOnMount","componentNextSibling","replaceChild","removeChild","unmountRealTree","appendChild","lastChild","currentEl","DEBUG_checkKeyUniqueness","teactFastList","renderFastListChildren","currentChildrenLength","newChildrenLength","maxLength","Math","max","newChildren","createDocumentFragment","lastCurrentChild","fragmentNextSibling","$newChild","newKeys","currentRemainingIndex","remainingByKey","$currentChild","isKeyPresent","newChildKey","orderKey","teactOrderKey","fragmentElements","fragmentIndex","currentPreservedIndex","currentChildInfo","concat","renderFragment","newOrderKey","shouldMoveNode","isMovingDown","childNodes","elements","isValueControlled","isCheckedControlled","checked","isControlled","includes","toUpperCase","onInput","onChange","e","selectionStart","selectionEnd","isCaretAtEnd","setSelectionRange","selectionState","dataset","__teactSelectionState","JSON","stringify","defaultValue","defaultChecked","currentEntries","newEntries","currentValue","newValue","removeAttribute","updateClassName","inputEl","selectionStateJson","parse","style","cssText","innerHTML","__html","endsWith","extra","className","extraArray","join","addExtraClass","forceSingle","classNames","split","cn","classList","removeExtraClass","remove","toggleExtraClass","force","toggle","firstChild","child","filter","a","indexOf","TeactDOM","orderBy","getUnequalProps","incrementOverlayCounter","isSignal","VirtualElementTypesEnum","Fragment","Symbol","DEBUG_RENDER_THRESHOLD","DEBUG_EFFECT_THRESHOLD","DEBUG_SILENT_RENDERS_FOR","lastComponentId","renderingInstance","Empty","Text","Tag","Component","source","flat","buildFragmentElement","createComponentInstance","buildTagElement","dropEmptyTail","buildChildElement","parsedChildren","id","hooks","state","cursor","byCursor","effects","memos","refs","buildComponentElement","noEmpty","isEmptyPlaceholder","slice","buildEmptyElement","buildTextElement","String","DEBUG_components","TOTAL","componentName","renderCount","instancesPendingUpdate","idsToExcludeFromUpdate","pendingEffects","pendingCleanups","pendingLayoutEffects","pendingLayoutCleanups","areImmediateEffectsPending","instancesToUpdate","sort","b","currentCleanups","currentEffects","prepareComponentForFrame","instance","forceUpdateComponent","currentLayoutCleanups","currentLayoutEffects","newRenderedValue","DEBUG_startAt","renderTimes","log","performance","now","duration","round","renderedValue","isArray","$old","effect","cleanup","releaseSignals","helpGc","hook","schedule","dependencies","nextValue","setter","currentElement","useState","initial","debugKey","DEBUG_contentComponentName","useEffectBase","isLayout","runEffectCleanup","runEffect","effectId","some","dependency","causedBy","res","prevValue","isFirstRun","setupSignals","cleanups","signal","subscribe","useEffect","useLayoutEffect","useMemo","resolver","useCallback","newCallback","useRef","memo","TeactMemoWrapper","arePropsShallowEqual","currentProps","newProps","currentKeys","currentKeysLength","newKeysLength","createCallbackManager","callbacks","addCallback","removeCallback","runCallbacks","callback","hasCallbacks","Boolean","throttle","KEYS_TO_IGNORE","MIN_RENDERS_TO_SHOW","MIN_DURATION_TO_SHOW","BG_GREEN","counters","renderCountersThrottled","renderCounters","loggerEl","debugToOverlay","text","setupOverlay","date","Date","dateFormatted","toLocaleTimeString","getMilliseconds","wasAtBottom","scrollTop","scrollHeight","offsetHeight","lastUpdateAt","halfSecondAgo","maxRenders","maxDuration","factorToHex","clearEl","innerText","factor","toString","padStart","handleErrorEvent","handleError","ErrorEvent","reason","err","collection","orderRule","mode","compareValues","currentOrderRule","isAsc","aValue","bValue","mode1","mode2","orderRule1","orderRule2","isAsc1","isAsc2","array","SAFE_EXEC_ENABLED","rescue","always","ms","shouldRunFirst","interval","isPending","_args","self","setInterval","clearInterval","throttleWithTickEnd","onTickEnd","schedulerFn","waiting","onIdle","timeout","requestIdleCallback","FAST_RAF_TIMEOUT_FALLBACK_MS","fastRafCallbacks","fastRafFallbackCallbacks","fastRafFallbackTimeout","withTimeoutFallback","requestAnimationFrame","currentCallbacks","clearTimeout","setTimeout","currentTimeoutCallbacks","onTickEndCallbacks","beforeUnloadCallbacks","onBeforeUnload","isLast","unshift","SIGNAL_MARK","obj","unsubscribesByEffect","currentEffect","createSignal","unsubscribe","unsubscribes","getter","assign","cleanupEffect","React","getElementById","App","Child","Checkbox","isChecked","setIsChecked","handleCheck"],"sourceRoot":""}