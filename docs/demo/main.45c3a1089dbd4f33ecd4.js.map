{"version":3,"file":"main.45c3a1089dbd4f33ecd4.js","mappings":"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","sources":["webpack://teact/./src/config.ts","webpack://teact/./src/lib/fasterdom/fasterdom.ts","webpack://teact/./src/lib/fasterdom/layoutCauses.ts","webpack://teact/./src/lib/fasterdom/stricterdom.ts","webpack://teact/./src/teact/dom-events.ts","webpack://teact/./src/teact/teact-dom.ts","webpack://teact/./src/teact/teact.ts","webpack://teact/./src/util/arePropsShallowEqual.ts","webpack://teact/./src/util/callbacks.ts","webpack://teact/./src/util/debugOverlay.ts","webpack://teact/./src/util/handleError.ts","webpack://teact/./src/util/iteratees.ts","webpack://teact/./src/util/safeExec.ts","webpack://teact/./src/util/schedulers.ts","webpack://teact/./src/util/signals.ts","webpack://teact/webpack/bootstrap","webpack://teact/webpack/runtime/define property getters","webpack://teact/webpack/runtime/hasOwnProperty shorthand","webpack://teact/webpack/runtime/make namespace object","webpack://teact/./demo/index.tsx"],"sourcesContent":["export const DEBUG = false;\nexport const DEBUG_MORE = false;\n","import { fastRaf, throttleWith } from '../../util/schedulers';\nimport safeExec from '../../util/safeExec';\n\nimport { setPhase } from './stricterdom';\n\nlet pendingMeasureTasks: NoneToVoidFunction[] = [];\nlet pendingMutationTasks: NoneToVoidFunction[] = [];\nlet pendingForceReflowTasks: (() => NoneToVoidFunction | void)[] = [];\n\nconst runUpdatePassOnRaf = throttleWithRafFallback(() => {\n  const currentMeasureTasks = pendingMeasureTasks;\n  pendingMeasureTasks = [];\n  currentMeasureTasks.forEach((task) => {\n    safeExec(task);\n  });\n\n  // We use promises to provide correct order for Mutation Observer callback microtasks\n  Promise.resolve()\n    .then(() => {\n      setPhase('mutate');\n\n      const currentMutationTasks = pendingMutationTasks;\n      pendingMutationTasks = [];\n\n      currentMutationTasks.forEach((task) => {\n        safeExec(task);\n      });\n    })\n    .then(() => {\n      setPhase('measure');\n\n      const pendingForceReflowMutationTasks: NoneToVoidFunction[] = [];\n      // Will include tasks created during the loop\n      for (const task of pendingForceReflowTasks) {\n        safeExec(() => {\n          const mutationTask = task();\n          if (mutationTask) {\n            pendingForceReflowMutationTasks.push(mutationTask);\n          }\n        });\n      }\n      pendingForceReflowTasks = [];\n\n      return pendingForceReflowMutationTasks;\n    })\n    .then((pendingForceReflowMutationTasks) => {\n      setPhase('mutate');\n\n      // Will include tasks created during the loop\n      for (const task of pendingForceReflowMutationTasks) {\n        safeExec(task);\n      }\n    })\n    .then(() => {\n      setPhase('measure');\n    });\n});\n\nexport function requestMeasure(cb: NoneToVoidFunction) {\n  pendingMeasureTasks.push(cb);\n  runUpdatePassOnRaf();\n}\n\nexport function requestMutation(cb: NoneToVoidFunction) {\n  pendingMutationTasks.push(cb);\n  runUpdatePassOnRaf();\n}\n\nexport function requestNextMutation(cb: () => (NoneToVoidFunction | void)) {\n  requestMeasure(() => {\n    requestMutation(cb);\n  });\n}\n\nexport function requestForcedReflow(cb: () => (NoneToVoidFunction | void)) {\n  pendingForceReflowTasks.push(cb);\n  runUpdatePassOnRaf();\n}\n\nfunction throttleWithRafFallback<F extends AnyToVoidFunction>(fn: F) {\n  return throttleWith((throttledFn: NoneToVoidFunction) => {\n    fastRaf(throttledFn, true);\n  }, fn);\n}\n\nexport * from './stricterdom';\n","// https://gist.github.com/paulirish/5d52fb081b3570c81e3a\n\nexport default {\n  Element: {\n    props: [\n      'clientLeft', 'clientTop', 'clientWidth', 'clientHeight',\n      'scrollWidth', 'scrollHeight', 'scrollLeft', 'scrollTop',\n    ] as const,\n    methods: [\n      'getClientRects', 'getBoundingClientRect',\n      'scrollBy', 'scrollTo', 'scrollIntoView', 'scrollIntoViewIfNeeded',\n    ] as const,\n  },\n  HTMLElement: {\n    props: [\n      'offsetLeft', 'offsetTop', 'offsetWidth', 'offsetHeight', 'offsetParent',\n      'innerText',\n    ] as const,\n    methods: ['focus'] as const,\n  },\n  window: {\n    props: [\n      'scrollX', 'scrollY',\n      'innerHeight', 'innerWidth',\n    ] as const,\n    methods: ['getComputedStyle'] as const,\n  },\n  VisualViewport: {\n    props: [\n      'height', 'width', 'offsetTop', 'offsetLeft',\n    ] as const,\n  },\n  Document: {\n    props: ['scrollingElement'] as const,\n    methods: ['elementFromPoint'] as const,\n  },\n  HTMLInputElement: {\n    methods: ['select'] as const,\n  },\n  MouseEvent: {\n    props: ['layerX', 'layerY', 'offsetX', 'offsetY'] as const,\n  },\n  Range: {\n    methods: ['getClientRects', 'getBoundingClientRect'] as const,\n  },\n};\n","import LAYOUT_CAUSES from './layoutCauses';\n\ntype Entities = keyof typeof LAYOUT_CAUSES;\ntype Phase =\n  'measure'\n  | 'mutate';\ntype ErrorHandler = (error: Error) => any;\n\n// eslint-disable-next-line no-console\nconst DEFAULT_ERROR_HANDLER = console.error;\n\nlet onError: ErrorHandler = DEFAULT_ERROR_HANDLER;\n\nconst nativeMethods = new Map<string, AnyFunction>();\n\nlet phase: Phase = 'measure';\nlet isStrict = false;\nlet observer: MutationObserver | undefined;\n\nexport function setPhase(newPhase: Phase) {\n  phase = newPhase;\n}\n\nexport function getPhase() {\n  return phase;\n}\n\nexport function enableStrict() {\n  if (isStrict) return;\n\n  isStrict = true;\n  setupLayoutDetectors();\n  setupMutationObserver();\n}\n\nexport function disableStrict() {\n  if (!isStrict) return;\n\n  clearMutationObserver();\n  clearLayoutDetectors();\n  isStrict = false;\n}\n\nexport function forceMeasure(cb: () => any) {\n  if (phase !== 'mutate') {\n    throw new Error('The current phase is \\'measure\\'');\n  }\n\n  phase = 'measure';\n  const result = cb();\n  phase = 'mutate';\n\n  return result;\n}\n\nexport function setHandler(handler?: ErrorHandler) {\n  onError = handler || DEFAULT_ERROR_HANDLER;\n}\n\nfunction setupLayoutDetectors() {\n  Object.entries(LAYOUT_CAUSES).forEach(([name, causes]) => {\n    const entity = window[name as Entities];\n    if (!entity) return;\n    const prototype = typeof entity === 'object' ? entity : entity.prototype;\n\n    if ('props' in causes) {\n      causes.props.forEach((prop) => {\n        const nativeGetter = Object.getOwnPropertyDescriptor(prototype, prop)?.get;\n        if (!nativeGetter) {\n          return;\n        }\n\n        nativeMethods.set(`${name}#${prop}`, nativeGetter);\n\n        Object.defineProperty(prototype, prop, {\n          get() {\n            onMeasure(prop);\n\n            return nativeGetter.call(this);\n          },\n        });\n      });\n    }\n\n    if ('methods' in causes) {\n      causes.methods.forEach((method) => {\n        const nativeMethod = (prototype as any)[method]!;\n        nativeMethods.set(`${name}#${method}`, nativeMethod);\n\n        // eslint-disable-next-line func-names\n        (prototype as any)[method] = function (...args: any[]) {\n          onMeasure(method);\n\n          return nativeMethod.apply(this, args);\n        };\n      });\n    }\n  });\n}\n\nfunction clearLayoutDetectors() {\n  Object.entries(LAYOUT_CAUSES).forEach(([name, causes]) => {\n    const entity = window[name as Entities];\n    if (!entity) return;\n    const prototype = typeof entity === 'object' ? entity : entity.prototype;\n\n    if ('props' in causes) {\n      causes.props.forEach((prop) => {\n        const nativeGetter = nativeMethods.get(`${name}#${prop}`);\n        if (!nativeGetter) {\n          return;\n        }\n\n        Object.defineProperty(prototype, prop, { get: nativeGetter });\n      });\n    }\n\n    if ('methods' in causes) {\n      causes.methods.forEach((method) => {\n        (prototype as any)[method] = nativeMethods.get(`${name}#${method}`)!;\n      });\n    }\n  });\n\n  nativeMethods.clear();\n}\n\nfunction setupMutationObserver() {\n  observer = new MutationObserver((mutations) => {\n    if (phase !== 'mutate') {\n      mutations.forEach(({ target, type, attributeName }) => {\n        if (!document.contains(target)) {\n          return;\n        }\n\n        if (type === 'childList' && target instanceof HTMLElement && target.contentEditable) {\n          return;\n        }\n\n        if (attributeName?.startsWith('data-')) {\n          return;\n        }\n\n        // eslint-disable-next-line no-console\n        onError(new Error(`Unexpected mutation detected: \\`${type === 'attributes' ? attributeName : type}\\``));\n      });\n    }\n  });\n\n  observer.observe(document.body, {\n    childList: true,\n    attributes: true,\n    subtree: true,\n    characterData: false,\n  });\n}\n\nfunction clearMutationObserver() {\n  observer?.disconnect();\n  observer = undefined;\n}\n\nfunction onMeasure(propName: string) {\n  if (phase !== 'measure') {\n    onError(new Error(`Unexpected measurement detected: \\`${propName}\\``));\n  }\n}\n","import { DEBUG } from '../config';\n\ntype Handler = (e: Event) => void;\ntype DelegationRegistry = Map<HTMLElement, Handler>;\n\nconst NON_BUBBLEABLE_EVENTS = new Set(['scroll', 'mouseenter', 'mouseleave', 'load']);\n\nconst documentEventCounters: Record<string, number> = {};\nconst delegationRegistryByEventType: Record<string, DelegationRegistry> = {};\nconst delegatedEventTypesByElement = new Map<HTMLElement, Set<string>>();\n\nexport function addEventListener(element: HTMLElement, propName: string, handler: Handler, asCapture = false) {\n  const eventType = resolveEventType(propName, element);\n  if (canUseEventDelegation(eventType, element, asCapture)) {\n    addDelegatedListener(eventType, element, handler);\n  } else {\n    element.addEventListener(eventType, handler, asCapture);\n  }\n}\n\nexport function removeEventListener(element: HTMLElement, propName: string, handler: Handler, asCapture = false) {\n  const eventType = resolveEventType(propName, element);\n  if (canUseEventDelegation(eventType, element, asCapture)) {\n    removeDelegatedListener(eventType, element);\n  } else {\n    element.removeEventListener(eventType, handler, asCapture);\n  }\n}\n\nfunction resolveEventType(propName: string, element: HTMLElement) {\n  const eventType = propName\n    .replace(/^on/, '')\n    .replace(/Capture$/, '').toLowerCase();\n\n  if (eventType === 'change' && element.tagName !== 'SELECT') {\n    // React behavior repeated here.\n    // https://stackoverflow.com/questions/38256332/in-react-whats-the-difference-between-onchange-and-oninput\n    return 'input';\n  }\n\n  if (eventType === 'doubleclick') {\n    return 'dblclick';\n  }\n\n  // Replace focus/blur by their \"bubbleable\" versions\n  if (eventType === 'focus') {\n    return 'focusin';\n  }\n\n  if (eventType === 'blur') {\n    return 'focusout';\n  }\n\n  return eventType;\n}\n\nfunction canUseEventDelegation(realEventType: string, element: HTMLElement, asCapture: boolean) {\n  return (\n    !asCapture\n    && !NON_BUBBLEABLE_EVENTS.has(realEventType)\n    && element.tagName !== 'VIDEO'\n    && element.tagName !== 'IFRAME'\n  );\n}\n\nfunction addDelegatedListener(eventType: string, element: HTMLElement, handler: Handler) {\n  if (!documentEventCounters[eventType]) {\n    documentEventCounters[eventType] = 0;\n    document.addEventListener(eventType, handleEvent);\n  }\n\n  resolveDelegationRegistry(eventType).set(element, handler);\n  resolveDelegatedEventTypes(element).add(eventType);\n  documentEventCounters[eventType]++;\n}\n\nfunction removeDelegatedListener(eventType: string, element: HTMLElement) {\n  documentEventCounters[eventType]--;\n  if (!documentEventCounters[eventType]) {\n    // Synchronous deletion on 0 will cause perf degradation in the case of 1 element\n    // which is not a real case, so it's ok to do it this way\n    document.removeEventListener(eventType, handleEvent);\n  }\n\n  delegationRegistryByEventType[eventType].delete(element);\n  delegatedEventTypesByElement.get(element)?.delete(eventType);\n}\n\nexport function removeAllDelegatedListeners(element: HTMLElement) {\n  const eventTypes = delegatedEventTypesByElement.get(element);\n  if (!eventTypes) {\n    return;\n  }\n\n  delegatedEventTypesByElement.delete(element);\n  eventTypes.forEach((eventType) => removeDelegatedListener(eventType, element));\n}\n\nfunction handleEvent(realEvent: Event) {\n  const events = delegationRegistryByEventType[realEvent.type];\n\n  if (events) {\n    let furtherCallsPrevented = false;\n    let current: HTMLElement = realEvent.target as HTMLElement;\n\n    const stopPropagation = () => {\n      furtherCallsPrevented = true;\n    };\n\n    const preventDefault = () => {\n      realEvent.preventDefault();\n    };\n\n    // Proxy is a simplest way to provide an access to the event property\n    const event = new Proxy(realEvent, {\n      get(target, p) {\n        if (p === 'currentTarget') {\n          return current;\n        }\n        if (p === 'stopPropagation' || p === 'stopImmediatePropagation') {\n          return stopPropagation;\n        }\n        if (p === 'preventDefault') {\n          // \"this\" is changed to proxy and one can't call methods via it\n          return preventDefault;\n        }\n        return Reflect.get(target, p);\n      },\n    });\n\n    // This can also be limited by teact root\n    while (current && current !== document.body) {\n      const handler = events.get(current);\n      if (handler) {\n        handler(event);\n        if (furtherCallsPrevented) {\n          return;\n        }\n      }\n\n      current = current.parentNode as HTMLElement;\n    }\n  }\n}\n\nfunction resolveDelegationRegistry(eventType: string) {\n  if (!delegationRegistryByEventType[eventType]) {\n    delegationRegistryByEventType[eventType] = new Map();\n  }\n\n  return delegationRegistryByEventType[eventType];\n}\n\nfunction resolveDelegatedEventTypes(element: HTMLElement) {\n  const existing = delegatedEventTypesByElement.get(element);\n  if (existing) {\n    return existing;\n  }\n\n  const newSet = new Set<string>();\n  delegatedEventTypesByElement.set(element, newSet);\n\n  return newSet;\n}\n\nif (DEBUG) {\n  document.addEventListener('dblclick', () => {\n    const documentListenersCount = Object.keys(documentEventCounters).length;\n    const delegatedHandlersCount1 = Object.values(documentEventCounters)\n      .reduce((acc, counter) => acc + counter, 0);\n    const delegationRegistriesCount = Object.keys(delegationRegistryByEventType).length;\n    const delegatedHandlersCount2 = Object.values(delegationRegistryByEventType)\n      .reduce((acc, delegationRegistry) => acc + delegationRegistry.size, 0);\n    const delegationElementsCount = delegatedEventTypesByElement.size;\n    const delegatedEventTypesCount = Array.from(delegatedEventTypesByElement.values())\n      .reduce((acc, eventTypes) => acc + eventTypes.size, 0);\n\n    // eslint-disable-next-line no-console\n    console.warn('DELEGATED EVENTS STATS', {\n      delegatedHandlersCount1,\n      delegatedHandlersCount2,\n      delegatedEventTypesCount,\n      delegationRegistriesCount,\n      delegationElementsCount,\n      documentListenersCount,\n    });\n  });\n}\n","import type { ChangeEvent } from 'react';\nimport type {\n  VirtualElement,\n  VirtualElementChildren,\n  VirtualElementComponent,\n  VirtualElementFragment,\n  VirtualElementParent,\n  VirtualElementReal,\n  VirtualElementTag,\n} from './teact';\nimport {\n  captureImmediateEffects,\n  hasElementChanged,\n  isParentElement,\n  mountComponent,\n  MountState,\n  renderComponent,\n  unmountComponent,\n  VirtualType,\n} from './teact';\nimport { DEBUG } from '../config';\nimport { addEventListener, removeAllDelegatedListeners, removeEventListener } from './dom-events';\nimport { unique } from '../util/iteratees';\n\ninterface VirtualDomHead {\n  children: [VirtualElement] | [];\n}\n\ninterface SelectionState {\n  selectionStart: number | null;\n  selectionEnd: number | null;\n  isCaretAtEnd: boolean;\n}\n\nconst FILTERED_ATTRIBUTES = new Set(['key', 'ref', 'teactFastList', 'teactOrderKey']);\nconst HTML_ATTRIBUTES = new Set(['dir', 'role', 'form']);\nconst CONTROLLABLE_TAGS = ['INPUT', 'TEXTAREA', 'SELECT'];\nconst MAPPED_ATTRIBUTES: { [k: string]: string } = {\n  autoPlay: 'autoplay',\n  autoComplete: 'autocomplete',\n};\nconst INDEX_KEY_PREFIX = '__indexKey#';\n\nconst headsByElement = new WeakMap<Element, VirtualDomHead>();\nconst extraClasses = new WeakMap<Element, Set<string>>();\nconst extraStyles = new WeakMap<Element, Record<string, string>>();\n\nfunction render($element: VirtualElement | undefined, parentEl: HTMLElement) {\n  if (!headsByElement.has(parentEl)) {\n    headsByElement.set(parentEl, { children: [] });\n  }\n\n  const runImmediateEffects = captureImmediateEffects();\n  const $head = headsByElement.get(parentEl)!;\n  const $renderedChild = renderWithVirtual(parentEl, $head.children[0], $element, $head, 0);\n  runImmediateEffects?.();\n\n  $head.children = $renderedChild ? [$renderedChild] : [];\n\n  return undefined;\n}\n\nfunction renderWithVirtual<T extends VirtualElement | undefined>(\n  parentEl: HTMLElement,\n  $current: VirtualElement | undefined,\n  $new: T,\n  $parent: VirtualElementParent | VirtualDomHead,\n  index: number,\n  options: {\n    skipComponentUpdate?: boolean;\n    nextSibling?: ChildNode;\n    forceMoveToEnd?: boolean;\n    fragment?: DocumentFragment;\n  } = {},\n): T {\n  const { skipComponentUpdate, fragment } = options;\n  let { nextSibling } = options;\n\n  const isCurrentComponent = $current && $current.type === VirtualType.Component;\n  const isNewComponent = $new && $new.type === VirtualType.Component;\n  const $newAsReal = $new as VirtualElementReal;\n\n  const isCurrentFragment = $current && !isCurrentComponent && $current.type === VirtualType.Fragment;\n  const isNewFragment = $new && !isNewComponent && $new.type === VirtualType.Fragment;\n\n  if (\n    !skipComponentUpdate\n    && isCurrentComponent && isNewComponent\n    && !hasElementChanged($current!, $new!)\n  ) {\n    $new = updateComponent($current, $new as VirtualElementComponent) as typeof $new;\n  }\n\n  // Parent element may have changed, so we need to update the listener closure.\n  if (\n    !skipComponentUpdate\n    && isNewComponent\n    && ($new as VirtualElementComponent).componentInstance.mountState === MountState.Mounted\n  ) {\n    setupComponentUpdateListener(parentEl, $new as VirtualElementComponent, $parent, index);\n  }\n\n  if ($current === $new) {\n    return $new;\n  }\n\n  if (DEBUG && $new) {\n    const newTarget = 'target' in $new && $new.target;\n    if (newTarget && (!$current || ('target' in $current && newTarget !== $current.target))) {\n      throw new Error('[Teact] Cached virtual element was moved within tree');\n    }\n  }\n\n  if (!$current && $new) {\n    if (isNewComponent || isNewFragment) {\n      if (isNewComponent) {\n        $new = initComponent(parentEl, $new as VirtualElementComponent, $parent, index) as unknown as typeof $new;\n      }\n\n      mountChildren(parentEl, $new as VirtualElementComponent | VirtualElementFragment, { nextSibling, fragment });\n    } else {\n      const canSetTextContent = !fragment\n        && !nextSibling\n        && $newAsReal.type === VirtualType.Text\n        && $parent.children.length === 1\n        && !parentEl.firstChild;\n\n      if (canSetTextContent) {\n        parentEl.textContent = $newAsReal.value;\n        $newAsReal.target = parentEl.firstChild!;\n      } else {\n        const node = createNode($newAsReal);\n        $newAsReal.target = node;\n        insertBefore(fragment || parentEl, node, nextSibling);\n\n        if ($newAsReal.type === VirtualType.Tag) {\n          setElementRef($newAsReal, node as HTMLElement);\n        }\n      }\n    }\n  } else if ($current && !$new) {\n    remount(parentEl, $current, undefined);\n  } else if ($current && $new) {\n    if (hasElementChanged($current, $new)) {\n      if (!nextSibling) {\n        nextSibling = getNextSibling($current);\n      }\n\n      if (isNewComponent || isNewFragment) {\n        if (isNewComponent) {\n          $new = initComponent(parentEl, $new as VirtualElementComponent, $parent, index) as unknown as typeof $new;\n        }\n\n        remount(parentEl, $current, undefined);\n        mountChildren(parentEl, $new as VirtualElementComponent | VirtualElementFragment, { nextSibling, fragment });\n      } else {\n        const node = createNode($newAsReal);\n        $newAsReal.target = node;\n        remount(parentEl, $current, node, nextSibling);\n\n        if ($newAsReal.type === VirtualType.Tag) {\n          setElementRef($newAsReal, node as HTMLElement);\n        }\n      }\n    } else {\n      const isComponent = isCurrentComponent && isNewComponent;\n      const isFragment = isCurrentFragment && isNewFragment;\n\n      if (isComponent || isFragment) {\n        renderChildren(\n          $current,\n          $new as VirtualElementComponent | VirtualElementFragment,\n          parentEl,\n          nextSibling,\n          options.forceMoveToEnd,\n        );\n      } else {\n        const $currentAsReal = $current as VirtualElementReal;\n        const currentTarget = $currentAsReal.target!;\n\n        $newAsReal.target = currentTarget;\n        $currentAsReal.target = undefined; // Help GC\n\n        const isTag = $current.type === VirtualType.Tag;\n        if (isTag) {\n          const $newAsTag = $new as VirtualElementTag;\n\n          setElementRef($current, undefined);\n          setElementRef($newAsTag, currentTarget as HTMLElement);\n\n          if (nextSibling || options.forceMoveToEnd) {\n            insertBefore(parentEl, currentTarget, nextSibling);\n          }\n\n          updateAttributes($current, $newAsTag, currentTarget as HTMLElement);\n          renderChildren($current, $newAsTag, currentTarget as HTMLElement);\n        }\n      }\n    }\n  }\n\n  return $new;\n}\n\nfunction initComponent(\n  parentEl: HTMLElement,\n  $element: VirtualElementComponent,\n  $parent: VirtualElementParent | VirtualDomHead,\n  index: number,\n) {\n  const { componentInstance } = $element;\n\n  if (componentInstance.mountState === MountState.New) {\n    $element = mountComponent(componentInstance);\n    setupComponentUpdateListener(parentEl, $element, $parent, index);\n  }\n\n  return $element;\n}\n\nfunction updateComponent($current: VirtualElementComponent, $new: VirtualElementComponent) {\n  $current.componentInstance.props = $new.componentInstance.props;\n\n  return renderComponent($current.componentInstance);\n}\n\nfunction setupComponentUpdateListener(\n  parentEl: HTMLElement,\n  $element: VirtualElementComponent,\n  $parent: VirtualElementParent | VirtualDomHead,\n  index: number,\n) {\n  const { componentInstance } = $element;\n\n  componentInstance.onUpdate = () => {\n    $parent.children[index] = renderWithVirtual(\n      parentEl,\n      $parent.children[index],\n      componentInstance.$element,\n      $parent,\n      index,\n      { skipComponentUpdate: true },\n    );\n  };\n}\n\nfunction mountChildren(\n  parentEl: HTMLElement,\n  $element: VirtualElementComponent | VirtualElementFragment,\n  options: {\n    nextSibling?: ChildNode;\n    fragment?: DocumentFragment;\n  },\n) {\n  const { children } = $element;\n  for (let i = 0, l = children.length; i < l; i++) {\n    const $child = children[i];\n    const $renderedChild = renderWithVirtual(parentEl, undefined, $child, $element, i, options);\n    if ($renderedChild !== $child) {\n      children[i] = $renderedChild;\n    }\n  }\n}\n\nfunction unmountChildren(parentEl: HTMLElement, $element: VirtualElementComponent | VirtualElementFragment) {\n  for (const $child of $element.children) {\n    renderWithVirtual(parentEl, $child, undefined, $element, -1);\n  }\n}\n\nfunction createNode($element: VirtualElementReal): Node {\n  if ($element.type === VirtualType.Empty) {\n    return document.createTextNode('');\n  }\n\n  if ($element.type === VirtualType.Text) {\n    return document.createTextNode($element.value);\n  }\n\n  const { tag, props, children } = $element;\n  const element = document.createElement(tag);\n\n  processControlled(tag, props);\n\n  // eslint-disable-next-line no-restricted-syntax\n  for (const key in props) {\n    if (!props.hasOwnProperty(key)) continue;\n\n    if (props[key] !== undefined) {\n      setAttribute(element, key, props[key]);\n    }\n  }\n\n  processUncontrolledOnMount(element, props);\n\n  for (let i = 0, l = children.length; i < l; i++) {\n    const $child = children[i];\n    const $renderedChild = renderWithVirtual(element, undefined, $child, $element, i);\n    if ($renderedChild !== $child) {\n      children[i] = $renderedChild;\n    }\n  }\n\n  return element;\n}\n\nfunction remount(\n  parentEl: HTMLElement,\n  $current: VirtualElement,\n  node: Node | undefined,\n  componentNextSibling?: ChildNode,\n) {\n  const isComponent = $current.type === VirtualType.Component;\n  const isFragment = !isComponent && $current.type === VirtualType.Fragment;\n\n  if (isComponent || isFragment) {\n    if (isComponent) {\n      unmountComponent($current.componentInstance);\n    }\n\n    unmountChildren(parentEl, $current);\n\n    if (node) {\n      insertBefore(parentEl, node, componentNextSibling);\n    }\n  } else {\n    if (node) {\n      parentEl.replaceChild(node, $current.target!);\n    } else {\n      parentEl.removeChild($current.target!);\n    }\n\n    unmountRealTree($current);\n  }\n}\n\nfunction unmountRealTree($element: VirtualElement) {\n  if ($element.type === VirtualType.Component) {\n    unmountComponent($element.componentInstance);\n  } else if ($element.type !== VirtualType.Fragment) {\n    if ($element.type === VirtualType.Tag) {\n      extraClasses.delete($element.target!);\n      setElementRef($element, undefined);\n      removeAllDelegatedListeners($element.target!);\n    }\n\n    $element.target = undefined; // Help GC\n\n    if ($element.type !== VirtualType.Tag) {\n      return;\n    }\n  }\n\n  for (const $child of $element.children) {\n    unmountRealTree($child);\n  }\n}\n\nfunction insertBefore(parentEl: HTMLElement | DocumentFragment, node: Node, nextSibling?: ChildNode) {\n  if (nextSibling) {\n    parentEl.insertBefore(node, nextSibling);\n  } else {\n    parentEl.appendChild(node);\n  }\n}\n\nfunction getNextSibling($current: VirtualElement): ChildNode | undefined {\n  if ($current.type === VirtualType.Component || $current.type === VirtualType.Fragment) {\n    const lastChild = $current.children[$current.children.length - 1];\n    return getNextSibling(lastChild);\n  }\n\n  return $current.target!.nextSibling || undefined;\n}\n\nfunction renderChildren(\n  $current: VirtualElementParent,\n  $new: VirtualElementParent,\n  currentEl: HTMLElement,\n  nextSibling?: ChildNode,\n  forceMoveToEnd = false,\n) {\n  if (DEBUG) {\n    DEBUG_checkKeyUniqueness($new.children);\n  }\n\n  if (('props' in $new) && $new.props.teactFastList) {\n    renderFastListChildren($current, $new, currentEl);\n    return;\n  }\n\n  const currentChildren = $current.children;\n  const newChildren = $new.children;\n\n  const currentChildrenLength = currentChildren.length;\n  const newChildrenLength = newChildren.length;\n  const maxLength = Math.max(currentChildrenLength, newChildrenLength);\n\n  const fragment = newChildrenLength > currentChildrenLength ? document.createDocumentFragment() : undefined;\n  const lastCurrentChild = $current.children[currentChildrenLength - 1];\n  const fragmentNextSibling = fragment && (\n    nextSibling || (lastCurrentChild ? getNextSibling(lastCurrentChild) : undefined)\n  );\n\n  for (let i = 0; i < maxLength; i++) {\n    const $renderedChild = renderWithVirtual(\n      currentEl,\n      currentChildren[i],\n      newChildren[i],\n      $new,\n      i,\n      i >= currentChildrenLength ? { fragment } : { nextSibling, forceMoveToEnd },\n    );\n\n    if ($renderedChild && $renderedChild !== newChildren[i]) {\n      newChildren[i] = $renderedChild;\n    }\n  }\n\n  if (fragment) {\n    insertBefore(currentEl, fragment, fragmentNextSibling);\n  }\n}\n\n// This function allows to prepend/append a bunch of new DOM nodes to the top/bottom of preserved ones.\n// It also allows to selectively move particular preserved nodes within their DOM list.\nfunction renderFastListChildren($current: VirtualElementParent, $new: VirtualElementParent, currentEl: HTMLElement) {\n  const currentChildren = $current.children;\n  const newChildren = $new.children;\n\n  const newKeys = new Set();\n  for (const $newChild of newChildren) {\n    const key = 'props' in $newChild ? $newChild.props.key : undefined;\n\n    if (DEBUG && isParentElement($newChild)) {\n      // eslint-disable-next-line no-null/no-null\n      if (key === undefined || key === null) {\n        // eslint-disable-next-line no-console\n        console.warn('Missing `key` in `teactFastList`');\n      }\n\n      if ($newChild.type === VirtualType.Fragment) {\n        throw new Error('[Teact] Fragment can not be child of container with `teactFastList`');\n      }\n    }\n\n    newKeys.add(key);\n  }\n\n  // Build a collection of old children that also remain in the new list\n  let currentRemainingIndex = 0;\n  const remainingByKey: Record<string, { $element: VirtualElement; index: number; orderKey?: number }> = {};\n  for (let i = 0, l = currentChildren.length; i < l; i++) {\n    const $currentChild = currentChildren[i];\n\n    let key = 'props' in $currentChild ? $currentChild.props.key : undefined;\n    // eslint-disable-next-line no-null/no-null\n    const isKeyPresent = key !== undefined && key !== null;\n\n    // First we process removed children\n    if (isKeyPresent && !newKeys.has(key)) {\n      renderWithVirtual(currentEl, $currentChild, undefined, $new, -1);\n\n      continue;\n    } else if (!isKeyPresent) {\n      const $newChild = newChildren[i];\n      const newChildKey = ($newChild && 'props' in $newChild) ? $newChild.props.key : undefined;\n      // If a non-key element remains at the same index we preserve it with a virtual `key`\n      if ($newChild && !newChildKey) {\n        key = `${INDEX_KEY_PREFIX}${i}`;\n        // Otherwise, we just remove it\n      } else {\n        renderWithVirtual(currentEl, $currentChild, undefined, $new, -1);\n\n        continue;\n      }\n    }\n\n    // Then we build up info about remaining children\n    remainingByKey[key] = {\n      $element: $currentChild,\n      index: currentRemainingIndex++,\n      orderKey: 'props' in $currentChild ? $currentChild.props.teactOrderKey : undefined,\n    };\n  }\n\n  let fragmentIndex: number | undefined;\n  let fragmentSize: number | undefined;\n\n  let currentPreservedIndex = 0;\n\n  for (let i = 0, l = newChildren.length; i < l; i++) {\n    const $newChild = newChildren[i];\n    const key = 'props' in $newChild ? $newChild.props.key : `${INDEX_KEY_PREFIX}${i}`;\n    const currentChildInfo = remainingByKey[key];\n\n    if (!currentChildInfo) {\n      if (fragmentSize === undefined) {\n        fragmentIndex = i;\n        fragmentSize = 0;\n      }\n\n      fragmentSize++;\n      continue;\n    }\n\n    // This prepends new children to the top\n    if (fragmentSize) {\n      renderFragment(fragmentIndex!, fragmentSize, currentEl, $new);\n      fragmentSize = undefined;\n      fragmentIndex = undefined;\n    }\n\n    // Now we check if a preserved node was moved within preserved list\n    const newOrderKey = 'props' in $newChild ? $newChild.props.teactOrderKey : undefined;\n    // That is indicated by a changed `teactOrderKey` value\n    const shouldMoveNode = (\n      currentChildInfo.index !== currentPreservedIndex && (!newOrderKey || currentChildInfo.orderKey !== newOrderKey)\n    );\n    const isMovingDown = shouldMoveNode && currentPreservedIndex > currentChildInfo.index;\n\n    if (!shouldMoveNode || isMovingDown) {\n      currentPreservedIndex++;\n    }\n\n    const nextSibling = currentEl.childNodes[isMovingDown ? i + 1 : i];\n    const options = shouldMoveNode ? (nextSibling ? { nextSibling } : { forceMoveToEnd: true }) : undefined;\n\n    const $renderedChild = renderWithVirtual(currentEl, currentChildInfo.$element, $newChild, $new, i, options);\n    if ($renderedChild !== $newChild) {\n      newChildren[i] = $renderedChild;\n    }\n  }\n\n  // This appends new children to the bottom\n  if (fragmentSize) {\n    renderFragment(fragmentIndex!, fragmentSize, currentEl, $new);\n  }\n}\n\nfunction renderFragment(\n  fragmentIndex: number, fragmentSize: number, parentEl: HTMLElement, $parent: VirtualElementParent,\n) {\n  const nextSibling = parentEl.childNodes[fragmentIndex];\n\n  if (fragmentSize === 1) {\n    const $child = $parent.children[fragmentIndex];\n    const $renderedChild = renderWithVirtual(parentEl, undefined, $child, $parent, fragmentIndex, { nextSibling });\n    if ($renderedChild !== $child) {\n      $parent.children[fragmentIndex] = $renderedChild;\n    }\n\n    return;\n  }\n\n  const fragment = document.createDocumentFragment();\n\n  for (let i = fragmentIndex; i < fragmentIndex + fragmentSize; i++) {\n    const $child = $parent.children[i];\n    const $renderedChild = renderWithVirtual(parentEl, undefined, $child, $parent, i, { fragment });\n    if ($renderedChild !== $child) {\n      $parent.children[i] = $renderedChild;\n    }\n  }\n\n  insertBefore(parentEl, fragment, nextSibling);\n}\n\nfunction setElementRef($element: VirtualElementTag, htmlElement: HTMLElement | undefined) {\n  const { ref } = $element.props;\n\n  if (typeof ref === 'object') {\n    ref.current = htmlElement;\n  } else if (typeof ref === 'function') {\n    ref(htmlElement);\n  }\n}\n\nfunction processControlled(tag: string, props: AnyLiteral) {\n  const isValueControlled = props.value !== undefined;\n  const isCheckedControlled = props.checked !== undefined;\n  const isControlled = (isValueControlled || isCheckedControlled) && CONTROLLABLE_TAGS.includes(tag.toUpperCase());\n  if (!isControlled) {\n    return;\n  }\n\n  const {\n    value, checked, onInput, onChange,\n  } = props;\n\n  props.onChange = undefined;\n  props.onInput = (e: ChangeEvent<HTMLInputElement>) => {\n    onInput?.(e);\n    onChange?.(e);\n\n    if (value !== undefined && value !== e.currentTarget.value) {\n      const { selectionStart, selectionEnd } = e.currentTarget;\n      const isCaretAtEnd = selectionStart === selectionEnd && selectionEnd === e.currentTarget.value.length;\n\n      e.currentTarget.value = value;\n\n      if (typeof selectionStart === 'number' && typeof selectionEnd === 'number') {\n        e.currentTarget.setSelectionRange(selectionStart, selectionEnd);\n\n        const selectionState: SelectionState = { selectionStart, selectionEnd, isCaretAtEnd };\n        // eslint-disable-next-line no-underscore-dangle\n        e.currentTarget.dataset.__teactSelectionState = JSON.stringify(selectionState);\n      }\n    }\n\n    if (checked !== undefined) {\n      e.currentTarget.checked = checked;\n    }\n  };\n}\n\nfunction processUncontrolledOnMount(element: HTMLElement, props: AnyLiteral) {\n  if (!CONTROLLABLE_TAGS.includes(element.tagName)) {\n    return;\n  }\n\n  if (props.defaultValue) {\n    setAttribute(element, 'value', props.defaultValue);\n  }\n\n  if (props.defaultChecked) {\n    setAttribute(element, 'checked', props.defaultChecked);\n  }\n}\n\nfunction updateAttributes($current: VirtualElementTag, $new: VirtualElementTag, element: HTMLElement) {\n  processControlled(element.tagName, $new.props);\n\n  const currentEntries = Object.entries($current.props);\n  const newEntries = Object.entries($new.props);\n\n  for (const [key, currentValue] of currentEntries) {\n    const newValue = $new.props[key];\n\n    if (\n      currentValue !== undefined\n      && (\n        newValue === undefined\n        || (currentValue !== newValue && key.startsWith('on'))\n      )\n    ) {\n      removeAttribute(element, key, currentValue);\n    }\n  }\n\n  for (const [key, newValue] of newEntries) {\n    const currentValue = $current.props[key];\n\n    if (newValue !== undefined && newValue !== currentValue) {\n      setAttribute(element, key, newValue);\n    }\n  }\n}\n\nfunction setAttribute(element: HTMLElement, key: string, value: any) {\n  if (key === 'className') {\n    updateClassName(element, value);\n  } else if (key === 'value') {\n    const inputEl = element as HTMLInputElement;\n\n    if (inputEl.value !== value) {\n      inputEl.value = value;\n\n      // eslint-disable-next-line no-underscore-dangle\n      const selectionStateJson = inputEl.dataset.__teactSelectionState;\n      if (selectionStateJson) {\n        const { selectionStart, selectionEnd, isCaretAtEnd } = JSON.parse(selectionStateJson) as SelectionState;\n\n        if (isCaretAtEnd) {\n          const length = inputEl.value.length;\n          inputEl.setSelectionRange(length, length);\n        } else if (typeof selectionStart === 'number' && typeof selectionEnd === 'number') {\n          inputEl.setSelectionRange(selectionStart, selectionEnd);\n        }\n      }\n    }\n  } else if (key === 'style') {\n    updateStyle(element, value);\n  } else if (key === 'dangerouslySetInnerHTML') {\n    // eslint-disable-next-line no-underscore-dangle\n    element.innerHTML = value.__html;\n  } else if (key.startsWith('on')) {\n    addEventListener(element, key, value, key.endsWith('Capture'));\n  } else if (key.startsWith('data-') || key.startsWith('aria-') || HTML_ATTRIBUTES.has(key)) {\n    element.setAttribute(key, value);\n  } else if (!FILTERED_ATTRIBUTES.has(key)) {\n    (element as any)[MAPPED_ATTRIBUTES[key] || key] = value;\n  }\n}\n\nfunction removeAttribute(element: HTMLElement, key: string, value: any) {\n  if (key === 'className') {\n    updateClassName(element, '');\n  } else if (key === 'value') {\n    (element as HTMLInputElement).value = '';\n  } else if (key === 'style') {\n    updateStyle(element, '');\n  } else if (key === 'dangerouslySetInnerHTML') {\n    element.innerHTML = '';\n  } else if (key.startsWith('on')) {\n    removeEventListener(element, key, value, key.endsWith('Capture'));\n  } else if (!FILTERED_ATTRIBUTES.has(key)) {\n    element.removeAttribute(key);\n  }\n}\n\nfunction updateClassName(element: HTMLElement, value: string) {\n  const extra = extraClasses.get(element);\n  if (!extra) {\n    element.className = value;\n    return;\n  }\n\n  const extraArray = Array.from(extra);\n  if (value) {\n    extraArray.push(value);\n  }\n\n  element.className = extraArray.join(' ');\n}\n\nfunction updateStyle(element: HTMLElement, value: string) {\n  element.style.cssText = value;\n\n  const extraObject = extraStyles.get(element);\n  if (extraObject) {\n    applyExtraStyles(element);\n  }\n}\n\nexport function addExtraClass(element: Element, className: string, forceSingle = false) {\n  if (!forceSingle) {\n    const classNames = className.split(' ');\n    if (classNames.length > 1) {\n      for (const cn of classNames) {\n        addExtraClass(element, cn, true);\n      }\n\n      return;\n    }\n  }\n\n  element.classList.add(className);\n\n  const classList = extraClasses.get(element);\n  if (classList) {\n    classList.add(className);\n  } else {\n    extraClasses.set(element, new Set([className]));\n  }\n}\n\nexport function removeExtraClass(element: Element, className: string, forceSingle = false) {\n  if (!forceSingle) {\n    const classNames = className.split(' ');\n    if (classNames.length > 1) {\n      for (const cn of classNames) {\n        removeExtraClass(element, cn, true);\n      }\n\n      return;\n    }\n  }\n\n  element.classList.remove(className);\n\n  const classList = extraClasses.get(element);\n  if (classList) {\n    classList.delete(className);\n\n    if (!classList.size) {\n      extraClasses.delete(element);\n    }\n  }\n}\n\nexport function toggleExtraClass(element: Element, className: string, force?: boolean, forceSingle = false) {\n  if (!forceSingle) {\n    const classNames = className.split(' ');\n    if (classNames.length > 1) {\n      for (const cn of classNames) {\n        toggleExtraClass(element, cn, force, true);\n      }\n\n      return;\n    }\n  }\n\n  element.classList.toggle(className, force);\n\n  if (element.classList.contains(className)) {\n    addExtraClass(element, className);\n  } else {\n    removeExtraClass(element, className);\n  }\n}\n\nexport function setExtraStyles(element: HTMLElement, styles: Partial<CSSStyleDeclaration> & AnyLiteral) {\n  extraStyles.set(element, styles);\n  applyExtraStyles(element);\n}\n\nfunction applyExtraStyles(element: HTMLElement) {\n  const standardStyles = Object.entries(extraStyles.get(element)!).reduce<Record<string, string>>(\n    (acc, [prop, value]) => {\n      if (prop.startsWith('--')) {\n        element.style.setProperty(prop, value);\n      } else {\n        acc[prop] = value;\n      }\n\n      return acc;\n    },\n    {},\n  );\n\n  Object.assign(element.style, standardStyles);\n}\n\n// eslint-disable-next-line @typescript-eslint/naming-convention\nfunction DEBUG_checkKeyUniqueness(children: VirtualElementChildren) {\n  const firstChild = children[0];\n  if (firstChild && 'props' in firstChild && firstChild.props.key !== undefined) {\n    const keys = children.reduce((acc: any[], child) => {\n      if ('props' in child && child.props.key) {\n        acc.push(child.props.key);\n      }\n\n      return acc;\n    }, []);\n\n    if (keys.length !== unique(keys).length) {\n      // eslint-disable-next-line no-console\n      console.warn('[Teact] Duplicated keys:', keys.filter((e, i, a) => a.indexOf(e) !== i));\n      throw new Error('[Teact] Children keys are not unique');\n    }\n  }\n}\n\nconst TeactDOM = { render };\nexport default TeactDOM;\n","import type { ReactElement } from 'react';\n\nimport { DEBUG, DEBUG_MORE } from '../config';\nimport { logUnequalProps } from '../util/arePropsShallowEqual';\nimport { incrementOverlayCounter } from '../util/debugOverlay';\nimport { orderBy } from '../util/iteratees';\nimport safeExec from '../util/safeExec';\nimport { throttleWith } from '../util/schedulers';\nimport { isSignal } from '../util/signals';\nimport { requestMeasure, requestMutation } from '../lib/fasterdom/fasterdom';\n\nexport type Props = AnyLiteral;\nexport type FC<P extends Props = any> = (props: P) => any;\n// eslint-disable-next-line @typescript-eslint/naming-convention\nexport type FC_withDebug =\n  FC\n  & { DEBUG_contentComponentName?: string };\n\nexport enum VirtualType {\n  Empty,\n  Text,\n  Tag,\n  Component,\n  Fragment,\n}\n\ninterface VirtualElementEmpty {\n  type: VirtualType.Empty;\n  target?: Node;\n}\n\ninterface VirtualElementText {\n  type: VirtualType.Text;\n  target?: Node;\n  value: string;\n}\n\nexport interface VirtualElementTag {\n  type: VirtualType.Tag;\n  target?: HTMLElement;\n  tag: string;\n  props: Props;\n  children: VirtualElementChildren;\n}\n\nexport interface VirtualElementComponent {\n  type: VirtualType.Component;\n  componentInstance: ComponentInstance;\n  props: Props;\n  children: VirtualElementChildren;\n}\n\nexport interface VirtualElementFragment {\n  type: VirtualType.Fragment;\n  children: VirtualElementChildren;\n}\n\nexport type StateHookSetter<T> = (newValue: ((current: T) => T) | T) => void;\n\nexport enum MountState {\n  New,\n  Mounted,\n  Unmounted,\n}\n\ninterface ComponentInstance {\n  id: number;\n  $element: VirtualElementComponent;\n  Component: FC;\n  name: string;\n  props: Props;\n  renderedValue?: any;\n  mountState: MountState;\n  hooks?: {\n    state?: {\n      cursor: number;\n      byCursor: {\n        value: any;\n        nextValue: any;\n        setter: StateHookSetter<any>;\n      }[];\n    };\n    effects?: {\n      cursor: number;\n      byCursor: {\n        dependencies?: readonly any[];\n        schedule: NoneToVoidFunction;\n        cleanup?: NoneToVoidFunction;\n        releaseSignals?: NoneToVoidFunction;\n      }[];\n    };\n    memos?: {\n      cursor: number;\n      byCursor: {\n        value: any;\n        dependencies: any[];\n      }[];\n    };\n    refs?: {\n      cursor: number;\n      byCursor: {\n        current: any;\n      }[];\n    };\n  };\n  prepareForFrame?: () => void;\n  forceUpdate?: () => void;\n  onUpdate?: () => void;\n}\n\nexport type VirtualElement =\n  VirtualElementEmpty\n  | VirtualElementText\n  | VirtualElementTag\n  | VirtualElementComponent\n  | VirtualElementFragment;\nexport type VirtualElementParent =\n  VirtualElementTag\n  | VirtualElementComponent\n  | VirtualElementFragment;\nexport type VirtualElementChildren = VirtualElement[];\nexport type VirtualElementReal = Exclude<VirtualElement, VirtualElementComponent | VirtualElementFragment>;\n\n// Compatibility with JSX types\nexport type TeactNode =\n  ReactElement\n  | string\n  | number\n  | boolean\n  | TeactNode[];\n\ntype Effect = () => (NoneToVoidFunction | void);\ntype EffectCleanup = NoneToVoidFunction;\n\nconst Fragment = Symbol('Fragment');\n\nconst DEBUG_RENDER_THRESHOLD = 7;\nconst DEBUG_EFFECT_THRESHOLD = 7;\nconst DEBUG_SILENT_RENDERS_FOR = new Set(['TeactMemoWrapper', 'TeactNContainer', 'Button', 'ListItem', 'MenuItem']);\n\nlet lastComponentId = 0;\nlet renderingInstance: ComponentInstance;\n\nexport function isParentElement($element: VirtualElement): $element is VirtualElementParent {\n  return $element.type === VirtualType.Tag || $element.type === VirtualType.Component || $element.type === VirtualType.Fragment;\n}\n\nfunction createElement(\n  source: string | FC | typeof Fragment,\n  props: Props,\n  ...children: any[]\n): VirtualElementParent | VirtualElementChildren {\n  if (source === Fragment) {\n    return buildFragmentElement(children);\n  } else if (typeof source === 'function') {\n    return createComponentInstance(source, props || {}, children);\n  } else {\n    return buildTagElement(source, props || {}, children);\n  }\n}\n\nfunction buildFragmentElement(children: any[]): VirtualElementFragment {\n  return {\n    type: VirtualType.Fragment,\n    children: buildChildren(children, true),\n  };\n}\n\nfunction createComponentInstance(Component: FC, props: Props, children: any[]): VirtualElementComponent {\n  if (children?.length) {\n    props.children = children.length === 1 ? children[0] : children;\n  }\n\n  const componentInstance: ComponentInstance = {\n    id: ++lastComponentId,\n    $element: undefined as unknown as VirtualElementComponent,\n    Component,\n    name: Component.name,\n    props,\n    mountState: MountState.New,\n  };\n\n  componentInstance.$element = buildComponentElement(componentInstance);\n\n  return componentInstance.$element;\n}\n\nfunction buildComponentElement(\n  componentInstance: ComponentInstance,\n  children?: VirtualElementChildren,\n): VirtualElementComponent {\n  return {\n    type: VirtualType.Component,\n    componentInstance,\n    props: componentInstance.props,\n    children: children ? buildChildren(children, true) : [],\n  };\n}\n\nfunction buildTagElement(tag: string, props: Props, children: any[]): VirtualElementTag {\n  return {\n    type: VirtualType.Tag,\n    tag,\n    props,\n    children: buildChildren(children),\n  };\n}\n\nfunction buildChildren(children: any[], noEmpty = false): VirtualElement[] {\n  const cleanChildren = dropEmptyTail(children, noEmpty);\n  const newChildren = [];\n\n  for (let i = 0, l = cleanChildren.length; i < l; i++) {\n    const child = cleanChildren[i];\n    if (Array.isArray(child)) {\n      newChildren.push(...buildChildren(child, noEmpty));\n    } else {\n      newChildren.push(buildChildElement(child));\n    }\n  }\n\n  return newChildren;\n}\n\n// We only need placeholders in the middle of collection (to ensure other elements order).\nfunction dropEmptyTail(children: any[], noEmpty = false) {\n  let i = children.length - 1;\n\n  for (; i >= 0; i--) {\n    if (!isEmptyPlaceholder(children[i])) {\n      break;\n    }\n  }\n\n  if (i === children.length - 1) {\n    return children;\n  }\n\n  if (i === -1 && noEmpty) {\n    return children.slice(0, 1);\n  }\n\n  return children.slice(0, i + 1);\n}\n\nfunction isEmptyPlaceholder(child: any) {\n  return !child && child !== 0;\n}\n\nfunction buildChildElement(child: any): VirtualElement {\n  if (isEmptyPlaceholder(child)) {\n    return { type: VirtualType.Empty };\n  } else if (isParentElement(child)) {\n    return child;\n  } else {\n    return {\n      type: VirtualType.Text,\n      value: String(child),\n    };\n  }\n}\n\n// eslint-disable-next-line @typescript-eslint/naming-convention\nconst DEBUG_components: AnyLiteral = { TOTAL: { name: 'TOTAL', renders: 0 } };\n// eslint-disable-next-line @typescript-eslint/naming-convention\nconst DEBUG_memos: Record<string, { key: string; calls: number; misses: number; hitRate: number }> = {};\nconst DEBUG_MEMOS_CALLS_THRESHOLD = 20;\n\ndocument.addEventListener('dblclick', () => {\n  // eslint-disable-next-line no-console\n  console.warn('COMPONENTS', orderBy(\n    Object\n      .values(DEBUG_components)\n      .map(({ avgRenderTime, ...state }) => {\n        return { ...state, ...(avgRenderTime !== undefined && { avgRenderTime: Number(avgRenderTime.toFixed(2)) }) };\n      }),\n    'renders',\n    'desc',\n  ));\n\n  // eslint-disable-next-line no-console\n  console.warn('MEMOS', orderBy(\n    Object\n      .values(DEBUG_memos)\n      .filter(({ calls }) => calls >= DEBUG_MEMOS_CALLS_THRESHOLD)\n      .map((state) => ({ ...state, hitRate: Number(state.hitRate.toFixed(2)) })),\n    'hitRate',\n    'asc',\n  ));\n});\n\nlet instancesPendingUpdate = new Set<ComponentInstance>();\nlet idsToExcludeFromUpdate = new Set<number>();\nlet pendingEffects = new Map<string, Effect>();\nlet pendingCleanups = new Map<string, EffectCleanup>();\nlet pendingLayoutEffects = new Map<string, Effect>();\nlet pendingLayoutCleanups = new Map<string, EffectCleanup>();\nlet areImmediateEffectsCaptured = false;\n\n/*\n  Order:\n  - component effect cleanups\n  - component effects\n  - measure tasks\n  - mutation tasks\n  - component updates\n  - component layout effect cleanups\n  - component layout effects\n  - forced layout measure tasks\n  - forced layout mutation tasks\n */\n\nconst runUpdatePassOnRaf = throttleWith(requestMeasure, () => {\n  const runImmediateEffects = captureImmediateEffects();\n\n  idsToExcludeFromUpdate = new Set();\n  const instancesToUpdate = Array\n    .from(instancesPendingUpdate)\n    .sort((a, b) => a.id - b.id);\n  instancesPendingUpdate = new Set();\n\n  const currentCleanups = pendingCleanups;\n  pendingCleanups = new Map();\n  currentCleanups.forEach((cb) => cb());\n\n  const currentEffects = pendingEffects;\n  pendingEffects = new Map();\n  currentEffects.forEach((cb) => cb());\n\n  requestMutation(() => {\n    instancesToUpdate.forEach(prepareComponentForFrame);\n    instancesToUpdate.forEach((instance) => {\n      if (idsToExcludeFromUpdate!.has(instance.id)) {\n        return;\n      }\n\n      forceUpdateComponent(instance);\n    });\n\n    runImmediateEffects?.();\n  });\n});\n\nexport function captureImmediateEffects() {\n  if (areImmediateEffectsCaptured) {\n    return undefined;\n  }\n\n  areImmediateEffectsCaptured = true;\n  return runCapturedImmediateEffects;\n}\n\nfunction runCapturedImmediateEffects() {\n  const currentLayoutCleanups = pendingLayoutCleanups;\n  pendingLayoutCleanups = new Map();\n  currentLayoutCleanups.forEach((cb) => cb());\n\n  const currentLayoutEffects = pendingLayoutEffects;\n  pendingLayoutEffects = new Map();\n  currentLayoutEffects.forEach((cb) => cb());\n\n  areImmediateEffectsCaptured = false;\n}\n\nexport function renderComponent(componentInstance: ComponentInstance) {\n  idsToExcludeFromUpdate.add(componentInstance.id);\n\n  const { Component, props } = componentInstance;\n  let newRenderedValue: any;\n\n  safeExec(() => {\n    renderingInstance = componentInstance;\n    if (componentInstance.hooks) {\n      if (componentInstance.hooks.state) {\n        componentInstance.hooks.state.cursor = 0;\n      }\n      if (componentInstance.hooks.effects) {\n        componentInstance.hooks.effects.cursor = 0;\n      }\n      if (componentInstance.hooks.memos) {\n        componentInstance.hooks.memos.cursor = 0;\n      }\n      if (componentInstance.hooks.refs) {\n        componentInstance.hooks.refs.cursor = 0;\n      }\n    }\n\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    let DEBUG_startAt: number | undefined;\n    if (DEBUG) {\n      const componentName = DEBUG_resolveComponentName(Component);\n      if (!DEBUG_components[componentName]) {\n        DEBUG_components[componentName] = {\n          name: componentName,\n          renders: 0,\n          avgRenderTime: 0,\n        };\n      }\n\n      if (DEBUG_MORE) {\n        if (!DEBUG_SILENT_RENDERS_FOR.has(componentName)) {\n          // eslint-disable-next-line no-console\n          console.log(`[Teact] Render ${componentName}`);\n        }\n      }\n\n      DEBUG_startAt = performance.now();\n    }\n\n    newRenderedValue = Component(props);\n\n    if (DEBUG) {\n      const duration = performance.now() - DEBUG_startAt!;\n      const componentName = DEBUG_resolveComponentName(Component);\n      if (duration > DEBUG_RENDER_THRESHOLD) {\n        // eslint-disable-next-line no-console\n        console.warn(`[Teact] Slow component render: ${componentName}, ${Math.round(duration)} ms`);\n      }\n\n      const { renders, avgRenderTime } = DEBUG_components[componentName];\n      DEBUG_components[componentName].avgRenderTime = (avgRenderTime * renders + duration) / (renders + 1);\n      DEBUG_components[componentName].renders++;\n      DEBUG_components.TOTAL.renders++;\n\n      if (DEBUG_MORE) {\n        incrementOverlayCounter(`${componentName} renders`);\n        incrementOverlayCounter(`${componentName} duration`, duration);\n      }\n    }\n  }, () => {\n    // eslint-disable-next-line no-console\n    console.error(`[Teact] Error while rendering component ${componentInstance.name}`);\n\n    newRenderedValue = componentInstance.renderedValue;\n  });\n\n  if (componentInstance.mountState === MountState.Mounted && newRenderedValue === componentInstance.renderedValue) {\n    return componentInstance.$element;\n  }\n\n  componentInstance.renderedValue = newRenderedValue;\n\n  const children = Array.isArray(newRenderedValue) ? newRenderedValue : [newRenderedValue];\n\n  if (componentInstance.mountState === MountState.New) {\n    componentInstance.$element.children = buildChildren(children, true);\n  } else {\n    componentInstance.$element = buildComponentElement(componentInstance, children);\n  }\n\n  return componentInstance.$element;\n}\n\nexport function hasElementChanged($old: VirtualElement, $new: VirtualElement) {\n  if (typeof $old !== typeof $new) {\n    return true;\n  } else if ($old.type !== $new.type) {\n    return true;\n  } else if ($old.type === VirtualType.Text && $new.type === VirtualType.Text) {\n    return $old.value !== $new.value;\n  } else if ($old.type === VirtualType.Tag && $new.type === VirtualType.Tag) {\n    return ($old.tag !== $new.tag) || ($old.props.key !== $new.props.key);\n  } else if ($old.type === VirtualType.Component && $new.type === VirtualType.Component) {\n    return (\n      $old.componentInstance.Component !== $new.componentInstance.Component\n    ) || (\n      $old.props.key !== $new.props.key\n    );\n  }\n\n  return false;\n}\n\nexport function mountComponent(componentInstance: ComponentInstance) {\n  renderComponent(componentInstance);\n  componentInstance.mountState = MountState.Mounted;\n  return componentInstance.$element;\n}\n\nexport function unmountComponent(componentInstance: ComponentInstance) {\n  if (componentInstance.mountState !== MountState.Mounted) {\n    return;\n  }\n\n  idsToExcludeFromUpdate.add(componentInstance.id);\n\n  if (componentInstance.hooks?.effects) {\n    for (const effect of componentInstance.hooks.effects.byCursor) {\n      if (effect.cleanup) {\n        safeExec(effect.cleanup);\n      }\n\n      effect.cleanup = undefined;\n      effect.releaseSignals?.();\n    }\n  }\n\n  componentInstance.mountState = MountState.Unmounted;\n\n  helpGc(componentInstance);\n}\n\n// We need to remove all references to DOM objects. We also clean all other references, just in case\nfunction helpGc(componentInstance: ComponentInstance) {\n  const {\n    effects, state, memos, refs,\n  } = componentInstance.hooks || {};\n\n  if (effects) {\n    for (const hook of effects.byCursor) {\n      hook.schedule = undefined as any;\n      hook.cleanup = undefined as any;\n      hook.releaseSignals = undefined as any;\n      hook.dependencies = undefined;\n    }\n  }\n\n  if (state) {\n    for (const hook of state.byCursor) {\n      hook.value = undefined;\n      hook.nextValue = undefined;\n      hook.setter = undefined as any;\n    }\n  }\n\n  if (memos) {\n    for (const hook of memos.byCursor) {\n      hook.value = undefined as any;\n      hook.dependencies = undefined as any;\n    }\n  }\n\n  if (refs) {\n    for (const hook of refs.byCursor) {\n      hook.current = undefined as any;\n    }\n  }\n\n  componentInstance.hooks = undefined as any;\n  componentInstance.$element = undefined as any;\n  componentInstance.renderedValue = undefined;\n  componentInstance.Component = undefined as any;\n  componentInstance.props = undefined as any;\n  componentInstance.onUpdate = undefined;\n}\n\nfunction prepareComponentForFrame(componentInstance: ComponentInstance) {\n  if (componentInstance.mountState !== MountState.Mounted) {\n    return;\n  }\n\n  if (componentInstance.hooks?.state) {\n    for (const hook of componentInstance.hooks.state.byCursor) {\n      hook.value = hook.nextValue;\n    }\n  }\n}\n\nfunction forceUpdateComponent(componentInstance: ComponentInstance) {\n  if (componentInstance.mountState !== MountState.Mounted || !componentInstance.onUpdate) {\n    return;\n  }\n\n  const currentElement = componentInstance.$element;\n\n  renderComponent(componentInstance);\n\n  if (componentInstance.$element !== currentElement) {\n    componentInstance.onUpdate();\n  }\n}\n\nexport function useState<T>(): [T | undefined, StateHookSetter<T | undefined>];\nexport function useState<T>(initial: T, debugKey?: string): [T, StateHookSetter<T>];\nexport function useState<T>(initial?: T, debugKey?: string): [T, StateHookSetter<T>] {\n  if (!renderingInstance.hooks) {\n    renderingInstance.hooks = {};\n  }\n  if (!renderingInstance.hooks.state) {\n    renderingInstance.hooks.state = { cursor: 0, byCursor: [] };\n  }\n\n  const { cursor, byCursor } = renderingInstance.hooks.state;\n  const componentInstance = renderingInstance;\n\n  if (byCursor[cursor] === undefined) {\n    byCursor[cursor] = {\n      value: initial,\n      nextValue: initial,\n      setter: (newValue: ((current: T) => T) | T) => {\n        if (componentInstance.mountState === MountState.Unmounted) {\n          return;\n        }\n\n        if (typeof newValue === 'function') {\n          newValue = (newValue as (current: T) => T)(byCursor[cursor].nextValue);\n        }\n\n        if (byCursor[cursor].nextValue === newValue) {\n          return;\n        }\n\n        byCursor[cursor].nextValue = newValue;\n\n        instancesPendingUpdate.add(componentInstance);\n        runUpdatePassOnRaf();\n\n        if (DEBUG_MORE) {\n          // eslint-disable-next-line no-console\n          console.log(\n            '[Teact.useState]',\n            DEBUG_resolveComponentName(componentInstance.Component),\n            `State update at cursor #${cursor}${debugKey ? ` (${debugKey})` : ''}, next value: `,\n            byCursor[cursor].nextValue,\n          );\n        }\n      },\n    };\n  }\n\n  renderingInstance.hooks.state.cursor++;\n\n  return [\n    byCursor[cursor].value,\n    byCursor[cursor].setter,\n  ];\n}\n\nfunction useEffectBase(\n  isLayout: boolean,\n  effect: Effect,\n  dependencies?: readonly any[],\n  debugKey?: string,\n) {\n  if (!renderingInstance.hooks) {\n    renderingInstance.hooks = {};\n  }\n  if (!renderingInstance.hooks.effects) {\n    renderingInstance.hooks.effects = { cursor: 0, byCursor: [] };\n  }\n\n  const { cursor, byCursor } = renderingInstance.hooks.effects;\n  const componentInstance = renderingInstance;\n\n  const runEffectCleanup = () => safeExec(() => {\n    const { cleanup } = byCursor[cursor];\n    if (!cleanup) {\n      return;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    let DEBUG_startAt: number | undefined;\n    if (DEBUG) {\n      DEBUG_startAt = performance.now();\n    }\n\n    cleanup();\n\n    if (DEBUG) {\n      const duration = performance.now() - DEBUG_startAt!;\n      const componentName = DEBUG_resolveComponentName(componentInstance.Component);\n      if (duration > DEBUG_EFFECT_THRESHOLD) {\n        // eslint-disable-next-line no-console\n        console.warn(\n          `[Teact] Slow cleanup at effect cursor #${cursor}: ${componentName}, ${Math.round(duration)} ms`,\n        );\n      }\n    }\n  }, () => {\n    // eslint-disable-next-line no-console\n    console.error(`[Teact] Error in effect cleanup at cursor #${cursor} in ${componentInstance.name}`);\n  }, () => {\n    byCursor[cursor].cleanup = undefined;\n  });\n\n  const runEffect = () => safeExec(() => {\n    if (componentInstance.mountState === MountState.Unmounted) {\n      return;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    let DEBUG_startAt: number | undefined;\n    if (DEBUG) {\n      DEBUG_startAt = performance.now();\n    }\n\n    const result = effect();\n    if (typeof result === 'function') {\n      byCursor[cursor].cleanup = result;\n    }\n\n    if (DEBUG) {\n      const duration = performance.now() - DEBUG_startAt!;\n      const componentName = DEBUG_resolveComponentName(componentInstance.Component);\n      if (duration > DEBUG_EFFECT_THRESHOLD) {\n        // eslint-disable-next-line no-console\n        console.warn(`[Teact] Slow effect at cursor #${cursor}: ${componentName}, ${Math.round(duration)} ms`);\n      }\n    }\n  }, () => {\n    // eslint-disable-next-line no-console\n    console.error(`[Teact] Error in effect at cursor #${cursor} in ${componentInstance.name}`);\n  });\n\n  function schedule() {\n    const effectId = `${componentInstance.id}_${cursor}`;\n\n    if (isLayout) {\n      pendingLayoutCleanups.set(effectId, runEffectCleanup);\n      pendingLayoutEffects.set(effectId, runEffect);\n    } else {\n      pendingCleanups.set(effectId, runEffectCleanup);\n      pendingEffects.set(effectId, runEffect);\n    }\n\n    runUpdatePassOnRaf();\n  }\n\n  if (dependencies && byCursor[cursor]?.dependencies) {\n    if (dependencies.some((dependency, i) => dependency !== byCursor[cursor].dependencies![i])) {\n      if (DEBUG && debugKey) {\n        const causedBy = dependencies.reduce((res, newValue, i) => {\n          const prevValue = byCursor[cursor].dependencies![i];\n          if (newValue !== prevValue) {\n            res.push(`${i}: ${prevValue} => ${newValue}`);\n          }\n\n          return res;\n        }, []);\n\n        // eslint-disable-next-line no-console\n        console.log(`[Teact] Effect \"${debugKey}\" caused by dependencies.`, causedBy.join(', '));\n      }\n\n      schedule();\n    }\n  } else {\n    if (debugKey) {\n      // eslint-disable-next-line no-console\n      console.log(`[Teact] Effect \"${debugKey}\" caused by missing dependencies.`);\n    }\n\n    schedule();\n  }\n\n  const isFirstRun = !byCursor[cursor];\n\n  byCursor[cursor] = {\n    ...byCursor[cursor],\n    dependencies,\n    schedule,\n  };\n\n  function setupSignals() {\n    const cleanups = dependencies?.filter(isSignal).map((signal, i) => signal.subscribe(() => {\n      if (debugKey) {\n        // eslint-disable-next-line no-console\n        console.log(`[Teact] Effect \"${debugKey}\" caused by signal #${i} new value:`, signal());\n      }\n\n      byCursor[cursor].schedule();\n    }));\n\n    if (!cleanups?.length) {\n      return undefined;\n    }\n\n    return () => {\n      for (const cleanup of cleanups) {\n        cleanup();\n      }\n    };\n  }\n\n  if (isFirstRun) {\n    byCursor[cursor].releaseSignals = setupSignals();\n  }\n\n  renderingInstance.hooks.effects.cursor++;\n}\n\nexport function useEffect(effect: Effect, dependencies?: readonly any[], debugKey?: string) {\n  return useEffectBase(false, effect, dependencies, debugKey);\n}\n\nexport function useLayoutEffect(effect: Effect, dependencies?: readonly any[], debugKey?: string) {\n  return useEffectBase(true, effect, dependencies, debugKey);\n}\n\nexport function useMemo<T extends any>(\n  resolver: () => T,\n  dependencies: any[],\n  debugKey?: string,\n  debugHitRateKey?: string,\n): T {\n  if (!renderingInstance.hooks) {\n    renderingInstance.hooks = {};\n  }\n  if (!renderingInstance.hooks.memos) {\n    renderingInstance.hooks.memos = { cursor: 0, byCursor: [] };\n  }\n\n  const { cursor, byCursor } = renderingInstance.hooks.memos;\n  let { value } = byCursor[cursor] || {};\n\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  let DEBUG_state: typeof DEBUG_memos[string] | undefined;\n  if (DEBUG && debugHitRateKey) {\n    const instanceKey = `${debugHitRateKey}#${renderingInstance.id}`;\n\n    DEBUG_state = DEBUG_memos[instanceKey];\n    if (!DEBUG_state) {\n      DEBUG_state = {\n        key: instanceKey, calls: 0, misses: 0, hitRate: 0,\n      };\n      DEBUG_memos[instanceKey] = DEBUG_state;\n    }\n\n    DEBUG_state.calls++;\n    DEBUG_state.hitRate = (DEBUG_state.calls - DEBUG_state.misses) / DEBUG_state.calls;\n  }\n\n  if (\n    byCursor[cursor] === undefined\n    || dependencies.length !== byCursor[cursor].dependencies.length\n    || dependencies.some((dependency, i) => dependency !== byCursor[cursor].dependencies[i])\n  ) {\n    if (DEBUG) {\n      if (debugKey) {\n        const msg = `[Teact.useMemo] ${renderingInstance.name} (${debugKey}): Update is caused by:`;\n        if (!byCursor[cursor]) {\n          // eslint-disable-next-line no-console\n          console.log(`${msg} [first render]`);\n        } else {\n          logUnequalProps(byCursor[cursor].dependencies, dependencies, msg, debugKey);\n        }\n      }\n\n      if (DEBUG_state) {\n        DEBUG_state.misses++;\n        DEBUG_state.hitRate = (DEBUG_state.calls - DEBUG_state.misses) / DEBUG_state.calls;\n\n        if (\n          DEBUG_state.calls % 10 === 0\n          && DEBUG_state.calls >= DEBUG_MEMOS_CALLS_THRESHOLD\n          && DEBUG_state.hitRate < 0.25\n        ) {\n          // eslint-disable-next-line no-console\n          console.warn(\n            // eslint-disable-next-line max-len\n            `[Teact] ${DEBUG_state.key}: Hit rate is ${DEBUG_state.hitRate.toFixed(2)} for ${DEBUG_state.calls} calls`,\n          );\n        }\n      }\n    }\n\n    value = resolver();\n  }\n\n  byCursor[cursor] = {\n    value,\n    dependencies,\n  };\n\n  renderingInstance.hooks.memos.cursor++;\n\n  return value;\n}\n\nexport function useCallback<F extends AnyFunction>(newCallback: F, dependencies: any[], debugKey?: string): F {\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  return useMemo(() => newCallback, dependencies, debugKey);\n}\n\nexport function useRef<T>(initial: T): { current: T };\nexport function useRef<T>(): { current: T | undefined }; // TT way (empty is `undefined`)\nexport function useRef<T>(initial: null): { current: T | null }; // React way (empty is `null`)\n// eslint-disable-next-line no-null/no-null\nexport function useRef<T>(initial?: T | null) {\n  if (!renderingInstance.hooks) {\n    renderingInstance.hooks = {};\n  }\n  if (!renderingInstance.hooks.refs) {\n    renderingInstance.hooks.refs = { cursor: 0, byCursor: [] };\n  }\n\n  const { cursor, byCursor } = renderingInstance.hooks.refs;\n  if (!byCursor[cursor]) {\n    byCursor[cursor] = {\n      current: initial,\n    };\n  }\n\n  renderingInstance.hooks.refs.cursor++;\n\n  return byCursor[cursor];\n}\n\nexport function memo<T extends FC_withDebug>(Component: T, debugKey?: string) {\n  function TeactMemoWrapper(props: Props) {\n    return useMemo(\n      () => createElement(Component, props),\n      // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n      Object.values(props),\n      debugKey,\n      DEBUG_MORE ? DEBUG_resolveComponentName(renderingInstance.Component) : undefined,\n    );\n  }\n\n  TeactMemoWrapper.DEBUG_contentComponentName = DEBUG_resolveComponentName(Component);\n\n  return TeactMemoWrapper as T;\n}\n\n// eslint-disable-next-line @typescript-eslint/naming-convention\nexport function DEBUG_resolveComponentName(Component: FC_withDebug) {\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  const { name, DEBUG_contentComponentName } = Component;\n\n  if (name === 'TeactNContainer') {\n    return `container>${DEBUG_contentComponentName}`;\n  }\n\n  if (name === 'TeactMemoWrapper') {\n    return `memo>${DEBUG_contentComponentName}`;\n  }\n\n  return name + (DEBUG_contentComponentName ? `>${DEBUG_contentComponentName}` : '');\n}\n\nexport default {\n  createElement,\n  Fragment,\n};\n","export default function arePropsShallowEqual(currentProps: AnyLiteral, newProps: AnyLiteral) {\n  if (currentProps === newProps) {\n    return true;\n  }\n\n  const currentKeys = Object.keys(currentProps);\n  const currentKeysLength = currentKeys.length;\n  const newKeysLength = Object.keys(newProps).length;\n\n  if (currentKeysLength !== newKeysLength) {\n    return false;\n  }\n\n  if (currentKeysLength === 0) {\n    return true;\n  }\n\n  for (let i = 0; i < currentKeysLength; i++) {\n    const prop = currentKeys[i];\n    if (currentProps[prop] !== newProps[prop]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexport function logUnequalProps(currentProps: AnyLiteral, newProps: AnyLiteral, msg: string, debugKey = '') {\n  const currentKeys = Object.keys(currentProps);\n  const currentKeysLength = currentKeys.length;\n  const newKeysLength = Object.keys(newProps).length;\n\n  if (currentKeysLength !== newKeysLength) {\n    // eslint-disable-next-line no-console\n    console.log(`${msg} LENGTH`);\n    return;\n  }\n\n  // eslint-disable-next-line no-console\n  console.log(msg);\n  currentKeys.forEach((res, prop) => {\n    if (currentProps[prop] !== newProps[prop]) {\n      // eslint-disable-next-line no-console\n      console.log(debugKey, prop, ':', currentProps[prop], '=>', newProps[prop]);\n    }\n  });\n}\n","export function createCallbackManager<T extends AnyToVoidFunction = AnyToVoidFunction>() {\n  const callbacks = new Set<T>();\n\n  function addCallback(cb: T) {\n    callbacks.add(cb);\n\n    return () => {\n      removeCallback(cb);\n    };\n  }\n\n  function removeCallback(cb: T) {\n    callbacks.delete(cb);\n  }\n\n  function runCallbacks(...args: Parameters<T>) {\n    callbacks.forEach((callback) => {\n      callback(...args);\n    });\n  }\n\n  function hasCallbacks() {\n    return Boolean(callbacks.size);\n  }\n\n  return {\n    runCallbacks,\n    addCallback,\n    removeCallback,\n    hasCallbacks,\n  };\n}\n\nexport type CallbackManager<T extends AnyToVoidFunction = AnyToVoidFunction>\n  = ReturnType<typeof createCallbackManager<T>>;\n","import { throttle } from './schedulers';\n\nconst KEYS_TO_IGNORE = new Set([\n  'TeactMemoWrapper renders',\n  'TeactNContainer renders',\n  'Button renders',\n]);\nconst MIN_RENDERS_TO_SHOW = 5;\nconst MIN_DURATION_TO_SHOW = 2;\nconst BG_GREEN = ' style=\"background: lightgreen\"';\n\nlet counters: Record<string, {\n  value: number;\n  lastUpdateAt: number;\n}> = {};\n\nconst renderCountersThrottled = throttle(renderCounters, 500, false);\n\nlet loggerEl: HTMLDivElement;\n\nexport function debugToOverlay(text: string) {\n  if (!loggerEl) {\n    setupOverlay();\n  }\n\n  const date = new Date();\n  const dateFormatted = `${date.toLocaleTimeString()}.${date.getMilliseconds()}`;\n  const wasAtBottom = loggerEl.scrollTop + 10 >= loggerEl.scrollHeight - loggerEl.offsetHeight;\n\n  loggerEl.innerHTML += `${dateFormatted}: ${text}<br/>`;\n\n  if (wasAtBottom) {\n    loggerEl.scrollTop = loggerEl.scrollHeight;\n  }\n}\n\nexport function incrementOverlayCounter(key: string, value = 1) {\n  const now = Date.now();\n  if (!counters[key]) {\n    counters[key] = { value, lastUpdateAt: now };\n  } else {\n    counters[key].value += value;\n    counters[key].lastUpdateAt = now;\n  }\n\n  renderCountersThrottled();\n}\n\nexport function renderCounters() {\n  if (!loggerEl) {\n    setupOverlay();\n  }\n\n  const halfSecondAgo = Date.now() - 500;\n  const [maxRenders, maxDuration] = Object.entries(counters).reduce((acc, [key, { value }]) => {\n    if (KEYS_TO_IGNORE.has(key)) {\n      return acc;\n    }\n\n    if (key.includes('renders') && value > acc[0]) {\n      acc[0] = value;\n    }\n\n    if (key.includes('duration') && value > acc[1]) {\n      acc[1] = value;\n    }\n\n    return acc;\n  }, [0, 0]);\n\n  loggerEl.innerHTML = Object\n    .entries(counters)\n    .filter(([key, { value }]) => (\n      (!KEYS_TO_IGNORE.has(key)) && (\n        (key.includes('renders') && value > MIN_RENDERS_TO_SHOW)\n        || (key.includes('duration') && value > MIN_DURATION_TO_SHOW)\n      )\n    ))\n    .sort((a, b) => (\n      b[1].lastUpdateAt - a[1].lastUpdateAt\n    ))\n    .map(([key, { value, lastUpdateAt }]) => ([\n      `<div style=\"background: #ff0000${factorToHex(value / (key.includes('renders') ? maxRenders : maxDuration))}\">`,\n      `  <span${lastUpdateAt > halfSecondAgo ? BG_GREEN : ''}>${key}: ${Math.round(value)}</span>`,\n      '</div>',\n    ].join('\\n')))\n    .join('\\n');\n}\n\nfunction setupOverlay() {\n  loggerEl = document.createElement('div');\n  loggerEl.style.cssText = 'position: absolute; left: 0; bottom: 25px; z-index: 9998; width: 260px; height: 200px;'\n    + ' border: 1px solid #555; background: rgba(255, 255, 255, 0.9); overflow: auto; font-size: 10px;';\n  document.body.appendChild(loggerEl);\n\n  const clearEl = document.createElement('a');\n  clearEl.style.cssText = 'position: absolute; left: 222px; bottom: 198px; z-index: 9999; font-size: 20px; '\n    + 'cursor: pointer;';\n  clearEl.innerText = '🔄';\n  clearEl.addEventListener('click', () => {\n    counters = {};\n    renderCountersThrottled();\n  });\n  document.body.appendChild(clearEl);\n}\n\nfunction factorToHex(factor: number) {\n  return Math.round(255 * factor).toString(16).padStart(2, '0');\n}\n","window.addEventListener('error', handleErrorEvent);\nwindow.addEventListener('unhandledrejection', handleErrorEvent);\n\nfunction handleErrorEvent(e: ErrorEvent | PromiseRejectionEvent) {\n  // https://stackoverflow.com/questions/49384120/resizeobserver-loop-limit-exceeded\n  if (e instanceof ErrorEvent && e.message === 'ResizeObserver loop limit exceeded') {\n    return;\n  }\n\n  e.preventDefault();\n\n  handleError(e instanceof ErrorEvent ? (e.error || e.message) : e.reason);\n}\n\nexport function handleError(err: Error) {\n  // eslint-disable-next-line no-console\n  console.error(err);\n}\n","type OrderDirection =\n  'asc'\n  | 'desc';\n\ninterface OrderCallback<T> {\n  (member: T): any;\n}\n\nexport function orderBy<T>(\n  collection: T[],\n  orderRule: (keyof T) | OrderCallback<T> | ((keyof T) | OrderCallback<T>)[],\n  mode: OrderDirection | [OrderDirection, OrderDirection] = 'asc',\n): T[] {\n  function compareValues(a: T, b: T, currentOrderRule: (keyof T) | OrderCallback<T>, isAsc: boolean) {\n    const aValue = (typeof currentOrderRule === 'function' ? currentOrderRule(a) : a[currentOrderRule]) || 0;\n    const bValue = (typeof currentOrderRule === 'function' ? currentOrderRule(b) : b[currentOrderRule]) || 0;\n\n    return isAsc ? aValue - bValue : bValue - aValue;\n  }\n\n  if (Array.isArray(orderRule)) {\n    const [mode1, mode2] = Array.isArray(mode) ? mode : [mode, mode];\n    const [orderRule1, orderRule2] = orderRule;\n    const isAsc1 = mode1 === 'asc';\n    const isAsc2 = mode2 === 'asc';\n\n    return collection.sort((a, b) => {\n      return compareValues(a, b, orderRule1, isAsc1) || compareValues(a, b, orderRule2, isAsc2);\n    });\n  }\n\n  const isAsc = mode === 'asc';\n  return collection.sort((a, b) => {\n    return compareValues(a, b, orderRule, isAsc);\n  });\n}\n\nexport function unique<T extends any>(array: T[]): T[] {\n  return Array.from(new Set(array));\n}\n","import { DEBUG_MORE } from '../config';\nimport { handleError } from './handleError';\n\nconst SAFE_EXEC_ENABLED = !DEBUG_MORE;\n\nexport default function safeExec(cb: Function, rescue?: (err: Error) => void, always?: NoneToVoidFunction) {\n  if (!SAFE_EXEC_ENABLED) {\n    return cb();\n  }\n\n  try {\n    return cb();\n  } catch (err: any) {\n    rescue?.(err);\n    handleError(err);\n    return undefined;\n  } finally {\n    always?.();\n  }\n}\n","export type Scheduler = typeof requestAnimationFrame | typeof onTickEnd;\n\nexport function throttle<F extends AnyToVoidFunction>(\n  fn: F,\n  ms: number,\n  shouldRunFirst = true,\n) {\n  let interval: number | undefined;\n  let isPending: boolean;\n  let args: Parameters<F>;\n\n  return (..._args: Parameters<F>) => {\n    isPending = true;\n    args = _args;\n\n    if (!interval) {\n      if (shouldRunFirst) {\n        isPending = false;\n        fn(...args);\n      }\n\n      // eslint-disable-next-line no-restricted-globals\n      interval = self.setInterval(() => {\n        if (!isPending) {\n          // eslint-disable-next-line no-restricted-globals\n          self.clearInterval(interval!);\n          interval = undefined;\n          return;\n        }\n\n        isPending = false;\n        fn(...args);\n      }, ms);\n    }\n  };\n}\n\nexport function throttleWithTickEnd<F extends AnyToVoidFunction>(fn: F) {\n  return throttleWith(onTickEnd, fn);\n}\n\nexport function throttleWith<F extends AnyToVoidFunction>(schedulerFn: Scheduler, fn: F) {\n  let waiting = false;\n  let args: Parameters<F>;\n\n  return (..._args: Parameters<F>) => {\n    args = _args;\n\n    if (!waiting) {\n      waiting = true;\n\n      schedulerFn(() => {\n        waiting = false;\n        fn(...args);\n      });\n    }\n  };\n}\n\nexport function onIdle(cb: NoneToVoidFunction, timeout?: number) {\n  // eslint-disable-next-line no-restricted-globals\n  if (self.requestIdleCallback) {\n    // eslint-disable-next-line no-restricted-globals\n    self.requestIdleCallback(cb, { timeout });\n  } else {\n    onTickEnd(cb);\n  }\n}\n\nconst FAST_RAF_TIMEOUT_FALLBACK_MS = 300;\n\nlet fastRafCallbacks: Set<NoneToVoidFunction> | undefined;\nlet fastRafFallbackCallbacks: Set<NoneToVoidFunction> | undefined;\nlet fastRafFallbackTimeout: number | undefined;\n\n// May result in an immediate execution if called from another RAF callback which was scheduled\n// (and therefore is executed) earlier than RAF callback scheduled by `fastRaf`\nexport function fastRaf(callback: NoneToVoidFunction, withTimeoutFallback = false) {\n  if (!fastRafCallbacks) {\n    fastRafCallbacks = new Set([callback]);\n\n    requestAnimationFrame(() => {\n      const currentCallbacks = fastRafCallbacks!;\n\n      fastRafCallbacks = undefined;\n      fastRafFallbackCallbacks = undefined;\n\n      if (fastRafFallbackTimeout) {\n        clearTimeout(fastRafFallbackTimeout);\n        fastRafFallbackTimeout = undefined;\n      }\n\n      currentCallbacks.forEach((cb) => cb());\n    });\n  } else {\n    fastRafCallbacks.add(callback);\n  }\n\n  if (withTimeoutFallback) {\n    if (!fastRafFallbackCallbacks) {\n      fastRafFallbackCallbacks = new Set([callback]);\n    } else {\n      fastRafFallbackCallbacks.add(callback);\n    }\n\n    if (!fastRafFallbackTimeout) {\n      fastRafFallbackTimeout = window.setTimeout(() => {\n        const currentTimeoutCallbacks = fastRafFallbackCallbacks!;\n\n        if (fastRafCallbacks) {\n          currentTimeoutCallbacks.forEach(fastRafCallbacks.delete, fastRafCallbacks);\n        }\n        fastRafFallbackCallbacks = undefined;\n\n        if (fastRafFallbackTimeout) {\n          clearTimeout(fastRafFallbackTimeout);\n          fastRafFallbackTimeout = undefined;\n        }\n\n        currentTimeoutCallbacks.forEach((cb) => cb());\n      }, FAST_RAF_TIMEOUT_FALLBACK_MS);\n    }\n  }\n}\n\nlet onTickEndCallbacks: NoneToVoidFunction[] | undefined;\n\nexport function onTickEnd(callback: NoneToVoidFunction) {\n  if (!onTickEndCallbacks) {\n    onTickEndCallbacks = [callback];\n\n    Promise.resolve().then(() => {\n      const currentCallbacks = onTickEndCallbacks!;\n      onTickEndCallbacks = undefined;\n      currentCallbacks.forEach((cb) => cb());\n    });\n  } else {\n    onTickEndCallbacks.push(callback);\n  }\n}\n\nlet beforeUnloadCallbacks: NoneToVoidFunction[] | undefined;\n\nexport function onBeforeUnload(callback: NoneToVoidFunction, isLast = false) {\n  if (!beforeUnloadCallbacks) {\n    beforeUnloadCallbacks = [];\n    // eslint-disable-next-line no-restricted-globals\n    self.addEventListener('beforeunload', () => {\n      beforeUnloadCallbacks!.forEach((cb) => cb());\n    });\n  }\n\n  if (isLast) {\n    beforeUnloadCallbacks.push(callback);\n  } else {\n    beforeUnloadCallbacks.unshift(callback);\n  }\n\n  return () => {\n    beforeUnloadCallbacks = beforeUnloadCallbacks!.filter((cb) => cb !== callback);\n  };\n}\n","import type { CallbackManager } from './callbacks';\nimport { createCallbackManager } from './callbacks';\n\ninterface SignalState<T> {\n  value: T;\n  effects: CallbackManager;\n}\n\nconst SIGNAL_MARK = Symbol('SIGNAL_MARK');\n\nexport type Signal<T = any> = ((() => T) & {\n  readonly [SIGNAL_MARK]: symbol;\n  subscribe: (cb: AnyToVoidFunction) => NoneToVoidFunction;\n});\n\nexport type SignalSetter = (newValue: any) => void;\n\nexport function isSignal(obj: any): obj is Signal {\n  return typeof obj === 'function' && SIGNAL_MARK in obj;\n}\n\n// A shorthand to unsubscribe effect from all signals\nconst unsubscribesByEffect = new Map<NoneToVoidFunction, Set<NoneToVoidFunction>>();\n\nlet currentEffect: NoneToVoidFunction | undefined;\n\nexport function createSignal<T>(defaultValue?: T) {\n  const state: SignalState<typeof defaultValue> = {\n    value: defaultValue,\n    effects: createCallbackManager(),\n  };\n\n  function subscribe(effect: NoneToVoidFunction) {\n    const unsubscribe = state.effects.addCallback(effect);\n\n    if (!unsubscribesByEffect.has(effect)) {\n      unsubscribesByEffect.set(effect, new Set([unsubscribe]));\n    } else {\n      unsubscribesByEffect.get(effect)!.add(unsubscribe);\n    }\n\n    return () => {\n      unsubscribe();\n\n      const unsubscribes = unsubscribesByEffect.get(effect)!;\n      unsubscribes.delete(unsubscribe);\n      if (!unsubscribes.size) {\n        unsubscribesByEffect.delete(effect);\n      }\n    };\n  }\n\n  function getter() {\n    if (currentEffect) {\n      subscribe(currentEffect);\n    }\n\n    return state.value;\n  }\n\n  function setter(newValue: T) {\n    if (state.value === newValue) {\n      return;\n    }\n\n    state.value = newValue;\n    state.effects.runCallbacks();\n  }\n\n  const signal = Object.assign(getter as Signal<T>, {\n    [SIGNAL_MARK]: SIGNAL_MARK,\n    subscribe,\n  });\n\n  return [signal, setter] as const;\n}\n\nexport function cleanupEffect(effect: NoneToVoidFunction) {\n  unsubscribesByEffect.get(effect)?.forEach((unsubscribe) => {\n    unsubscribe();\n  });\n  unsubscribesByEffect.delete(effect);\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import React, { useState } from '../src/teact/teact';\nimport TeactDOM from '../src/teact/teact-dom';\n\nTeactDOM.render(\n  <App />,\n  document.getElementById('root')!,\n);\n\nfunction App() {\n  return (\n    <div>\n      <h2>Hello Teact!</h2>\n\n      <Child />\n      <Checkbox />\n    </div>\n  );\n}\n\nfunction Child() {\n  return (\n    <div>\n      This is your first component.\n    </div>\n  );\n}\n\nfunction Checkbox() {\n  const [isChecked, setIsChecked] = useState(true);\n\n  function handleCheck() {\n    setIsChecked((current) => !current);\n  }\n\n  return (\n    <label>\n      <input type=\"checkbox\" checked={isChecked} onChange={handleCheck} />\n      This is a controlled form element.\n    </label>\n  );\n}\n"],"names":["DEBUG","DEBUG_MORE","fastRaf","throttleWith","safeExec","setPhase","pendingMeasureTasks","pendingMutationTasks","pendingForceReflowTasks","runUpdatePassOnRaf","throttleWithRafFallback","currentMeasureTasks","forEach","task","Promise","resolve","then","currentMutationTasks","pendingForceReflowMutationTasks","mutationTask","push","requestMeasure","cb","requestMutation","requestNextMutation","requestForcedReflow","fn","throttledFn","Element","props","methods","HTMLElement","window","VisualViewport","Document","HTMLInputElement","MouseEvent","Range","LAYOUT_CAUSES","DEFAULT_ERROR_HANDLER","console","error","onError","nativeMethods","Map","phase","isStrict","observer","newPhase","getPhase","enableStrict","setupLayoutDetectors","setupMutationObserver","disableStrict","clearMutationObserver","clearLayoutDetectors","forceMeasure","Error","result","setHandler","handler","Object","entries","name","causes","entity","prototype","prop","nativeGetter","getOwnPropertyDescriptor","get","set","defineProperty","onMeasure","call","method","nativeMethod","args","apply","clear","MutationObserver","mutations","target","type","attributeName","document","contains","contentEditable","startsWith","observe","body","childList","attributes","subtree","characterData","disconnect","undefined","propName","NON_BUBBLEABLE_EVENTS","Set","documentEventCounters","delegationRegistryByEventType","delegatedEventTypesByElement","addEventListener","element","asCapture","eventType","resolveEventType","canUseEventDelegation","addDelegatedListener","removeEventListener","removeDelegatedListener","replace","toLowerCase","tagName","realEventType","has","handleEvent","resolveDelegationRegistry","resolveDelegatedEventTypes","add","removeAllDelegatedListeners","eventTypes","realEvent","events","furtherCallsPrevented","current","stopPropagation","preventDefault","event","Proxy","p","Reflect","parentNode","existing","newSet","documentListenersCount","keys","length","delegatedHandlersCount1","values","reduce","acc","counter","delegationRegistriesCount","delegatedHandlersCount2","delegationRegistry","size","delegationElementsCount","delegatedEventTypesCount","Array","from","warn","captureImmediateEffects","hasElementChanged","isParentElement","mountComponent","MountState","renderComponent","unmountComponent","VirtualType","unique","FILTERED_ATTRIBUTES","HTML_ATTRIBUTES","CONTROLLABLE_TAGS","MAPPED_ATTRIBUTES","autoPlay","autoComplete","INDEX_KEY_PREFIX","headsByElement","WeakMap","extraClasses","extraStyles","render","$element","parentEl","children","runImmediateEffects","$head","$renderedChild","renderWithVirtual","$current","$new","$parent","index","options","skipComponentUpdate","fragment","nextSibling","isCurrentComponent","Component","isNewComponent","$newAsReal","isCurrentFragment","Fragment","isNewFragment","updateComponent","componentInstance","mountState","Mounted","setupComponentUpdateListener","newTarget","initComponent","mountChildren","canSetTextContent","Text","firstChild","textContent","value","node","createNode","insertBefore","Tag","setElementRef","remount","getNextSibling","isComponent","isFragment","renderChildren","forceMoveToEnd","$currentAsReal","currentTarget","isTag","$newAsTag","updateAttributes","New","onUpdate","i","l","$child","unmountChildren","Empty","createTextNode","tag","createElement","processControlled","key","hasOwnProperty","setAttribute","processUncontrolledOnMount","componentNextSibling","replaceChild","removeChild","unmountRealTree","appendChild","lastChild","currentEl","DEBUG_checkKeyUniqueness","teactFastList","renderFastListChildren","currentChildren","newChildren","currentChildrenLength","newChildrenLength","maxLength","Math","max","createDocumentFragment","lastCurrentChild","fragmentNextSibling","newKeys","$newChild","currentRemainingIndex","remainingByKey","$currentChild","isKeyPresent","newChildKey","orderKey","teactOrderKey","fragmentIndex","fragmentSize","currentPreservedIndex","currentChildInfo","renderFragment","newOrderKey","shouldMoveNode","isMovingDown","childNodes","htmlElement","ref","isValueControlled","isCheckedControlled","checked","isControlled","includes","toUpperCase","onInput","onChange","e","selectionStart","selectionEnd","isCaretAtEnd","setSelectionRange","selectionState","dataset","__teactSelectionState","JSON","stringify","defaultValue","defaultChecked","currentEntries","newEntries","currentValue","newValue","removeAttribute","updateClassName","inputEl","selectionStateJson","parse","updateStyle","innerHTML","__html","endsWith","extra","className","extraArray","join","style","cssText","extraObject","applyExtraStyles","addExtraClass","forceSingle","classNames","split","cn","classList","removeExtraClass","remove","toggleExtraClass","force","toggle","setExtraStyles","styles","standardStyles","setProperty","assign","child","filter","a","indexOf","TeactDOM","logUnequalProps","incrementOverlayCounter","orderBy","isSignal","Symbol","DEBUG_RENDER_THRESHOLD","DEBUG_EFFECT_THRESHOLD","DEBUG_SILENT_RENDERS_FOR","lastComponentId","renderingInstance","source","buildFragmentElement","createComponentInstance","buildTagElement","buildChildren","id","buildComponentElement","noEmpty","cleanChildren","dropEmptyTail","isArray","buildChildElement","isEmptyPlaceholder","slice","String","DEBUG_components","TOTAL","renders","DEBUG_memos","DEBUG_MEMOS_CALLS_THRESHOLD","map","avgRenderTime","state","Number","toFixed","calls","hitRate","instancesPendingUpdate","idsToExcludeFromUpdate","pendingEffects","pendingCleanups","pendingLayoutEffects","pendingLayoutCleanups","areImmediateEffectsCaptured","instancesToUpdate","sort","b","currentCleanups","currentEffects","prepareComponentForFrame","instance","forceUpdateComponent","runCapturedImmediateEffects","currentLayoutCleanups","currentLayoutEffects","newRenderedValue","hooks","cursor","effects","memos","refs","DEBUG_startAt","componentName","DEBUG_resolveComponentName","log","performance","now","duration","round","renderedValue","$old","byCursor","effect","cleanup","releaseSignals","Unmounted","helpGc","hook","schedule","dependencies","nextValue","setter","currentElement","useState","initial","debugKey","useEffectBase","isLayout","runEffectCleanup","runEffect","effectId","some","dependency","causedBy","res","prevValue","isFirstRun","setupSignals","cleanups","signal","subscribe","useEffect","useLayoutEffect","useMemo","resolver","debugHitRateKey","DEBUG_state","instanceKey","misses","msg","useCallback","newCallback","useRef","memo","TeactMemoWrapper","DEBUG_contentComponentName","arePropsShallowEqual","currentProps","newProps","currentKeys","currentKeysLength","newKeysLength","createCallbackManager","callbacks","addCallback","removeCallback","runCallbacks","callback","hasCallbacks","Boolean","throttle","KEYS_TO_IGNORE","MIN_RENDERS_TO_SHOW","MIN_DURATION_TO_SHOW","BG_GREEN","counters","renderCountersThrottled","renderCounters","loggerEl","debugToOverlay","text","setupOverlay","date","Date","dateFormatted","toLocaleTimeString","getMilliseconds","wasAtBottom","scrollTop","scrollHeight","offsetHeight","lastUpdateAt","halfSecondAgo","maxRenders","maxDuration","factorToHex","clearEl","innerText","factor","toString","padStart","handleErrorEvent","ErrorEvent","message","handleError","reason","err","collection","orderRule","mode","compareValues","currentOrderRule","isAsc","aValue","bValue","mode1","mode2","orderRule1","orderRule2","isAsc1","isAsc2","array","SAFE_EXEC_ENABLED","rescue","always","ms","shouldRunFirst","interval","isPending","_args","self","setInterval","clearInterval","throttleWithTickEnd","onTickEnd","schedulerFn","waiting","onIdle","timeout","requestIdleCallback","FAST_RAF_TIMEOUT_FALLBACK_MS","fastRafCallbacks","fastRafFallbackCallbacks","fastRafFallbackTimeout","withTimeoutFallback","requestAnimationFrame","currentCallbacks","clearTimeout","setTimeout","currentTimeoutCallbacks","onTickEndCallbacks","beforeUnloadCallbacks","onBeforeUnload","isLast","unshift","SIGNAL_MARK","obj","unsubscribesByEffect","currentEffect","createSignal","unsubscribe","unsubscribes","getter","cleanupEffect","React","getElementById","App","Child","Checkbox","isChecked","setIsChecked","handleCheck"],"sourceRoot":""}