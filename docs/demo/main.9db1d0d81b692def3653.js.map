{"version":3,"file":"main.9db1d0d81b692def3653.js","mappings":"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","sources":["webpack://teact/./src/config.ts","webpack://teact/./src/lib/fasterdom/fasterdom.ts","webpack://teact/./src/lib/fasterdom/layoutCauses.ts","webpack://teact/./src/lib/fasterdom/stricterdom.ts","webpack://teact/./src/teact/dom-events.ts","webpack://teact/./src/teact/teact-dom.ts","webpack://teact/./src/teact/teact.ts","webpack://teact/./src/util/arePropsShallowEqual.ts","webpack://teact/./src/util/callbacks.ts","webpack://teact/./src/util/debugOverlay.ts","webpack://teact/./src/util/handleError.ts","webpack://teact/./src/util/iteratees.ts","webpack://teact/./src/util/safeExec.ts","webpack://teact/./src/util/schedulers.ts","webpack://teact/./src/util/signals.ts","webpack://teact/webpack/bootstrap","webpack://teact/webpack/runtime/define property getters","webpack://teact/webpack/runtime/hasOwnProperty shorthand","webpack://teact/webpack/runtime/make namespace object","webpack://teact/./demo/index.tsx"],"sourcesContent":["export const DEBUG = false;\nexport const DEBUG_MORE = false;\n","import { fastRaf, throttleWith } from '../../util/schedulers';\nimport safeExec from '../../util/safeExec';\n\nimport { setPhase } from './stricterdom';\n\nlet pendingMeasureTasks: NoneToVoidFunction[] = [];\nlet pendingMutationTasks: NoneToVoidFunction[] = [];\nlet pendingForceReflowTasks: (() => NoneToVoidFunction | void)[] = [];\n\nconst runUpdatePassOnRaf = throttleWithRafFallback(() => {\n  const currentMeasureTasks = pendingMeasureTasks;\n  pendingMeasureTasks = [];\n  currentMeasureTasks.forEach((task) => {\n    safeExec(task);\n  });\n\n  // We use promises to provide correct order for Mutation Observer callback microtasks\n  Promise.resolve()\n    .then(() => {\n      setPhase('mutate');\n\n      const currentMutationTasks = pendingMutationTasks;\n      pendingMutationTasks = [];\n\n      currentMutationTasks.forEach((task) => {\n        safeExec(task);\n      });\n    })\n    .then(() => {\n      setPhase('measure');\n\n      const pendingForceReflowMutationTasks: NoneToVoidFunction[] = [];\n      // Will include tasks created during the loop\n      for (const task of pendingForceReflowTasks) {\n        safeExec(() => {\n          const mutationTask = task();\n          if (mutationTask) {\n            pendingForceReflowMutationTasks.push(mutationTask);\n          }\n        });\n      }\n      pendingForceReflowTasks = [];\n\n      return pendingForceReflowMutationTasks;\n    })\n    .then((pendingForceReflowMutationTasks) => {\n      setPhase('mutate');\n\n      // Will include tasks created during the loop\n      for (const task of pendingForceReflowMutationTasks) {\n        safeExec(task);\n      }\n    })\n    .then(() => {\n      setPhase('measure');\n    });\n});\n\nexport function requestMeasure(cb: NoneToVoidFunction) {\n  pendingMeasureTasks.push(cb);\n  runUpdatePassOnRaf();\n}\n\nexport function requestMutation(cb: NoneToVoidFunction) {\n  pendingMutationTasks.push(cb);\n  runUpdatePassOnRaf();\n}\n\nexport function requestNextMutation(cb: () => (NoneToVoidFunction | void)) {\n  requestMeasure(() => {\n    requestMutation(cb);\n  });\n}\n\nexport function requestForcedReflow(cb: () => (NoneToVoidFunction | void)) {\n  pendingForceReflowTasks.push(cb);\n  runUpdatePassOnRaf();\n}\n\nfunction throttleWithRafFallback<F extends AnyToVoidFunction>(fn: F) {\n  return throttleWith((throttledFn: NoneToVoidFunction) => {\n    fastRaf(throttledFn, true);\n  }, fn);\n}\n\nexport * from './stricterdom';\n","// https://gist.github.com/paulirish/5d52fb081b3570c81e3a\n\nexport default {\n  Element: {\n    props: [\n      'clientLeft', 'clientTop', 'clientWidth', 'clientHeight',\n      'scrollWidth', 'scrollHeight', 'scrollLeft', 'scrollTop',\n    ] as const,\n    methods: [\n      'getClientRects', 'getBoundingClientRect',\n      'scrollBy', 'scrollTo', 'scrollIntoView', 'scrollIntoViewIfNeeded',\n    ] as const,\n  },\n  HTMLElement: {\n    props: [\n      'offsetLeft', 'offsetTop', 'offsetWidth', 'offsetHeight', 'offsetParent',\n      'innerText',\n    ] as const,\n    methods: ['focus'] as const,\n  },\n  window: {\n    props: [\n      'scrollX', 'scrollY',\n      'innerHeight', 'innerWidth',\n    ] as const,\n    methods: ['getComputedStyle'] as const,\n  },\n  VisualViewport: {\n    props: [\n      'height', 'width', 'offsetTop', 'offsetLeft',\n    ] as const,\n  },\n  Document: {\n    props: ['scrollingElement'] as const,\n    methods: ['elementFromPoint'] as const,\n  },\n  HTMLInputElement: {\n    methods: ['select'] as const,\n  },\n  MouseEvent: {\n    props: ['layerX', 'layerY', 'offsetX', 'offsetY'] as const,\n  },\n  Range: {\n    methods: ['getClientRects', 'getBoundingClientRect'] as const,\n  },\n};\n","import LAYOUT_CAUSES from './layoutCauses';\n\ntype Entities = keyof typeof LAYOUT_CAUSES;\ntype Phase =\n  'measure'\n  | 'mutate';\ntype ErrorHandler = (error: Error) => any;\n\n// eslint-disable-next-line no-console\nconst DEFAULT_ERROR_HANDLER = console.error;\n\nlet onError: ErrorHandler = DEFAULT_ERROR_HANDLER;\n\nconst nativeMethods = new Map<string, AnyFunction>();\n\nlet phase: Phase = 'measure';\nlet isStrict = false;\nlet observer: MutationObserver | undefined;\n\nexport function setPhase(newPhase: Phase) {\n  phase = newPhase;\n}\n\nexport function getPhase() {\n  return phase;\n}\n\nexport function enableStrict() {\n  if (isStrict) return;\n\n  isStrict = true;\n  setupLayoutDetectors();\n  setupMutationObserver();\n}\n\nexport function disableStrict() {\n  if (!isStrict) return;\n\n  clearMutationObserver();\n  clearLayoutDetectors();\n  isStrict = false;\n}\n\nexport function forceMeasure(cb: () => any) {\n  if (phase !== 'mutate') {\n    throw new Error('The current phase is \\'measure\\'');\n  }\n\n  phase = 'measure';\n  const result = cb();\n  phase = 'mutate';\n\n  return result;\n}\n\nexport function setHandler(handler?: ErrorHandler) {\n  onError = handler || DEFAULT_ERROR_HANDLER;\n}\n\nfunction setupLayoutDetectors() {\n  Object.entries(LAYOUT_CAUSES).forEach(([name, causes]) => {\n    const entity = window[name as Entities];\n    if (!entity) return;\n    const prototype = typeof entity === 'object' ? entity : entity.prototype;\n\n    if ('props' in causes) {\n      causes.props.forEach((prop) => {\n        const nativeGetter = Object.getOwnPropertyDescriptor(prototype, prop)?.get;\n        if (!nativeGetter) {\n          return;\n        }\n\n        nativeMethods.set(`${name}#${prop}`, nativeGetter);\n\n        Object.defineProperty(prototype, prop, {\n          get() {\n            onMeasure(prop);\n\n            return nativeGetter.call(this);\n          },\n        });\n      });\n    }\n\n    if ('methods' in causes) {\n      causes.methods.forEach((method) => {\n        const nativeMethod = (prototype as any)[method]!;\n        nativeMethods.set(`${name}#${method}`, nativeMethod);\n\n        // eslint-disable-next-line func-names\n        (prototype as any)[method] = function (...args: any[]) {\n          onMeasure(method);\n\n          return nativeMethod.apply(this, args);\n        };\n      });\n    }\n  });\n}\n\nfunction clearLayoutDetectors() {\n  Object.entries(LAYOUT_CAUSES).forEach(([name, causes]) => {\n    const entity = window[name as Entities];\n    if (!entity) return;\n    const prototype = typeof entity === 'object' ? entity : entity.prototype;\n\n    if ('props' in causes) {\n      causes.props.forEach((prop) => {\n        const nativeGetter = nativeMethods.get(`${name}#${prop}`);\n        if (!nativeGetter) {\n          return;\n        }\n\n        Object.defineProperty(prototype, prop, { get: nativeGetter });\n      });\n    }\n\n    if ('methods' in causes) {\n      causes.methods.forEach((method) => {\n        (prototype as any)[method] = nativeMethods.get(`${name}#${method}`)!;\n      });\n    }\n  });\n\n  nativeMethods.clear();\n}\n\nfunction setupMutationObserver() {\n  observer = new MutationObserver((mutations) => {\n    if (phase !== 'mutate') {\n      mutations.forEach(({ target, type, attributeName }) => {\n        if (!document.contains(target)) {\n          return;\n        }\n\n        if (type === 'childList' && target instanceof HTMLElement && target.contentEditable) {\n          return;\n        }\n\n        if (attributeName?.startsWith('data-')) {\n          return;\n        }\n\n        // eslint-disable-next-line no-console\n        onError(new Error(`Unexpected mutation detected: \\`${type === 'attributes' ? attributeName : type}\\``));\n      });\n    }\n  });\n\n  observer.observe(document.body, {\n    childList: true,\n    attributes: true,\n    subtree: true,\n    characterData: false,\n  });\n}\n\nfunction clearMutationObserver() {\n  observer?.disconnect();\n  observer = undefined;\n}\n\nfunction onMeasure(propName: string) {\n  if (phase !== 'measure') {\n    onError(new Error(`Unexpected measurement detected: \\`${propName}\\``));\n  }\n}\n","import { DEBUG } from '../config';\n\ntype Handler = (e: Event) => void;\ntype DelegationRegistry = Map<HTMLElement, Handler>;\n\nconst NON_BUBBLEABLE_EVENTS = new Set(['scroll', 'mouseenter', 'mouseleave', 'load']);\n\nconst documentEventCounters: Record<string, number> = {};\nconst delegationRegistryByEventType: Record<string, DelegationRegistry> = {};\nconst delegatedEventTypesByElement = new Map<HTMLElement, Set<string>>();\n\nexport function addEventListener(element: HTMLElement, propName: string, handler: Handler, asCapture = false) {\n  const eventType = resolveEventType(propName, element);\n  if (canUseEventDelegation(eventType, element, asCapture)) {\n    addDelegatedListener(eventType, element, handler);\n  } else {\n    element.addEventListener(eventType, handler, asCapture);\n  }\n}\n\nexport function removeEventListener(element: HTMLElement, propName: string, handler: Handler, asCapture = false) {\n  const eventType = resolveEventType(propName, element);\n  if (canUseEventDelegation(eventType, element, asCapture)) {\n    removeDelegatedListener(eventType, element);\n  } else {\n    element.removeEventListener(eventType, handler, asCapture);\n  }\n}\n\nfunction resolveEventType(propName: string, element: HTMLElement) {\n  const eventType = propName\n    .replace(/^on/, '')\n    .replace(/Capture$/, '').toLowerCase();\n\n  if (eventType === 'change' && element.tagName !== 'SELECT') {\n    // React behavior repeated here.\n    // https://stackoverflow.com/questions/38256332/in-react-whats-the-difference-between-onchange-and-oninput\n    return 'input';\n  }\n\n  if (eventType === 'doubleclick') {\n    return 'dblclick';\n  }\n\n  // Replace focus/blur by their \"bubbleable\" versions\n  if (eventType === 'focus') {\n    return 'focusin';\n  }\n\n  if (eventType === 'blur') {\n    return 'focusout';\n  }\n\n  return eventType;\n}\n\nfunction canUseEventDelegation(realEventType: string, element: HTMLElement, asCapture: boolean) {\n  return (\n    !asCapture\n    && !NON_BUBBLEABLE_EVENTS.has(realEventType)\n    && element.tagName !== 'VIDEO'\n    && element.tagName !== 'IFRAME'\n  );\n}\n\nfunction addDelegatedListener(eventType: string, element: HTMLElement, handler: Handler) {\n  if (!documentEventCounters[eventType]) {\n    documentEventCounters[eventType] = 0;\n    document.addEventListener(eventType, handleEvent);\n  }\n\n  resolveDelegationRegistry(eventType).set(element, handler);\n  resolveDelegatedEventTypes(element).add(eventType);\n  documentEventCounters[eventType]++;\n}\n\nfunction removeDelegatedListener(eventType: string, element: HTMLElement) {\n  documentEventCounters[eventType]--;\n  if (!documentEventCounters[eventType]) {\n    // Synchronous deletion on 0 will cause perf degradation in the case of 1 element\n    // which is not a real case, so it's ok to do it this way\n    document.removeEventListener(eventType, handleEvent);\n  }\n\n  delegationRegistryByEventType[eventType].delete(element);\n  delegatedEventTypesByElement.get(element)!.delete(eventType);\n}\n\nexport function removeAllDelegatedListeners(element: HTMLElement) {\n  const eventTypes = delegatedEventTypesByElement.get(element);\n  if (!eventTypes) {\n    return;\n  }\n\n  eventTypes.forEach((eventType) => removeDelegatedListener(eventType, element));\n  delegatedEventTypesByElement.delete(element);\n}\n\nfunction handleEvent(realEvent: Event) {\n  const events = delegationRegistryByEventType[realEvent.type];\n\n  if (events) {\n    let furtherCallsPrevented = false;\n    let current: HTMLElement = realEvent.target as HTMLElement;\n\n    const stopPropagation = () => {\n      furtherCallsPrevented = true;\n    };\n\n    const preventDefault = () => {\n      realEvent.preventDefault();\n    };\n\n    // Proxy is a simplest way to provide an access to the event property\n    const event = new Proxy(realEvent, {\n      get(target, p) {\n        if (p === 'currentTarget') {\n          return current;\n        }\n        if (p === 'stopPropagation' || p === 'stopImmediatePropagation') {\n          return stopPropagation;\n        }\n        if (p === 'preventDefault') {\n          // \"this\" is changed to proxy and one can't call methods via it\n          return preventDefault;\n        }\n        return Reflect.get(target, p);\n      },\n    });\n\n    // This can also be limited by teact root\n    while (current && current !== document.body) {\n      const handler = events.get(current);\n      if (handler) {\n        handler(event);\n        if (furtherCallsPrevented) {\n          return;\n        }\n      }\n\n      current = current.parentNode as HTMLElement;\n    }\n  }\n}\n\nfunction resolveDelegationRegistry(eventType: string) {\n  if (!delegationRegistryByEventType[eventType]) {\n    delegationRegistryByEventType[eventType] = new Map();\n  }\n\n  return delegationRegistryByEventType[eventType];\n}\n\nfunction resolveDelegatedEventTypes(element: HTMLElement) {\n  const existing = delegatedEventTypesByElement.get(element);\n  if (existing) {\n    return existing;\n  }\n\n  const newSet = new Set<string>();\n  delegatedEventTypesByElement.set(element, newSet);\n\n  return newSet;\n}\n\nif (DEBUG) {\n  document.addEventListener('dblclick', () => {\n    const documentListenersCount = Object.keys(documentEventCounters).length;\n    const delegatedHandlersCount1 = Object.values(documentEventCounters)\n      .reduce((acc, counter) => acc + counter, 0);\n    const delegationRegistriesCount = Object.keys(delegationRegistryByEventType).length;\n    const delegatedHandlersCount2 = Object.values(delegationRegistryByEventType)\n      .reduce((acc, delegationRegistry) => acc + delegationRegistry.size, 0);\n    const delegationElementsCount = delegatedEventTypesByElement.size;\n    const delegatedEventTypesCount = Array.from(delegatedEventTypesByElement.values())\n      .reduce((acc, eventTypes) => acc + eventTypes.size, 0);\n\n    // eslint-disable-next-line no-console\n    console.warn('DELEGATED EVENTS STATS', {\n      delegatedHandlersCount1,\n      delegatedHandlersCount2,\n      delegatedEventTypesCount,\n      delegationRegistriesCount,\n      delegationElementsCount,\n      documentListenersCount,\n    });\n  });\n}\n","import type { ChangeEvent } from 'react';\nimport type {\n  VirtualElement,\n  VirtualElementChildren,\n  VirtualElementComponent,\n  VirtualElementFragment,\n  VirtualElementParent,\n  VirtualElementReal,\n  VirtualElementTag,\n} from './teact';\nimport {\n  captureImmediateEffects,\n  hasElementChanged,\n  isComponentElement,\n  isEmptyElement,\n  isFragmentElement,\n  isParentElement,\n  isTagElement,\n  isTextElement,\n  mountComponent,\n  MountState,\n  renderComponent,\n  unmountComponent,\n} from './teact';\nimport { DEBUG } from '../config';\nimport { addEventListener, removeAllDelegatedListeners, removeEventListener } from './dom-events';\nimport { unique } from '../util/iteratees';\n\ninterface VirtualDomHead {\n  children: [VirtualElement] | [];\n}\n\ninterface SelectionState {\n  selectionStart: number | null;\n  selectionEnd: number | null;\n  isCaretAtEnd: boolean;\n}\n\nconst FILTERED_ATTRIBUTES = new Set(['key', 'ref', 'teactFastList', 'teactOrderKey']);\nconst HTML_ATTRIBUTES = new Set(['dir', 'role', 'form']);\nconst CONTROLLABLE_TAGS = ['INPUT', 'TEXTAREA', 'SELECT'];\nconst MAPPED_ATTRIBUTES: { [k: string]: string } = {\n  autoPlay: 'autoplay',\n  autoComplete: 'autocomplete',\n};\nconst INDEX_KEY_PREFIX = '__indexKey#';\n\nconst headsByElement = new WeakMap<Element, VirtualDomHead>();\nconst extraClasses = new WeakMap<Element, Set<string>>();\n\n// eslint-disable-next-line @typescript-eslint/naming-convention\nlet DEBUG_virtualTreeSize = 1;\n\nfunction render($element: VirtualElement | undefined, parentEl: HTMLElement) {\n  if (!headsByElement.has(parentEl)) {\n    headsByElement.set(parentEl, { children: [] });\n  }\n\n  const runImmediateEffects = captureImmediateEffects();\n  const $head = headsByElement.get(parentEl)!;\n  const $newElement = renderWithVirtual(parentEl, $head.children[0], $element, $head, 0);\n  runImmediateEffects?.();\n\n  $head.children = $newElement ? [$newElement] : [];\n\n  return undefined;\n}\n\nfunction renderWithVirtual<T extends VirtualElement | undefined>(\n  parentEl: HTMLElement,\n  $current: VirtualElement | undefined,\n  $new: T,\n  $parent: VirtualElementParent | VirtualDomHead,\n  index: number,\n  options: {\n    skipComponentUpdate?: boolean;\n    nextSibling?: ChildNode;\n    forceMoveToEnd?: boolean;\n    fragment?: DocumentFragment;\n  } = {},\n): T {\n  const { skipComponentUpdate, fragment } = options;\n  let { nextSibling } = options;\n\n  const isCurrentComponent = $current && isComponentElement($current);\n  const isNewComponent = $new && isComponentElement($new);\n  const $newAsReal = $new as VirtualElementReal;\n\n  const isCurrentFragment = $current && !isCurrentComponent && isFragmentElement($current);\n  const isNewFragment = $new && !isNewComponent && isFragmentElement($new);\n\n  if (\n    !skipComponentUpdate\n    && isCurrentComponent && isNewComponent\n    && !hasElementChanged($current!, $new!)\n  ) {\n    $new = updateComponent($current, $new as VirtualElementComponent) as typeof $new;\n  }\n\n  // Parent element may have changed, so we need to update the listener closure.\n  if (\n    !skipComponentUpdate\n    && isNewComponent\n    && ($new as VirtualElementComponent).componentInstance.mountState === MountState.Mounted\n  ) {\n    setupComponentUpdateListener(parentEl, $new as VirtualElementComponent, $parent, index);\n  }\n\n  if ($current === $new) {\n    return $new;\n  }\n\n  if (DEBUG && $new) {\n    const newTarget = 'target' in $new && $new.target;\n    if (newTarget && (!$current || ('target' in $current && newTarget !== $current.target))) {\n      throw new Error('[Teact] Cached virtual element was moved within tree');\n    }\n  }\n\n  if (!$current && $new) {\n    if (isNewComponent || isNewFragment) {\n      if (isNewComponent) {\n        $new = initComponent(parentEl, $new as VirtualElementComponent, $parent, index) as unknown as typeof $new;\n      }\n\n      mountChildren(parentEl, $new as VirtualElementComponent | VirtualElementFragment, { nextSibling, fragment });\n    } else {\n      if ($parent.children.length === 1 && (isTextElement($newAsReal) || isEmptyElement($newAsReal))) {\n        parentEl.textContent = 'value' in $newAsReal ? $newAsReal.value : '';\n        $newAsReal.target = parentEl.firstChild!;\n      } else {\n        const node = createNode($newAsReal);\n        $newAsReal.target = node;\n        insertBefore(fragment || parentEl, node, nextSibling);\n\n        if (isTagElement($newAsReal)) {\n          setElementRef($newAsReal, node as HTMLElement);\n        }\n      }\n    }\n  } else if ($current && !$new) {\n    remount(parentEl, $current, undefined);\n  } else if ($current && $new) {\n    if (hasElementChanged($current, $new)) {\n      if (!nextSibling) {\n        nextSibling = getNextSibling($current);\n      }\n\n      if (isNewComponent || isNewFragment) {\n        if (isNewComponent) {\n          $new = initComponent(parentEl, $new as VirtualElementComponent, $parent, index) as unknown as typeof $new;\n        }\n\n        remount(parentEl, $current, undefined);\n        mountChildren(parentEl, $new as VirtualElementComponent | VirtualElementFragment, { nextSibling, fragment });\n      } else {\n        const canSetText = $parent.children.length === 1\n          && (isTextElement($newAsReal) || isEmptyElement($newAsReal))\n          && (isTextElement($current) || isEmptyElement($current))\n          && (!parentEl.firstChild || parentEl.firstChild === $current.target);\n\n        if (canSetText) {\n          const value = 'value' in $newAsReal ? $newAsReal.value : '';\n          if (parentEl.firstChild) {\n            parentEl.firstChild.nodeValue = value;\n          } else {\n            parentEl.textContent = value;\n          }\n          $newAsReal.target = parentEl.firstChild!;\n        } else {\n          const node = createNode($newAsReal);\n          $newAsReal.target = node;\n          remount(parentEl, $current, node, nextSibling);\n\n          if (isTagElement($newAsReal)) {\n            setElementRef($newAsReal, node as HTMLElement);\n          }\n        }\n      }\n    } else {\n      const isComponent = isCurrentComponent && isNewComponent;\n      const isFragment = isCurrentFragment && isNewFragment;\n\n      if (isComponent || isFragment) {\n        ($new as VirtualElementComponent | VirtualElementFragment).children = renderChildren(\n          $current,\n          $new as VirtualElementComponent | VirtualElementFragment,\n          parentEl,\n          nextSibling,\n          options.forceMoveToEnd,\n        );\n      } else {\n        const $currentAsReal = $current as VirtualElementReal;\n        const currentTarget = $currentAsReal.target!;\n\n        $newAsReal.target = currentTarget;\n        $currentAsReal.target = undefined; // Help GC\n\n        const isTag = isTagElement($current);\n        if (isTag) {\n          const $newAsTag = $new as VirtualElementTag;\n\n          setElementRef($current, undefined);\n          setElementRef($newAsTag, currentTarget as HTMLElement);\n\n          if (nextSibling || options.forceMoveToEnd) {\n            insertBefore(parentEl, currentTarget, nextSibling);\n          }\n\n          updateAttributes($current, $newAsTag, currentTarget as HTMLElement);\n\n          renderChildren(\n            $current,\n            $newAsTag,\n            currentTarget as HTMLElement,\n          );\n        }\n      }\n    }\n  }\n\n  return $new;\n}\n\nfunction initComponent(\n  parentEl: HTMLElement,\n  $element: VirtualElementComponent,\n  $parent: VirtualElementParent | VirtualDomHead,\n  index: number,\n) {\n  const { componentInstance } = $element;\n\n  if (componentInstance.mountState === MountState.New) {\n    $element = mountComponent(componentInstance);\n    setupComponentUpdateListener(parentEl, $element, $parent, index);\n\n    const $firstChild = $element.children[0];\n    if (isComponentElement($firstChild)) {\n      $element.children[0] = initComponent(parentEl, $firstChild, $element, 0);\n    }\n  }\n\n  return $element;\n}\n\nfunction updateComponent($current: VirtualElementComponent, $new: VirtualElementComponent) {\n  $current.componentInstance.props = $new.componentInstance.props;\n\n  return renderComponent($current.componentInstance);\n}\n\nfunction setupComponentUpdateListener(\n  parentEl: HTMLElement,\n  $element: VirtualElementComponent,\n  $parent: VirtualElementParent | VirtualDomHead,\n  index: number,\n) {\n  const { componentInstance } = $element;\n\n  componentInstance.onUpdate = () => {\n    $parent.children[index] = renderWithVirtual(\n      parentEl,\n      $parent.children[index],\n      componentInstance.$element,\n      $parent,\n      index,\n      { skipComponentUpdate: true },\n    );\n  };\n}\n\nfunction mountChildren(\n  parentEl: HTMLElement,\n  $element: VirtualElementComponent | VirtualElementFragment,\n  options: {\n    nextSibling?: ChildNode;\n    fragment?: DocumentFragment;\n  },\n) {\n  const { children } = $element;\n  for (let i = 0, l = children.length; i < l; i++) {\n    const $child = children[i];\n    const $newChild = renderWithVirtual(parentEl, undefined, $child, $element, i, options);\n\n    if ($newChild !== $child) {\n      children.splice(i, 1, $newChild);\n    }\n  }\n}\n\nfunction unmountChildren(parentEl: HTMLElement, $element: VirtualElementComponent | VirtualElementFragment) {\n  for (const $child of $element.children) {\n    renderWithVirtual(parentEl, $child, undefined, $element, -1);\n  }\n}\n\nfunction createNode($element: VirtualElementReal): Node {\n  if (isEmptyElement($element)) {\n    return document.createTextNode('');\n  }\n\n  if (isTextElement($element)) {\n    return document.createTextNode($element.value);\n  }\n\n  const { tag, props, children } = $element;\n  const element = document.createElement(tag);\n\n  processControlled(tag, props);\n\n  for (const key in props) {\n    if (!props.hasOwnProperty(key)) continue;\n\n    if (props[key] !== undefined) {\n      setAttribute(element, key, props[key]);\n    }\n  }\n\n  processUncontrolledOnMount(element, props);\n\n  for (let i = 0, l = children.length; i < l; i++) {\n    const $current = children[i];\n    const $new = renderWithVirtual(element, undefined, $current, $element, i);\n\n    if ($new !== $current) {\n      children.splice(i, 1, $new);\n    }\n  }\n\n  return element;\n}\n\nfunction remount(\n  parentEl: HTMLElement,\n  $current: VirtualElement,\n  node: Node | undefined,\n  componentNextSibling?: ChildNode,\n) {\n  const isComponent = isComponentElement($current);\n  const isFragment = !isComponent && isFragmentElement($current);\n\n  if (isComponent || isFragment) {\n    if (isComponent) {\n      unmountComponent($current.componentInstance);\n    }\n\n    unmountChildren(parentEl, $current);\n\n    if (node) {\n      insertBefore(parentEl, node, componentNextSibling);\n    }\n  } else {\n    if (node) {\n      parentEl.replaceChild(node, $current.target!);\n    } else {\n      parentEl.removeChild($current.target!);\n    }\n\n    unmountRealTree($current);\n  }\n}\n\nfunction unmountRealTree($element: VirtualElement) {\n  if (isComponentElement($element)) {\n    unmountComponent($element.componentInstance);\n  } else if (!isFragmentElement($element)) {\n    if (isTagElement($element)) {\n      extraClasses.delete($element.target!);\n      removeAllDelegatedListeners($element.target!);\n      setElementRef($element, undefined);\n    }\n\n    $element.target = undefined; // Help GC\n\n    if (!isParentElement($element)) {\n      return;\n    }\n  }\n\n  for (const $child of $element.children) {\n    unmountRealTree($child);\n  }\n}\n\nfunction insertBefore(parentEl: HTMLElement | DocumentFragment, node: Node, nextSibling?: ChildNode) {\n  if (nextSibling) {\n    parentEl.insertBefore(node, nextSibling);\n  } else {\n    parentEl.appendChild(node);\n  }\n}\n\nfunction getNextSibling($current: VirtualElement): ChildNode | undefined {\n  if (isComponentElement($current) || isFragmentElement($current)) {\n    const lastChild = $current.children[$current.children.length - 1];\n    return getNextSibling(lastChild);\n  }\n\n  return $current.target!.nextSibling || undefined;\n}\n\nfunction renderChildren(\n  $current: VirtualElementParent,\n  $new: VirtualElementParent,\n  currentEl: HTMLElement,\n  nextSibling?: ChildNode,\n  forceMoveToEnd = false,\n) {\n  if (DEBUG) {\n    DEBUG_checkKeyUniqueness($new.children);\n  }\n\n  if (('props' in $new) && $new.props.teactFastList) {\n    return renderFastListChildren($current, $new, currentEl);\n  }\n\n  const currentChildren = $current.children;\n  const newChildren = $new.children;\n\n  const currentChildrenLength = currentChildren.length;\n  const newChildrenLength = newChildren.length;\n  const maxLength = Math.max(currentChildrenLength, newChildrenLength);\n\n  const fragment = newChildrenLength > currentChildrenLength ? document.createDocumentFragment() : undefined;\n  const lastCurrentChild = $current.children[currentChildrenLength - 1];\n  const fragmentNextSibling = fragment && (\n    nextSibling || (lastCurrentChild ? getNextSibling(lastCurrentChild) : undefined)\n  );\n\n  for (let i = 0; i < maxLength; i++) {\n    const $newChild = renderWithVirtual(\n      currentEl,\n      currentChildren[i],\n      newChildren[i],\n      $new,\n      i,\n      i >= currentChildrenLength ? { fragment } : { nextSibling, forceMoveToEnd },\n    );\n\n    if ($newChild && $newChild !== newChildren[i]) {\n      newChildren.splice(i, 1, $newChild);\n    }\n  }\n\n  if (fragment) {\n    insertBefore(currentEl, fragment, fragmentNextSibling);\n  }\n\n  return newChildren;\n}\n\n// This function allows to prepend/append a bunch of new DOM nodes to the top/bottom of preserved ones.\n// It also allows to selectively move particular preserved nodes within their DOM list.\nfunction renderFastListChildren($current: VirtualElementParent, $new: VirtualElementParent, currentEl: HTMLElement) {\n  const newKeys = new Set(\n    $new.children.map(($newChild) => {\n      const key = 'props' in $newChild ? $newChild.props.key : undefined;\n\n      if (DEBUG && isParentElement($newChild)) {\n        // eslint-disable-next-line no-null/no-null\n        if (key === undefined || key === null) {\n          // eslint-disable-next-line no-console\n          console.warn('Missing `key` in `teactFastList`');\n        }\n\n        if (isFragmentElement($newChild)) {\n          throw new Error('[Teact] Fragment can not be child of container with `teactFastList`');\n        }\n      }\n\n      return key;\n    }),\n  );\n\n  // Build a collection of old children that also remain in the new list\n  let currentRemainingIndex = 0;\n  const remainingByKey = $current.children\n    .reduce((acc, $currentChild, i) => {\n      let key = 'props' in $currentChild ? $currentChild.props.key : undefined;\n      // eslint-disable-next-line no-null/no-null\n      const isKeyPresent = key !== undefined && key !== null;\n\n      // First we process removed children\n      if (isKeyPresent && !newKeys.has(key)) {\n        renderWithVirtual(currentEl, $currentChild, undefined, $new, -1);\n\n        return acc;\n      } else if (!isKeyPresent) {\n        const $newChild = $new.children[i];\n        const newChildKey = ($newChild && 'props' in $newChild) ? $newChild.props.key : undefined;\n        // If a non-key element remains at the same index we preserve it with a virtual `key`\n        if ($newChild && !newChildKey) {\n          key = `${INDEX_KEY_PREFIX}${i}`;\n          // Otherwise, we just remove it\n        } else {\n          renderWithVirtual(currentEl, $currentChild, undefined, $new, -1);\n\n          return acc;\n        }\n      }\n\n      // Then we build up info about remaining children\n      acc[key] = {\n        $element: $currentChild,\n        index: currentRemainingIndex++,\n        orderKey: 'props' in $currentChild ? $currentChild.props.teactOrderKey : undefined,\n      };\n      return acc;\n    }, {} as Record<string, { $element: VirtualElement; index: number; orderKey?: number }>);\n\n  let newChildren: VirtualElement[] = [];\n\n  let fragmentElements: VirtualElement[] | undefined;\n  let fragmentIndex: number | undefined;\n\n  let currentPreservedIndex = 0;\n\n  $new.children.forEach(($newChild, i) => {\n    const key = 'props' in $newChild ? $newChild.props.key : `${INDEX_KEY_PREFIX}${i}`;\n    const currentChildInfo = remainingByKey[key];\n\n    if (!currentChildInfo) {\n      if (!fragmentElements) {\n        fragmentElements = [];\n        fragmentIndex = i;\n      }\n\n      fragmentElements.push($newChild);\n      return;\n    }\n\n    // This prepends new children to the top\n    if (fragmentElements) {\n      newChildren = newChildren.concat(renderFragment(fragmentElements, fragmentIndex!, currentEl, $new));\n      fragmentElements = undefined;\n      fragmentIndex = undefined;\n    }\n\n    // Now we check if a preserved node was moved within preserved list\n    const newOrderKey = 'props' in $newChild ? $newChild.props.teactOrderKey : undefined;\n    // That is indicated by a changed `teactOrderKey` value\n    const shouldMoveNode = (\n      currentChildInfo.index !== currentPreservedIndex && (!newOrderKey || currentChildInfo.orderKey !== newOrderKey)\n    );\n    const isMovingDown = shouldMoveNode && currentPreservedIndex > currentChildInfo.index;\n\n    if (!shouldMoveNode || isMovingDown) {\n      currentPreservedIndex++;\n    }\n\n    const nextSibling = currentEl.childNodes[isMovingDown ? i + 1 : i];\n    const options = shouldMoveNode ? (nextSibling ? { nextSibling } : { forceMoveToEnd: true }) : undefined;\n\n    newChildren.push(renderWithVirtual(currentEl, currentChildInfo.$element, $newChild, $new, i, options));\n  });\n\n  // This appends new children to the bottom\n  if (fragmentElements) {\n    newChildren = newChildren.concat(renderFragment(fragmentElements, fragmentIndex!, currentEl, $new));\n  }\n\n  return newChildren;\n}\n\nfunction renderFragment(\n  elements: VirtualElement[], fragmentIndex: number, parentEl: HTMLElement, $parent: VirtualElementParent,\n) {\n  const nextSibling = parentEl.childNodes[fragmentIndex];\n\n  if (elements.length === 1) {\n    return [renderWithVirtual(parentEl, undefined, elements[0], $parent, fragmentIndex, { nextSibling })];\n  }\n\n  const fragment = document.createDocumentFragment();\n  const newChildren = elements.map(($element, i) => (\n    renderWithVirtual(parentEl, undefined, $element, $parent, fragmentIndex + i, { fragment })\n  ));\n\n  insertBefore(parentEl, fragment, nextSibling);\n\n  return newChildren;\n}\n\nfunction setElementRef($element: VirtualElementTag, htmlElement: HTMLElement | undefined) {\n  const { ref } = $element.props;\n\n  if (typeof ref === 'object') {\n    ref.current = htmlElement;\n  } else if (typeof ref === 'function') {\n    ref(htmlElement);\n  }\n}\n\nfunction processControlled(tag: string, props: AnyLiteral) {\n  const isValueControlled = props.value !== undefined;\n  const isCheckedControlled = props.checked !== undefined;\n  const isControlled = (isValueControlled || isCheckedControlled) && CONTROLLABLE_TAGS.includes(tag.toUpperCase());\n  if (!isControlled) {\n    return;\n  }\n\n  const {\n    value, checked, onInput, onChange,\n  } = props;\n\n  props.onChange = undefined;\n  props.onInput = (e: ChangeEvent<HTMLInputElement>) => {\n    onInput?.(e);\n    onChange?.(e);\n\n    if (value !== undefined && value !== e.currentTarget.value) {\n      const { selectionStart, selectionEnd } = e.currentTarget;\n      const isCaretAtEnd = selectionStart === selectionEnd && selectionEnd === e.currentTarget.value.length;\n\n      e.currentTarget.value = value;\n\n      if (typeof selectionStart === 'number' && typeof selectionEnd === 'number') {\n        e.currentTarget.setSelectionRange(selectionStart, selectionEnd);\n\n        const selectionState: SelectionState = { selectionStart, selectionEnd, isCaretAtEnd };\n        // eslint-disable-next-line no-underscore-dangle\n        e.currentTarget.dataset.__teactSelectionState = JSON.stringify(selectionState);\n      }\n    }\n\n    if (checked !== undefined) {\n      e.currentTarget.checked = checked;\n    }\n  };\n}\n\nfunction processUncontrolledOnMount(element: HTMLElement, props: AnyLiteral) {\n  if (!CONTROLLABLE_TAGS.includes(element.tagName)) {\n    return;\n  }\n\n  if (props.defaultValue) {\n    setAttribute(element, 'value', props.defaultValue);\n  }\n\n  if (props.defaultChecked) {\n    setAttribute(element, 'checked', props.defaultChecked);\n  }\n}\n\nfunction updateAttributes($current: VirtualElementTag, $new: VirtualElementTag, element: HTMLElement) {\n  processControlled(element.tagName, $new.props);\n\n  const currentEntries = Object.entries($current.props);\n  const newEntries = Object.entries($new.props);\n\n  currentEntries.forEach(([key, currentValue]) => {\n    const newValue = $new.props[key];\n\n    if (\n      currentValue !== undefined\n      && (\n        newValue === undefined\n        || (currentValue !== newValue && key.startsWith('on'))\n      )\n    ) {\n      removeAttribute(element, key, currentValue);\n    }\n  });\n\n  newEntries.forEach(([key, newValue]) => {\n    const currentValue = $current.props[key];\n\n    if (newValue !== undefined && newValue !== currentValue) {\n      setAttribute(element, key, newValue);\n    }\n  });\n}\n\nfunction setAttribute(element: HTMLElement, key: string, value: any) {\n  if (key === 'className') {\n    updateClassName(element, value);\n  } else if (key === 'value') {\n    const inputEl = element as HTMLInputElement;\n\n    if (inputEl.value !== value) {\n      inputEl.value = value;\n\n      // eslint-disable-next-line no-underscore-dangle\n      const selectionStateJson = inputEl.dataset.__teactSelectionState;\n      if (selectionStateJson) {\n        const { selectionStart, selectionEnd, isCaretAtEnd } = JSON.parse(selectionStateJson) as SelectionState;\n\n        if (isCaretAtEnd) {\n          const length = inputEl.value.length;\n          inputEl.setSelectionRange(length, length);\n        } else if (typeof selectionStart === 'number' && typeof selectionEnd === 'number') {\n          inputEl.setSelectionRange(selectionStart, selectionEnd);\n        }\n      }\n    }\n  } else if (key === 'style') {\n    element.style.cssText = value;\n  } else if (key === 'dangerouslySetInnerHTML') {\n    // eslint-disable-next-line no-underscore-dangle\n    element.innerHTML = value.__html;\n  } else if (key.startsWith('on')) {\n    addEventListener(element, key, value, key.endsWith('Capture'));\n  } else if (key.startsWith('data-') || key.startsWith('aria-') || HTML_ATTRIBUTES.has(key)) {\n    element.setAttribute(key, value);\n  } else if (!FILTERED_ATTRIBUTES.has(key)) {\n    (element as any)[MAPPED_ATTRIBUTES[key] || key] = value;\n  }\n}\n\nfunction removeAttribute(element: HTMLElement, key: string, value: any) {\n  if (key === 'className') {\n    updateClassName(element, '');\n  } else if (key === 'value') {\n    (element as HTMLInputElement).value = '';\n  } else if (key === 'style') {\n    element.style.cssText = '';\n  } else if (key === 'dangerouslySetInnerHTML') {\n    element.innerHTML = '';\n  } else if (key.startsWith('on')) {\n    removeEventListener(element, key, value, key.endsWith('Capture'));\n  } else if (!FILTERED_ATTRIBUTES.has(key)) {\n    element.removeAttribute(key);\n  }\n}\n\nfunction updateClassName(element: HTMLElement, value: string) {\n  const extra = extraClasses.get(element);\n  if (!extra) {\n    element.className = value;\n    return;\n  }\n\n  const extraArray = Array.from(extra);\n  if (value) {\n    extraArray.push(value);\n  }\n\n  element.className = extraArray.join(' ');\n}\n\nexport function addExtraClass(element: Element, className: string, forceSingle = false) {\n  if (!forceSingle) {\n    const classNames = className.split(' ');\n    if (classNames.length > 1) {\n      classNames.forEach((cn) => {\n        addExtraClass(element, cn, true);\n      });\n\n      return;\n    }\n  }\n\n  element.classList.add(className);\n\n  const classList = extraClasses.get(element);\n  if (classList) {\n    classList.add(className);\n  } else {\n    extraClasses.set(element, new Set([className]));\n  }\n}\n\nexport function removeExtraClass(element: Element, className: string, forceSingle = false) {\n  if (!forceSingle) {\n    const classNames = className.split(' ');\n    if (classNames.length > 1) {\n      classNames.forEach((cn) => {\n        removeExtraClass(element, cn, true);\n      });\n\n      return;\n    }\n  }\n\n  element.classList.remove(className);\n\n  const classList = extraClasses.get(element);\n  if (classList) {\n    classList.delete(className);\n\n    if (!classList.size) {\n      extraClasses.delete(element);\n    }\n  }\n}\n\nexport function toggleExtraClass(element: Element, className: string, force?: boolean, forceSingle = false) {\n  if (!forceSingle) {\n    const classNames = className.split(' ');\n    if (classNames.length > 1) {\n      classNames.forEach((cn) => {\n        toggleExtraClass(element, cn, force, true);\n      });\n\n      return;\n    }\n  }\n\n  element.classList.toggle(className, force);\n\n  if (element.classList.contains(className)) {\n    addExtraClass(element, className);\n  } else {\n    removeExtraClass(element, className);\n  }\n}\n\n// eslint-disable-next-line @typescript-eslint/naming-convention\nfunction DEBUG_checkKeyUniqueness(children: VirtualElementChildren) {\n  const firstChild = children[0];\n  if (firstChild && 'props' in firstChild && firstChild.props.key !== undefined) {\n    const keys = children.reduce((acc: any[], child) => {\n      if ('props' in child && child.props.key) {\n        acc.push(child.props.key);\n      }\n\n      return acc;\n    }, []);\n\n    if (keys.length !== unique(keys).length) {\n      // eslint-disable-next-line no-console\n      console.warn('[Teact] Duplicated keys:', keys.filter((e, i, a) => a.indexOf(e) !== i));\n      throw new Error('[Teact] Children keys are not unique');\n    }\n  }\n}\n\nconst TeactDOM = { render };\nexport default TeactDOM;\n","import type { ReactElement } from 'react';\n\nimport { DEBUG, DEBUG_MORE } from '../config';\nimport { logUnequalProps } from '../util/arePropsShallowEqual';\nimport { incrementOverlayCounter } from '../util/debugOverlay';\nimport { orderBy } from '../util/iteratees';\nimport safeExec from '../util/safeExec';\nimport { throttleWith } from '../util/schedulers';\nimport { isSignal } from '../util/signals';\nimport { requestMeasure, requestMutation } from '../lib/fasterdom/fasterdom';\n\nexport type Props = AnyLiteral;\nexport type FC<P extends Props = any> = (props: P) => any;\n// eslint-disable-next-line @typescript-eslint/naming-convention\nexport type FC_withDebug =\n  FC\n  & { DEBUG_contentComponentName?: string };\n\nexport enum VirtualElementTypesEnum {\n  Empty,\n  Text,\n  Tag,\n  Component,\n  Fragment,\n}\n\ninterface VirtualElementEmpty {\n  type: VirtualElementTypesEnum.Empty;\n  target?: Node;\n}\n\ninterface VirtualElementText {\n  type: VirtualElementTypesEnum.Text;\n  target?: Node;\n  value: string;\n}\n\nexport interface VirtualElementTag {\n  type: VirtualElementTypesEnum.Tag;\n  target?: HTMLElement;\n  tag: string;\n  props: Props;\n  children: VirtualElementChildren;\n}\n\nexport interface VirtualElementComponent {\n  type: VirtualElementTypesEnum.Component;\n  componentInstance: ComponentInstance;\n  props: Props;\n  children: VirtualElementChildren;\n}\n\nexport interface VirtualElementFragment {\n  type: VirtualElementTypesEnum.Fragment;\n  children: VirtualElementChildren;\n}\n\nexport type StateHookSetter<T> = (newValue: ((current: T) => T) | T) => void;\n\nexport enum MountState {\n  New,\n  Mounted,\n  Unmounted,\n}\n\ninterface ComponentInstance {\n  id: number;\n  $element: VirtualElementComponent;\n  Component: FC;\n  name: string;\n  props: Props;\n  renderedValue?: any;\n  mountState: MountState;\n  hooks?: {\n    state?: {\n      cursor: number;\n      byCursor: {\n        value: any;\n        nextValue: any;\n        setter: StateHookSetter<any>;\n      }[];\n    };\n    effects?: {\n      cursor: number;\n      byCursor: {\n        dependencies?: readonly any[];\n        schedule: NoneToVoidFunction;\n        cleanup?: NoneToVoidFunction;\n        releaseSignals?: NoneToVoidFunction;\n      }[];\n    };\n    memos?: {\n      cursor: number;\n      byCursor: {\n        value: any;\n        dependencies: any[];\n      }[];\n    };\n    refs?: {\n      cursor: number;\n      byCursor: {\n        current: any;\n      }[];\n    };\n  };\n  prepareForFrame?: () => void;\n  forceUpdate?: () => void;\n  onUpdate?: () => void;\n}\n\nexport type VirtualElement =\n  VirtualElementEmpty\n  | VirtualElementText\n  | VirtualElementTag\n  | VirtualElementComponent\n  | VirtualElementFragment;\nexport type VirtualElementParent =\n  VirtualElementTag\n  | VirtualElementComponent\n  | VirtualElementFragment;\nexport type VirtualElementChildren = VirtualElement[];\nexport type VirtualElementReal = Exclude<VirtualElement, VirtualElementComponent | VirtualElementFragment>;\n\n// Compatibility with JSX types\nexport type TeactNode =\n  ReactElement\n  | string\n  | number\n  | boolean\n  | TeactNode[];\n\ntype Effect = () => (NoneToVoidFunction | void);\ntype EffectCleanup = NoneToVoidFunction;\n\nconst Fragment = Symbol('Fragment');\n\nconst DEBUG_RENDER_THRESHOLD = 7;\nconst DEBUG_EFFECT_THRESHOLD = 7;\nconst DEBUG_SILENT_RENDERS_FOR = new Set(['TeactMemoWrapper', 'TeactNContainer', 'Button', 'ListItem', 'MenuItem']);\n\nlet lastComponentId = 0;\nlet renderingInstance: ComponentInstance;\n\nexport function isEmptyElement($element: VirtualElement): $element is VirtualElementEmpty {\n  return $element.type === VirtualElementTypesEnum.Empty;\n}\n\nexport function isTextElement($element: VirtualElement): $element is VirtualElementText {\n  return $element.type === VirtualElementTypesEnum.Text;\n}\n\nexport function isTagElement($element: VirtualElement): $element is VirtualElementTag {\n  return $element.type === VirtualElementTypesEnum.Tag;\n}\n\nexport function isComponentElement($element: VirtualElement): $element is VirtualElementComponent {\n  return $element.type === VirtualElementTypesEnum.Component;\n}\n\nexport function isFragmentElement($element: VirtualElement): $element is VirtualElementFragment {\n  return $element.type === VirtualElementTypesEnum.Fragment;\n}\n\nexport function isParentElement($element: VirtualElement): $element is VirtualElementParent {\n  return isTagElement($element) || isComponentElement($element) || isFragmentElement($element);\n}\n\nfunction createElement(\n  source: string | FC | typeof Fragment,\n  props: Props,\n  ...children: any[]\n): VirtualElementParent | VirtualElementChildren {\n  if (source === Fragment) {\n    return buildFragmentElement(children);\n  } else if (typeof source === 'function') {\n    return createComponentInstance(source, props || {}, children);\n  } else {\n    return buildTagElement(source, props || {}, children);\n  }\n}\n\nfunction buildFragmentElement(children: any[]): VirtualElementFragment {\n  return {\n    type: VirtualElementTypesEnum.Fragment,\n    children: buildChildren(children, true),\n  };\n}\n\nfunction createComponentInstance(Component: FC, props: Props, children: any[]): VirtualElementComponent {\n  if (children?.length) {\n    props.children = children.length === 1 ? children[0] : children;\n  }\n\n  const componentInstance: ComponentInstance = {\n    id: ++lastComponentId,\n    $element: undefined as unknown as VirtualElementComponent,\n    Component,\n    name: Component.name,\n    props,\n    mountState: MountState.New,\n  };\n\n  componentInstance.$element = buildComponentElement(componentInstance);\n\n  return componentInstance.$element;\n}\n\nfunction buildComponentElement(\n  componentInstance: ComponentInstance,\n  children?: VirtualElementChildren,\n): VirtualElementComponent {\n  return {\n    type: VirtualElementTypesEnum.Component,\n    componentInstance,\n    props: componentInstance.props,\n    children: children ? buildChildren(children, true) : [],\n  };\n}\n\nfunction buildTagElement(tag: string, props: Props, children: any[]): VirtualElementTag {\n  return {\n    type: VirtualElementTypesEnum.Tag,\n    tag,\n    props,\n    children: buildChildren(children),\n  };\n}\n\nfunction buildChildren(children: any[], noEmpty = false): VirtualElement[] {\n  const cleanChildren = dropEmptyTail(children, noEmpty);\n  const newChildren = [];\n\n  for (let i = 0, l = cleanChildren.length; i < l; i++) {\n    const child = cleanChildren[i];\n    if (Array.isArray(child)) {\n      newChildren.push(...buildChildren(child, noEmpty));\n    } else {\n      newChildren.push(buildChildElement(child));\n    }\n  }\n\n  return newChildren;\n}\n\n// We only need placeholders in the middle of collection (to ensure other elements order).\nfunction dropEmptyTail(children: any[], noEmpty = false) {\n  let i = children.length - 1;\n\n  for (; i >= 0; i--) {\n    if (!isEmptyPlaceholder(children[i])) {\n      break;\n    }\n  }\n\n  if (i === children.length - 1) {\n    return children;\n  }\n\n  if (i === -1 && noEmpty) {\n    return children.slice(0, 1);\n  }\n\n  return children.slice(0, i + 1);\n}\n\nfunction isEmptyPlaceholder(child: any) {\n  return !child && child !== 0;\n}\n\nfunction buildChildElement(child: any): VirtualElement {\n  if (isEmptyPlaceholder(child)) {\n    return { type: VirtualElementTypesEnum.Empty };\n  } else if (isParentElement(child)) {\n    return child;\n  } else {\n    return {\n      type: VirtualElementTypesEnum.Text,\n      value: String(child),\n    };\n  }\n}\n\n// eslint-disable-next-line @typescript-eslint/naming-convention\nconst DEBUG_components: AnyLiteral = { TOTAL: { name: 'TOTAL', renders: 0 } };\n// eslint-disable-next-line @typescript-eslint/naming-convention\nconst DEBUG_memos: Record<string, { key: string; calls: number; misses: number; hitRate: number }> = {};\nconst DEBUG_MEMOS_CALLS_THRESHOLD = 20;\n\ndocument.addEventListener('dblclick', () => {\n  // eslint-disable-next-line no-console\n  console.warn('COMPONENTS', orderBy(\n    Object\n      .values(DEBUG_components)\n      .map(({ avgRenderTime, ...state }) => {\n        return { ...state, ...(avgRenderTime !== undefined && { avgRenderTime: Number(avgRenderTime.toFixed(2)) }) };\n      }),\n    'renders',\n    'desc',\n  ));\n\n  // eslint-disable-next-line no-console\n  console.warn('MEMOS', orderBy(\n    Object\n      .values(DEBUG_memos)\n      .filter(({ calls }) => calls >= DEBUG_MEMOS_CALLS_THRESHOLD)\n      .map((state) => ({ ...state, hitRate: Number(state.hitRate.toFixed(2)) })),\n    'hitRate',\n    'asc',\n  ));\n});\n\nlet instancesPendingUpdate = new Set<ComponentInstance>();\nlet idsToExcludeFromUpdate = new Set<number>();\nlet pendingEffects = new Map<string, Effect>();\nlet pendingCleanups = new Map<string, EffectCleanup>();\nlet pendingLayoutEffects = new Map<string, Effect>();\nlet pendingLayoutCleanups = new Map<string, EffectCleanup>();\nlet areImmediateEffectsCaptured = false;\n\n/*\n  Order:\n  - component effect cleanups\n  - component effects\n  - measure tasks\n  - mutation tasks\n  - component updates\n  - component layout effect cleanups\n  - component layout effects\n  - forced layout measure tasks\n  - forced layout mutation tasks\n */\n\nconst runUpdatePassOnRaf = throttleWith(requestMeasure, () => {\n  const runImmediateEffects = captureImmediateEffects();\n\n  idsToExcludeFromUpdate = new Set();\n  const instancesToUpdate = Array\n    .from(instancesPendingUpdate)\n    .sort((a, b) => a.id - b.id);\n  instancesPendingUpdate = new Set();\n\n  const currentCleanups = pendingCleanups;\n  pendingCleanups = new Map();\n  currentCleanups.forEach((cb) => cb());\n\n  const currentEffects = pendingEffects;\n  pendingEffects = new Map();\n  currentEffects.forEach((cb) => cb());\n\n  requestMutation(() => {\n    instancesToUpdate.forEach(prepareComponentForFrame);\n    instancesToUpdate.forEach((instance) => {\n      if (idsToExcludeFromUpdate!.has(instance.id)) {\n        return;\n      }\n\n      forceUpdateComponent(instance);\n    });\n\n    runImmediateEffects?.();\n  });\n});\n\nexport function captureImmediateEffects() {\n  if (areImmediateEffectsCaptured) {\n    return undefined;\n  }\n\n  areImmediateEffectsCaptured = true;\n  return runCapturedImmediateEffects;\n}\n\nfunction runCapturedImmediateEffects() {\n  const currentLayoutCleanups = pendingLayoutCleanups;\n  pendingLayoutCleanups = new Map();\n  currentLayoutCleanups.forEach((cb) => cb());\n\n  const currentLayoutEffects = pendingLayoutEffects;\n  pendingLayoutEffects = new Map();\n  currentLayoutEffects.forEach((cb) => cb());\n\n  areImmediateEffectsCaptured = false;\n}\n\nexport function renderComponent(componentInstance: ComponentInstance) {\n  idsToExcludeFromUpdate.add(componentInstance.id);\n\n  const { Component, props } = componentInstance;\n  let newRenderedValue: any;\n\n  safeExec(() => {\n    renderingInstance = componentInstance;\n    if (componentInstance.hooks) {\n      if (componentInstance.hooks.state) {\n        componentInstance.hooks.state.cursor = 0;\n      }\n      if (componentInstance.hooks.effects) {\n        componentInstance.hooks.effects.cursor = 0;\n      }\n      if (componentInstance.hooks.memos) {\n        componentInstance.hooks.memos.cursor = 0;\n      }\n      if (componentInstance.hooks.refs) {\n        componentInstance.hooks.refs.cursor = 0;\n      }\n    }\n\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    let DEBUG_startAt: number | undefined;\n    if (DEBUG) {\n      const componentName = DEBUG_resolveComponentName(Component);\n      if (!DEBUG_components[componentName]) {\n        DEBUG_components[componentName] = {\n          name: componentName,\n          renders: 0,\n          avgRenderTime: 0,\n        };\n      }\n\n      if (DEBUG_MORE) {\n        if (!DEBUG_SILENT_RENDERS_FOR.has(componentName)) {\n          // eslint-disable-next-line no-console\n          console.log(`[Teact] Render ${componentName}`);\n        }\n      }\n\n      DEBUG_startAt = performance.now();\n    }\n\n    newRenderedValue = Component(props);\n\n    if (DEBUG) {\n      const duration = performance.now() - DEBUG_startAt!;\n      const componentName = DEBUG_resolveComponentName(Component);\n      if (duration > DEBUG_RENDER_THRESHOLD) {\n        // eslint-disable-next-line no-console\n        console.warn(`[Teact] Slow component render: ${componentName}, ${Math.round(duration)} ms`);\n      }\n\n      const { renders, avgRenderTime } = DEBUG_components[componentName];\n      DEBUG_components[componentName].avgRenderTime = (avgRenderTime * renders + duration) / (renders + 1);\n      DEBUG_components[componentName].renders++;\n      DEBUG_components.TOTAL.renders++;\n\n      if (DEBUG_MORE) {\n        incrementOverlayCounter(`${componentName} renders`);\n        incrementOverlayCounter(`${componentName} duration`, duration);\n      }\n    }\n  }, () => {\n    // eslint-disable-next-line no-console\n    console.error(`[Teact] Error while rendering component ${componentInstance.name}`);\n\n    newRenderedValue = componentInstance.renderedValue;\n  });\n\n  if (componentInstance.mountState === MountState.Mounted && newRenderedValue === componentInstance.renderedValue) {\n    return componentInstance.$element;\n  }\n\n  componentInstance.renderedValue = newRenderedValue;\n\n  const children = Array.isArray(newRenderedValue) ? newRenderedValue : [newRenderedValue];\n\n  if (componentInstance.mountState === MountState.New) {\n    componentInstance.$element.children = buildChildren(children, true);\n  } else {\n    componentInstance.$element = buildComponentElement(componentInstance, children);\n  }\n\n  return componentInstance.$element;\n}\n\nexport function hasElementChanged($old: VirtualElement, $new: VirtualElement) {\n  if (typeof $old !== typeof $new) {\n    return true;\n  } else if ($old.type !== $new.type) {\n    return true;\n  } else if (isTextElement($old) && isTextElement($new)) {\n    return $old.value !== $new.value;\n  } else if (isTagElement($old) && isTagElement($new)) {\n    return ($old.tag !== $new.tag) || ($old.props.key !== $new.props.key);\n  } else if (isComponentElement($old) && isComponentElement($new)) {\n    return (\n      $old.componentInstance.Component !== $new.componentInstance.Component\n    ) || (\n      $old.props.key !== $new.props.key\n    );\n  }\n\n  return false;\n}\n\nexport function mountComponent(componentInstance: ComponentInstance) {\n  renderComponent(componentInstance);\n  componentInstance.mountState = MountState.Mounted;\n  return componentInstance.$element;\n}\n\nexport function unmountComponent(componentInstance: ComponentInstance) {\n  if (componentInstance.mountState !== MountState.Mounted) {\n    return;\n  }\n\n  idsToExcludeFromUpdate.add(componentInstance.id);\n\n  componentInstance.hooks?.effects?.byCursor.forEach((effect) => {\n    if (effect.cleanup) {\n      safeExec(effect.cleanup);\n    }\n\n    effect.cleanup = undefined;\n    effect.releaseSignals?.();\n  });\n\n  componentInstance.mountState = MountState.Unmounted;\n\n  helpGc(componentInstance);\n}\n\n// We need to remove all references to DOM objects. We also clean all other references, just in case\nfunction helpGc(componentInstance: ComponentInstance) {\n  componentInstance.hooks?.effects?.byCursor.forEach((hook) => {\n    hook.schedule = undefined as any;\n    hook.cleanup = undefined as any;\n    hook.releaseSignals = undefined as any;\n    hook.dependencies = undefined;\n  });\n\n  componentInstance.hooks?.state?.byCursor.forEach((hook) => {\n    hook.value = undefined;\n    hook.nextValue = undefined;\n    hook.setter = undefined as any;\n  });\n\n  componentInstance.hooks?.memos?.byCursor.forEach((hook) => {\n    hook.value = undefined as any;\n    hook.dependencies = undefined as any;\n  });\n\n  componentInstance.hooks?.refs?.byCursor.forEach((hook) => {\n    hook.current = undefined as any;\n  });\n\n  componentInstance.hooks = undefined as any;\n  componentInstance.$element = undefined as any;\n  componentInstance.renderedValue = undefined;\n  componentInstance.Component = undefined as any;\n  componentInstance.props = undefined as any;\n  componentInstance.onUpdate = undefined;\n}\n\nfunction prepareComponentForFrame(componentInstance: ComponentInstance) {\n  if (componentInstance.mountState !== MountState.Mounted) {\n    return;\n  }\n\n  componentInstance.hooks?.state?.byCursor.forEach((hook) => {\n    hook.value = hook.nextValue;\n  });\n}\n\nfunction forceUpdateComponent(componentInstance: ComponentInstance) {\n  if (componentInstance.mountState !== MountState.Mounted || !componentInstance.onUpdate) {\n    return;\n  }\n\n  const currentElement = componentInstance.$element;\n\n  renderComponent(componentInstance);\n\n  if (componentInstance.$element !== currentElement) {\n    componentInstance.onUpdate();\n  }\n}\n\nexport function useState<T>(): [T | undefined, StateHookSetter<T | undefined>];\nexport function useState<T>(initial: T, debugKey?: string): [T, StateHookSetter<T>];\nexport function useState<T>(initial?: T, debugKey?: string): [T, StateHookSetter<T>] {\n  if (!renderingInstance.hooks) {\n    renderingInstance.hooks = {};\n  }\n  if (!renderingInstance.hooks.state) {\n    renderingInstance.hooks.state = { cursor: 0, byCursor: [] };\n  }\n\n  const { cursor, byCursor } = renderingInstance.hooks.state;\n  const componentInstance = renderingInstance;\n\n  if (byCursor[cursor] === undefined) {\n    byCursor[cursor] = {\n      value: initial,\n      nextValue: initial,\n      setter: (newValue: ((current: T) => T) | T) => {\n        if (componentInstance.mountState === MountState.Unmounted) {\n          return;\n        }\n\n        if (typeof newValue === 'function') {\n          newValue = (newValue as (current: T) => T)(byCursor[cursor].nextValue);\n        }\n\n        if (byCursor[cursor].nextValue === newValue) {\n          return;\n        }\n\n        byCursor[cursor].nextValue = newValue;\n\n        instancesPendingUpdate.add(componentInstance);\n        runUpdatePassOnRaf();\n\n        if (DEBUG_MORE) {\n          // eslint-disable-next-line no-console\n          console.log(\n            '[Teact.useState]',\n            DEBUG_resolveComponentName(componentInstance.Component),\n            `State update at cursor #${cursor}${debugKey ? ` (${debugKey})` : ''}, next value: `,\n            byCursor[cursor].nextValue,\n          );\n        }\n      },\n    };\n  }\n\n  renderingInstance.hooks.state.cursor++;\n\n  return [\n    byCursor[cursor].value,\n    byCursor[cursor].setter,\n  ];\n}\n\nfunction useEffectBase(\n  isLayout: boolean,\n  effect: Effect,\n  dependencies?: readonly any[],\n  debugKey?: string,\n) {\n  if (!renderingInstance.hooks) {\n    renderingInstance.hooks = {};\n  }\n  if (!renderingInstance.hooks.effects) {\n    renderingInstance.hooks.effects = { cursor: 0, byCursor: [] };\n  }\n\n  const { cursor, byCursor } = renderingInstance.hooks.effects;\n  const componentInstance = renderingInstance;\n\n  const runEffectCleanup = () => safeExec(() => {\n    const { cleanup } = byCursor[cursor];\n    if (!cleanup) {\n      return;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    let DEBUG_startAt: number | undefined;\n    if (DEBUG) {\n      DEBUG_startAt = performance.now();\n    }\n\n    cleanup();\n\n    if (DEBUG) {\n      const duration = performance.now() - DEBUG_startAt!;\n      const componentName = DEBUG_resolveComponentName(componentInstance.Component);\n      if (duration > DEBUG_EFFECT_THRESHOLD) {\n        // eslint-disable-next-line no-console\n        console.warn(\n          `[Teact] Slow cleanup at effect cursor #${cursor}: ${componentName}, ${Math.round(duration)} ms`,\n        );\n      }\n    }\n  }, () => {\n    // eslint-disable-next-line no-console\n    console.error(`[Teact] Error in effect cleanup at cursor #${cursor} in ${componentInstance.name}`);\n  }, () => {\n    byCursor[cursor].cleanup = undefined;\n  });\n\n  const runEffect = () => safeExec(() => {\n    if (componentInstance.mountState === MountState.Unmounted) {\n      return;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    let DEBUG_startAt: number | undefined;\n    if (DEBUG) {\n      DEBUG_startAt = performance.now();\n    }\n\n    const result = effect();\n    if (typeof result === 'function') {\n      byCursor[cursor].cleanup = result;\n    }\n\n    if (DEBUG) {\n      const duration = performance.now() - DEBUG_startAt!;\n      const componentName = DEBUG_resolveComponentName(componentInstance.Component);\n      if (duration > DEBUG_EFFECT_THRESHOLD) {\n        // eslint-disable-next-line no-console\n        console.warn(`[Teact] Slow effect at cursor #${cursor}: ${componentName}, ${Math.round(duration)} ms`);\n      }\n    }\n  }, () => {\n    // eslint-disable-next-line no-console\n    console.error(`[Teact] Error in effect at cursor #${cursor} in ${componentInstance.name}`);\n  });\n\n  function schedule() {\n    const effectId = `${componentInstance.id}_${cursor}`;\n\n    if (isLayout) {\n      pendingLayoutCleanups.set(effectId, runEffectCleanup);\n      pendingLayoutEffects.set(effectId, runEffect);\n    } else {\n      pendingCleanups.set(effectId, runEffectCleanup);\n      pendingEffects.set(effectId, runEffect);\n    }\n\n    runUpdatePassOnRaf();\n  }\n\n  if (dependencies && byCursor[cursor]?.dependencies) {\n    if (dependencies.some((dependency, i) => dependency !== byCursor[cursor].dependencies![i])) {\n      if (debugKey) {\n        const causedBy = dependencies.reduce((res, newValue, i) => {\n          const prevValue = byCursor[cursor].dependencies![i];\n          if (newValue !== prevValue) {\n            res.push(`${i}: ${prevValue} => ${newValue}`);\n          }\n\n          return res;\n        }, []);\n\n        // eslint-disable-next-line no-console\n        console.log(`[Teact] Effect \"${debugKey}\" caused by dependencies.`, causedBy.join(', '));\n      }\n\n      schedule();\n    }\n  } else {\n    if (debugKey) {\n      // eslint-disable-next-line no-console\n      console.log(`[Teact] Effect \"${debugKey}\" caused by missing dependencies.`);\n    }\n\n    schedule();\n  }\n\n  const isFirstRun = !byCursor[cursor];\n\n  byCursor[cursor] = {\n    ...byCursor[cursor],\n    dependencies,\n    schedule,\n  };\n\n  function setupSignals() {\n    const cleanups = dependencies?.filter(isSignal).map((signal) => signal.subscribe(() => {\n      byCursor[cursor].schedule();\n    }));\n\n    if (!cleanups?.length) {\n      return undefined;\n    }\n\n    return () => {\n      cleanups.forEach((cleanup) => cleanup());\n    };\n  }\n\n  if (isFirstRun) {\n    byCursor[cursor].releaseSignals = setupSignals();\n  }\n\n  renderingInstance.hooks.effects.cursor++;\n}\n\nexport function useEffect(effect: Effect, dependencies?: readonly any[], debugKey?: string) {\n  return useEffectBase(false, effect, dependencies, debugKey);\n}\n\nexport function useLayoutEffect(effect: Effect, dependencies?: readonly any[], debugKey?: string) {\n  return useEffectBase(true, effect, dependencies, debugKey);\n}\n\nexport function useMemo<T extends any>(\n  resolver: () => T,\n  dependencies: any[],\n  debugKey?: string,\n  debugHitRateKey?: string,\n): T {\n  if (!renderingInstance.hooks) {\n    renderingInstance.hooks = {};\n  }\n  if (!renderingInstance.hooks.memos) {\n    renderingInstance.hooks.memos = { cursor: 0, byCursor: [] };\n  }\n\n  const { cursor, byCursor } = renderingInstance.hooks.memos;\n  let { value } = byCursor[cursor] || {};\n\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  let DEBUG_state: typeof DEBUG_memos[string] | undefined;\n  if (DEBUG && debugHitRateKey) {\n    const instanceKey = `${debugHitRateKey}#${renderingInstance.id}`;\n\n    DEBUG_state = DEBUG_memos[instanceKey];\n    if (!DEBUG_state) {\n      DEBUG_state = {\n        key: instanceKey, calls: 0, misses: 0, hitRate: 0,\n      };\n      DEBUG_memos[instanceKey] = DEBUG_state;\n    }\n\n    DEBUG_state.calls++;\n    DEBUG_state.hitRate = (DEBUG_state.calls - DEBUG_state.misses) / DEBUG_state.calls;\n  }\n\n  if (\n    byCursor[cursor] === undefined\n    || dependencies.length !== byCursor[cursor].dependencies.length\n    || dependencies.some((dependency, i) => dependency !== byCursor[cursor].dependencies[i])\n  ) {\n    if (DEBUG) {\n      if (debugKey) {\n        const msg = `[Teact.useMemo] ${renderingInstance.name} (${debugKey}): Update is caused by:`;\n        if (!byCursor[cursor]) {\n          // eslint-disable-next-line no-console\n          console.log(`${msg} [first render]`);\n        } else {\n          logUnequalProps(byCursor[cursor].dependencies, dependencies, msg, debugKey);\n        }\n      }\n\n      if (DEBUG_state) {\n        DEBUG_state.misses++;\n        DEBUG_state.hitRate = (DEBUG_state.calls - DEBUG_state.misses) / DEBUG_state.calls;\n\n        if (\n          DEBUG_state.calls % 10 === 0\n          && DEBUG_state.calls >= DEBUG_MEMOS_CALLS_THRESHOLD\n          && DEBUG_state.hitRate < 0.25\n        ) {\n          // eslint-disable-next-line no-console\n          console.warn(\n            // eslint-disable-next-line max-len\n            `[Teact] ${DEBUG_state.key}: Hit rate is ${DEBUG_state.hitRate.toFixed(2)} for ${DEBUG_state.calls} calls`,\n          );\n        }\n      }\n    }\n\n    value = resolver();\n  }\n\n  byCursor[cursor] = {\n    value,\n    dependencies,\n  };\n\n  renderingInstance.hooks.memos.cursor++;\n\n  return value;\n}\n\nexport function useCallback<F extends AnyFunction>(newCallback: F, dependencies: any[], debugKey?: string): F {\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  return useMemo(() => newCallback, dependencies, debugKey);\n}\n\nexport function useRef<T>(initial: T): { current: T };\nexport function useRef<T>(): { current: T | undefined }; // TT way (empty is `undefined`)\nexport function useRef<T>(initial: null): { current: T | null }; // React way (empty is `null`)\n// eslint-disable-next-line no-null/no-null\nexport function useRef<T>(initial?: T | null) {\n  if (!renderingInstance.hooks) {\n    renderingInstance.hooks = {};\n  }\n  if (!renderingInstance.hooks.refs) {\n    renderingInstance.hooks.refs = { cursor: 0, byCursor: [] };\n  }\n\n  const { cursor, byCursor } = renderingInstance.hooks.refs;\n  if (!byCursor[cursor]) {\n    byCursor[cursor] = {\n      current: initial,\n    };\n  }\n\n  renderingInstance.hooks.refs.cursor++;\n\n  return byCursor[cursor];\n}\n\nexport function memo<T extends FC_withDebug>(Component: T, debugKey?: string) {\n  function TeactMemoWrapper(props: Props) {\n    return useMemo(\n      () => createElement(Component, props),\n      // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n      Object.values(props),\n      debugKey,\n      DEBUG_MORE ? DEBUG_resolveComponentName(renderingInstance.Component) : undefined,\n    );\n  }\n\n  TeactMemoWrapper.DEBUG_contentComponentName = DEBUG_resolveComponentName(Component);\n\n  return TeactMemoWrapper as T;\n}\n\n// eslint-disable-next-line @typescript-eslint/naming-convention\nexport function DEBUG_resolveComponentName(Component: FC_withDebug) {\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  const { name, DEBUG_contentComponentName } = Component;\n\n  if (name === 'TeactNContainer') {\n    return `container>${DEBUG_contentComponentName}`;\n  }\n\n  if (name === 'TeactMemoWrapper') {\n    return `memo>${DEBUG_contentComponentName}`;\n  }\n\n  return name + (DEBUG_contentComponentName ? `>${DEBUG_contentComponentName}` : '');\n}\n\nexport default {\n  createElement,\n  Fragment,\n};\n","export default function arePropsShallowEqual(currentProps: AnyLiteral, newProps: AnyLiteral) {\n  if (currentProps === newProps) {\n    return true;\n  }\n\n  const currentKeys = Object.keys(currentProps);\n  const currentKeysLength = currentKeys.length;\n  const newKeysLength = Object.keys(newProps).length;\n\n  if (currentKeysLength !== newKeysLength) {\n    return false;\n  }\n\n  if (currentKeysLength === 0) {\n    return true;\n  }\n\n  for (let i = 0; i < currentKeysLength; i++) {\n    const prop = currentKeys[i];\n    if (currentProps[prop] !== newProps[prop]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexport function logUnequalProps(currentProps: AnyLiteral, newProps: AnyLiteral, msg: string, debugKey = '') {\n  const currentKeys = Object.keys(currentProps);\n  const currentKeysLength = currentKeys.length;\n  const newKeysLength = Object.keys(newProps).length;\n\n  if (currentKeysLength !== newKeysLength) {\n    // eslint-disable-next-line no-console\n    console.log(`${msg} LENGTH`);\n    return;\n  }\n\n  // eslint-disable-next-line no-console\n  console.log(msg);\n  currentKeys.forEach((res, prop) => {\n    if (currentProps[prop] !== newProps[prop]) {\n      // eslint-disable-next-line no-console\n      console.log(debugKey, prop, ':', currentProps[prop], '=>', newProps[prop]);\n    }\n  });\n}\n","export function createCallbackManager<T extends AnyToVoidFunction = AnyToVoidFunction>() {\n  const callbacks = new Set<T>();\n\n  function addCallback(cb: T) {\n    callbacks.add(cb);\n\n    return () => {\n      removeCallback(cb);\n    };\n  }\n\n  function removeCallback(cb: T) {\n    callbacks.delete(cb);\n  }\n\n  function runCallbacks(...args: Parameters<T>) {\n    callbacks.forEach((callback) => {\n      callback(...args);\n    });\n  }\n\n  function hasCallbacks() {\n    return Boolean(callbacks.size);\n  }\n\n  return {\n    runCallbacks,\n    addCallback,\n    removeCallback,\n    hasCallbacks,\n  };\n}\n\nexport type CallbackManager<T extends AnyToVoidFunction = AnyToVoidFunction>\n  = ReturnType<typeof createCallbackManager<T>>;\n","import { throttle } from './schedulers';\n\nconst KEYS_TO_IGNORE = new Set([\n  'TeactMemoWrapper renders',\n  'TeactNContainer renders',\n  'Button renders',\n]);\nconst MIN_RENDERS_TO_SHOW = 5;\nconst MIN_DURATION_TO_SHOW = 2;\nconst BG_GREEN = ' style=\"background: lightgreen\"';\n\nlet counters: Record<string, {\n  value: number;\n  lastUpdateAt: number;\n}> = {};\n\nconst renderCountersThrottled = throttle(renderCounters, 500, false);\n\nlet loggerEl: HTMLDivElement;\n\nexport function debugToOverlay(text: string) {\n  if (!loggerEl) {\n    setupOverlay();\n  }\n\n  const date = new Date();\n  const dateFormatted = `${date.toLocaleTimeString()}.${date.getMilliseconds()}`;\n  const wasAtBottom = loggerEl.scrollTop + 10 >= loggerEl.scrollHeight - loggerEl.offsetHeight;\n\n  loggerEl.innerHTML += `${dateFormatted}: ${text}<br/>`;\n\n  if (wasAtBottom) {\n    loggerEl.scrollTop = loggerEl.scrollHeight;\n  }\n}\n\nexport function incrementOverlayCounter(key: string, value = 1) {\n  const now = Date.now();\n  if (!counters[key]) {\n    counters[key] = { value, lastUpdateAt: now };\n  } else {\n    counters[key].value += value;\n    counters[key].lastUpdateAt = now;\n  }\n\n  renderCountersThrottled();\n}\n\nexport function renderCounters() {\n  if (!loggerEl) {\n    setupOverlay();\n  }\n\n  const halfSecondAgo = Date.now() - 500;\n  const [maxRenders, maxDuration] = Object.entries(counters).reduce((acc, [key, { value }]) => {\n    if (KEYS_TO_IGNORE.has(key)) {\n      return acc;\n    }\n\n    if (key.includes('renders') && value > acc[0]) {\n      acc[0] = value;\n    }\n\n    if (key.includes('duration') && value > acc[1]) {\n      acc[1] = value;\n    }\n\n    return acc;\n  }, [0, 0]);\n\n  loggerEl.innerHTML = Object\n    .entries(counters)\n    .filter(([key, { value }]) => (\n      (!KEYS_TO_IGNORE.has(key)) && (\n        (key.includes('renders') && value > MIN_RENDERS_TO_SHOW)\n        || (key.includes('duration') && value > MIN_DURATION_TO_SHOW)\n      )\n    ))\n    .sort((a, b) => (\n      b[1].lastUpdateAt - a[1].lastUpdateAt\n    ))\n    .map(([key, { value, lastUpdateAt }]) => ([\n      `<div style=\"background: #ff0000${factorToHex(value / (key.includes('renders') ? maxRenders : maxDuration))}\">`,\n      `  <span${lastUpdateAt > halfSecondAgo ? BG_GREEN : ''}>${key}: ${Math.round(value)}</span>`,\n      '</div>',\n    ].join('\\n')))\n    .join('\\n');\n}\n\nfunction setupOverlay() {\n  loggerEl = document.createElement('div');\n  loggerEl.style.cssText = 'position: absolute; left: 0; bottom: 25px; z-index: 9998; width: 260px; height: 200px;'\n    + ' border: 1px solid #555; background: rgba(255, 255, 255, 0.9); overflow: auto; font-size: 10px;';\n  document.body.appendChild(loggerEl);\n\n  const clearEl = document.createElement('a');\n  clearEl.style.cssText = 'position: absolute; left: 222px; bottom: 198px; z-index: 9999; font-size: 20px; '\n    + 'cursor: pointer;';\n  clearEl.innerText = '';\n  clearEl.addEventListener('click', () => {\n    counters = {};\n    renderCountersThrottled();\n  });\n  document.body.appendChild(clearEl);\n}\n\nfunction factorToHex(factor: number) {\n  return Math.round(255 * factor).toString(16).padStart(2, '0');\n}\n","window.addEventListener('error', handleErrorEvent);\nwindow.addEventListener('unhandledrejection', handleErrorEvent);\n\nfunction handleErrorEvent(e: ErrorEvent | PromiseRejectionEvent) {\n  // https://stackoverflow.com/questions/49384120/resizeobserver-loop-limit-exceeded\n  if (e instanceof ErrorEvent && e.message === 'ResizeObserver loop limit exceeded') {\n    return;\n  }\n\n  e.preventDefault();\n\n  handleError(e instanceof ErrorEvent ? (e.error || e.message) : e.reason);\n}\n\nexport function handleError(err: Error) {\n  // eslint-disable-next-line no-console\n  console.error(err);\n}\n","type OrderDirection =\n  'asc'\n  | 'desc';\n\ninterface OrderCallback<T> {\n  (member: T): any;\n}\n\nexport function orderBy<T>(\n  collection: T[],\n  orderRule: (keyof T) | OrderCallback<T> | ((keyof T) | OrderCallback<T>)[],\n  mode: OrderDirection | [OrderDirection, OrderDirection] = 'asc',\n): T[] {\n  function compareValues(a: T, b: T, currentOrderRule: (keyof T) | OrderCallback<T>, isAsc: boolean) {\n    const aValue = (typeof currentOrderRule === 'function' ? currentOrderRule(a) : a[currentOrderRule]) || 0;\n    const bValue = (typeof currentOrderRule === 'function' ? currentOrderRule(b) : b[currentOrderRule]) || 0;\n\n    return isAsc ? aValue - bValue : bValue - aValue;\n  }\n\n  if (Array.isArray(orderRule)) {\n    const [mode1, mode2] = Array.isArray(mode) ? mode : [mode, mode];\n    const [orderRule1, orderRule2] = orderRule;\n    const isAsc1 = mode1 === 'asc';\n    const isAsc2 = mode2 === 'asc';\n\n    return collection.sort((a, b) => {\n      return compareValues(a, b, orderRule1, isAsc1) || compareValues(a, b, orderRule2, isAsc2);\n    });\n  }\n\n  const isAsc = mode === 'asc';\n  return collection.sort((a, b) => {\n    return compareValues(a, b, orderRule, isAsc);\n  });\n}\n\nexport function unique<T extends any>(array: T[]): T[] {\n  return Array.from(new Set(array));\n}\n","import { DEBUG_MORE } from '../config';\nimport { handleError } from './handleError';\n\nconst SAFE_EXEC_ENABLED = !DEBUG_MORE;\n\nexport default function safeExec(cb: Function, rescue?: (err: Error) => void, always?: NoneToVoidFunction) {\n  if (!SAFE_EXEC_ENABLED) {\n    return cb();\n  }\n\n  try {\n    return cb();\n  } catch (err: any) {\n    rescue?.(err);\n    handleError(err);\n    return undefined;\n  } finally {\n    always?.();\n  }\n}\n","export type Scheduler = typeof requestAnimationFrame | typeof onTickEnd;\n\nexport function throttle<F extends AnyToVoidFunction>(\n  fn: F,\n  ms: number,\n  shouldRunFirst = true,\n) {\n  let interval: number | undefined;\n  let isPending: boolean;\n  let args: Parameters<F>;\n\n  return (..._args: Parameters<F>) => {\n    isPending = true;\n    args = _args;\n\n    if (!interval) {\n      if (shouldRunFirst) {\n        isPending = false;\n        fn(...args);\n      }\n\n      // eslint-disable-next-line no-restricted-globals\n      interval = self.setInterval(() => {\n        if (!isPending) {\n          // eslint-disable-next-line no-restricted-globals\n          self.clearInterval(interval!);\n          interval = undefined;\n          return;\n        }\n\n        isPending = false;\n        fn(...args);\n      }, ms);\n    }\n  };\n}\n\nexport function throttleWithTickEnd<F extends AnyToVoidFunction>(fn: F) {\n  return throttleWith(onTickEnd, fn);\n}\n\nexport function throttleWith<F extends AnyToVoidFunction>(schedulerFn: Scheduler, fn: F) {\n  let waiting = false;\n  let args: Parameters<F>;\n\n  return (..._args: Parameters<F>) => {\n    args = _args;\n\n    if (!waiting) {\n      waiting = true;\n\n      schedulerFn(() => {\n        waiting = false;\n        fn(...args);\n      });\n    }\n  };\n}\n\nexport function onIdle(cb: NoneToVoidFunction, timeout?: number) {\n  // eslint-disable-next-line no-restricted-globals\n  if (self.requestIdleCallback) {\n    // eslint-disable-next-line no-restricted-globals\n    self.requestIdleCallback(cb, { timeout });\n  } else {\n    onTickEnd(cb);\n  }\n}\n\nconst FAST_RAF_TIMEOUT_FALLBACK_MS = 300;\n\nlet fastRafCallbacks: Set<NoneToVoidFunction> | undefined;\nlet fastRafFallbackCallbacks: Set<NoneToVoidFunction> | undefined;\nlet fastRafFallbackTimeout: number | undefined;\n\n// May result in an immediate execution if called from another RAF callback which was scheduled\n// (and therefore is executed) earlier than RAF callback scheduled by `fastRaf`\nexport function fastRaf(callback: NoneToVoidFunction, withTimeoutFallback = false) {\n  if (!fastRafCallbacks) {\n    fastRafCallbacks = new Set([callback]);\n\n    requestAnimationFrame(() => {\n      const currentCallbacks = fastRafCallbacks!;\n\n      fastRafCallbacks = undefined;\n      fastRafFallbackCallbacks = undefined;\n\n      if (fastRafFallbackTimeout) {\n        clearTimeout(fastRafFallbackTimeout);\n        fastRafFallbackTimeout = undefined;\n      }\n\n      currentCallbacks.forEach((cb) => cb());\n    });\n  } else {\n    fastRafCallbacks.add(callback);\n  }\n\n  if (withTimeoutFallback) {\n    if (!fastRafFallbackCallbacks) {\n      fastRafFallbackCallbacks = new Set([callback]);\n    } else {\n      fastRafFallbackCallbacks.add(callback);\n    }\n\n    if (!fastRafFallbackTimeout) {\n      fastRafFallbackTimeout = window.setTimeout(() => {\n        const currentTimeoutCallbacks = fastRafFallbackCallbacks!;\n\n        if (fastRafCallbacks) {\n          currentTimeoutCallbacks.forEach(fastRafCallbacks.delete, fastRafCallbacks);\n        }\n        fastRafFallbackCallbacks = undefined;\n\n        if (fastRafFallbackTimeout) {\n          clearTimeout(fastRafFallbackTimeout);\n          fastRafFallbackTimeout = undefined;\n        }\n\n        currentTimeoutCallbacks.forEach((cb) => cb());\n      }, FAST_RAF_TIMEOUT_FALLBACK_MS);\n    }\n  }\n}\n\nlet onTickEndCallbacks: NoneToVoidFunction[] | undefined;\n\nexport function onTickEnd(callback: NoneToVoidFunction) {\n  if (!onTickEndCallbacks) {\n    onTickEndCallbacks = [callback];\n\n    Promise.resolve().then(() => {\n      const currentCallbacks = onTickEndCallbacks!;\n      onTickEndCallbacks = undefined;\n      currentCallbacks.forEach((cb) => cb());\n    });\n  } else {\n    onTickEndCallbacks.push(callback);\n  }\n}\n\nlet beforeUnloadCallbacks: NoneToVoidFunction[] | undefined;\n\nexport function onBeforeUnload(callback: NoneToVoidFunction, isLast = false) {\n  if (!beforeUnloadCallbacks) {\n    beforeUnloadCallbacks = [];\n    // eslint-disable-next-line no-restricted-globals\n    self.addEventListener('beforeunload', () => {\n      beforeUnloadCallbacks!.forEach((cb) => cb());\n    });\n  }\n\n  if (isLast) {\n    beforeUnloadCallbacks.push(callback);\n  } else {\n    beforeUnloadCallbacks.unshift(callback);\n  }\n\n  return () => {\n    beforeUnloadCallbacks = beforeUnloadCallbacks!.filter((cb) => cb !== callback);\n  };\n}\n","import type { CallbackManager } from './callbacks';\nimport { createCallbackManager } from './callbacks';\n\ninterface SignalState<T> {\n  value: T;\n  effects: CallbackManager;\n}\n\nconst SIGNAL_MARK = Symbol('SIGNAL_MARK');\n\nexport type Signal<T = any> = ((() => T) & {\n  readonly [SIGNAL_MARK]: symbol;\n  subscribe: (cb: AnyToVoidFunction) => NoneToVoidFunction;\n});\n\nexport type SignalSetter = (newValue: any) => void;\n\nexport function isSignal(obj: any): obj is Signal {\n  return typeof obj === 'function' && SIGNAL_MARK in obj;\n}\n\n// A shorthand to unsubscribe effect from all signals\nconst unsubscribesByEffect = new Map<NoneToVoidFunction, Set<NoneToVoidFunction>>();\n\nlet currentEffect: NoneToVoidFunction | undefined;\n\nexport function createSignal<T>(defaultValue?: T) {\n  const state: SignalState<typeof defaultValue> = {\n    value: defaultValue,\n    effects: createCallbackManager(),\n  };\n\n  function subscribe(effect: NoneToVoidFunction) {\n    const unsubscribe = state.effects.addCallback(effect);\n\n    if (!unsubscribesByEffect.has(effect)) {\n      unsubscribesByEffect.set(effect, new Set([unsubscribe]));\n    } else {\n      unsubscribesByEffect.get(effect)!.add(unsubscribe);\n    }\n\n    return () => {\n      unsubscribe();\n\n      const unsubscribes = unsubscribesByEffect.get(effect)!;\n      unsubscribes.delete(unsubscribe);\n      if (!unsubscribes.size) {\n        unsubscribesByEffect.delete(effect);\n      }\n    };\n  }\n\n  function getter() {\n    if (currentEffect) {\n      subscribe(currentEffect);\n    }\n\n    return state.value;\n  }\n\n  function setter(newValue: T) {\n    if (state.value === newValue) {\n      return;\n    }\n\n    state.value = newValue;\n    state.effects.runCallbacks();\n  }\n\n  const signal = Object.assign(getter as Signal<T>, {\n    [SIGNAL_MARK]: SIGNAL_MARK,\n    subscribe,\n  });\n\n  return [signal, setter] as const;\n}\n\nexport function cleanupEffect(effect: NoneToVoidFunction) {\n  unsubscribesByEffect.get(effect)?.forEach((unsubscribe) => {\n    unsubscribe();\n  });\n  unsubscribesByEffect.delete(effect);\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import React, { useState } from '../src/teact/teact';\nimport TeactDOM from '../src/teact/teact-dom';\n\nTeactDOM.render(\n  <App />,\n  document.getElementById('root')!,\n);\n\nfunction App() {\n  return (\n    <div>\n      <h2>Hello Teact!</h2>\n\n      <Child />\n      <Checkbox />\n    </div>\n  );\n}\n\nfunction Child() {\n  return (\n    <div>\n      This is your first component.\n    </div>\n  );\n}\n\nfunction Checkbox() {\n  const [isChecked, setIsChecked] = useState(true);\n\n  function handleCheck() {\n    setIsChecked((current) => !current);\n  }\n\n  return (\n    <label>\n      <input type=\"checkbox\" checked={isChecked} onChange={handleCheck} />\n      This is a controlled form element.\n    </label>\n  );\n}\n"],"names":["DEBUG","DEBUG_MORE","fastRaf","throttleWith","safeExec","setPhase","pendingMeasureTasks","pendingMutationTasks","pendingForceReflowTasks","runUpdatePassOnRaf","throttleWithRafFallback","currentMeasureTasks","forEach","task","Promise","resolve","then","currentMutationTasks","pendingForceReflowMutationTasks","mutationTask","push","requestMeasure","cb","requestMutation","requestNextMutation","requestForcedReflow","fn","throttledFn","Element","props","methods","HTMLElement","window","VisualViewport","Document","HTMLInputElement","MouseEvent","Range","LAYOUT_CAUSES","DEFAULT_ERROR_HANDLER","console","error","onError","nativeMethods","Map","phase","isStrict","observer","newPhase","getPhase","enableStrict","setupLayoutDetectors","setupMutationObserver","disableStrict","clearMutationObserver","clearLayoutDetectors","forceMeasure","Error","result","setHandler","handler","Object","entries","name","causes","entity","prototype","prop","nativeGetter","getOwnPropertyDescriptor","get","set","defineProperty","onMeasure","call","method","nativeMethod","args","apply","clear","MutationObserver","mutations","target","type","attributeName","document","contains","contentEditable","startsWith","observe","body","childList","attributes","subtree","characterData","disconnect","undefined","propName","NON_BUBBLEABLE_EVENTS","Set","documentEventCounters","delegationRegistryByEventType","delegatedEventTypesByElement","addEventListener","element","asCapture","eventType","resolveEventType","canUseEventDelegation","addDelegatedListener","removeEventListener","removeDelegatedListener","replace","toLowerCase","tagName","realEventType","has","handleEvent","resolveDelegationRegistry","resolveDelegatedEventTypes","add","removeAllDelegatedListeners","eventTypes","realEvent","events","furtherCallsPrevented","current","stopPropagation","preventDefault","event","Proxy","p","Reflect","parentNode","existing","newSet","documentListenersCount","keys","length","delegatedHandlersCount1","values","reduce","acc","counter","delegationRegistriesCount","delegatedHandlersCount2","delegationRegistry","size","delegationElementsCount","delegatedEventTypesCount","Array","from","warn","captureImmediateEffects","hasElementChanged","isComponentElement","isEmptyElement","isFragmentElement","isParentElement","isTagElement","isTextElement","mountComponent","MountState","renderComponent","unmountComponent","unique","FILTERED_ATTRIBUTES","HTML_ATTRIBUTES","CONTROLLABLE_TAGS","MAPPED_ATTRIBUTES","autoPlay","autoComplete","INDEX_KEY_PREFIX","headsByElement","WeakMap","extraClasses","DEBUG_virtualTreeSize","render","$element","parentEl","children","runImmediateEffects","$head","$newElement","renderWithVirtual","$current","$new","$parent","index","options","skipComponentUpdate","fragment","nextSibling","isCurrentComponent","isNewComponent","$newAsReal","isCurrentFragment","isNewFragment","updateComponent","componentInstance","mountState","Mounted","setupComponentUpdateListener","newTarget","initComponent","mountChildren","textContent","value","firstChild","node","createNode","insertBefore","setElementRef","remount","getNextSibling","canSetText","nodeValue","isComponent","isFragment","renderChildren","forceMoveToEnd","$currentAsReal","currentTarget","isTag","$newAsTag","updateAttributes","New","$firstChild","onUpdate","i","l","$child","$newChild","splice","unmountChildren","createTextNode","tag","createElement","processControlled","key","hasOwnProperty","setAttribute","processUncontrolledOnMount","componentNextSibling","replaceChild","removeChild","unmountRealTree","appendChild","lastChild","currentEl","DEBUG_checkKeyUniqueness","teactFastList","renderFastListChildren","currentChildren","newChildren","currentChildrenLength","newChildrenLength","maxLength","Math","max","createDocumentFragment","lastCurrentChild","fragmentNextSibling","newKeys","map","currentRemainingIndex","remainingByKey","$currentChild","isKeyPresent","newChildKey","orderKey","teactOrderKey","fragmentElements","fragmentIndex","currentPreservedIndex","currentChildInfo","concat","renderFragment","newOrderKey","shouldMoveNode","isMovingDown","childNodes","elements","htmlElement","ref","isValueControlled","isCheckedControlled","checked","isControlled","includes","toUpperCase","onInput","onChange","e","selectionStart","selectionEnd","isCaretAtEnd","setSelectionRange","selectionState","dataset","__teactSelectionState","JSON","stringify","defaultValue","defaultChecked","currentEntries","newEntries","currentValue","newValue","removeAttribute","updateClassName","inputEl","selectionStateJson","parse","style","cssText","innerHTML","__html","endsWith","extra","className","extraArray","join","addExtraClass","forceSingle","classNames","split","cn","classList","removeExtraClass","remove","toggleExtraClass","force","toggle","child","filter","a","indexOf","TeactDOM","logUnequalProps","incrementOverlayCounter","orderBy","isSignal","VirtualElementTypesEnum","Fragment","Symbol","DEBUG_RENDER_THRESHOLD","DEBUG_EFFECT_THRESHOLD","DEBUG_SILENT_RENDERS_FOR","lastComponentId","renderingInstance","Empty","Text","Tag","Component","source","buildFragmentElement","createComponentInstance","buildTagElement","buildChildren","id","buildComponentElement","noEmpty","cleanChildren","dropEmptyTail","isArray","buildChildElement","isEmptyPlaceholder","slice","String","DEBUG_components","TOTAL","renders","DEBUG_memos","DEBUG_MEMOS_CALLS_THRESHOLD","avgRenderTime","state","Number","toFixed","calls","hitRate","instancesPendingUpdate","idsToExcludeFromUpdate","pendingEffects","pendingCleanups","pendingLayoutEffects","pendingLayoutCleanups","areImmediateEffectsCaptured","instancesToUpdate","sort","b","currentCleanups","currentEffects","prepareComponentForFrame","instance","forceUpdateComponent","runCapturedImmediateEffects","currentLayoutCleanups","currentLayoutEffects","newRenderedValue","hooks","cursor","effects","memos","refs","DEBUG_startAt","componentName","DEBUG_resolveComponentName","log","performance","now","duration","round","renderedValue","$old","byCursor","effect","cleanup","releaseSignals","Unmounted","helpGc","hook","schedule","dependencies","nextValue","setter","currentElement","useState","initial","debugKey","useEffectBase","isLayout","runEffectCleanup","runEffect","effectId","some","dependency","causedBy","res","prevValue","isFirstRun","setupSignals","cleanups","signal","subscribe","useEffect","useLayoutEffect","useMemo","resolver","debugHitRateKey","DEBUG_state","instanceKey","misses","msg","useCallback","newCallback","useRef","memo","TeactMemoWrapper","DEBUG_contentComponentName","arePropsShallowEqual","currentProps","newProps","currentKeys","currentKeysLength","newKeysLength","createCallbackManager","callbacks","addCallback","removeCallback","runCallbacks","callback","hasCallbacks","Boolean","throttle","KEYS_TO_IGNORE","MIN_RENDERS_TO_SHOW","MIN_DURATION_TO_SHOW","BG_GREEN","counters","renderCountersThrottled","renderCounters","loggerEl","debugToOverlay","text","setupOverlay","date","Date","dateFormatted","toLocaleTimeString","getMilliseconds","wasAtBottom","scrollTop","scrollHeight","offsetHeight","lastUpdateAt","halfSecondAgo","maxRenders","maxDuration","factorToHex","clearEl","innerText","factor","toString","padStart","handleErrorEvent","ErrorEvent","message","handleError","reason","err","collection","orderRule","mode","compareValues","currentOrderRule","isAsc","aValue","bValue","mode1","mode2","orderRule1","orderRule2","isAsc1","isAsc2","array","SAFE_EXEC_ENABLED","rescue","always","ms","shouldRunFirst","interval","isPending","_args","self","setInterval","clearInterval","throttleWithTickEnd","onTickEnd","schedulerFn","waiting","onIdle","timeout","requestIdleCallback","FAST_RAF_TIMEOUT_FALLBACK_MS","fastRafCallbacks","fastRafFallbackCallbacks","fastRafFallbackTimeout","withTimeoutFallback","requestAnimationFrame","currentCallbacks","clearTimeout","setTimeout","currentTimeoutCallbacks","onTickEndCallbacks","beforeUnloadCallbacks","onBeforeUnload","isLast","unshift","SIGNAL_MARK","obj","unsubscribesByEffect","currentEffect","createSignal","unsubscribe","unsubscribes","getter","assign","cleanupEffect","React","getElementById","App","Child","Checkbox","isChecked","setIsChecked","handleCheck"],"sourceRoot":""}