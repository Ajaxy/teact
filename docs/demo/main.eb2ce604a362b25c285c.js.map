{"version":3,"file":"main.eb2ce604a362b25c285c.js","mappings":"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","sources":["webpack://teact/./src/config.ts","webpack://teact/./src/lib/fasterdom/fasterdom.ts","webpack://teact/./src/lib/fasterdom/layoutCauses.ts","webpack://teact/./src/lib/fasterdom/stricterdom.ts","webpack://teact/./src/teact/dom-events.ts","webpack://teact/./src/teact/teact-dom.ts","webpack://teact/./src/teact/teact.ts","webpack://teact/./src/util/arePropsShallowEqual.ts","webpack://teact/./src/util/callbacks.ts","webpack://teact/./src/util/debugOverlay.ts","webpack://teact/./src/util/handleError.ts","webpack://teact/./src/util/iteratees.ts","webpack://teact/./src/util/safeExec.ts","webpack://teact/./src/util/schedulers.ts","webpack://teact/./src/util/signals.ts","webpack://teact/webpack/bootstrap","webpack://teact/webpack/runtime/define property getters","webpack://teact/webpack/runtime/hasOwnProperty shorthand","webpack://teact/webpack/runtime/make namespace object","webpack://teact/./demo/index.tsx"],"sourcesContent":["export const DEBUG = false;\nexport const DEBUG_MORE = false;\n","import { fastRaf, throttleWith } from '../../util/schedulers';\nimport safeExec from '../../util/safeExec';\n\nimport { setPhase } from './stricterdom';\n\nlet pendingMeasureTasks: NoneToVoidFunction[] = [];\nlet pendingMutationTasks: NoneToVoidFunction[] = [];\nlet pendingForceReflowTasks: (() => NoneToVoidFunction | void)[] = [];\n\nconst runUpdatePassOnRaf = throttleWithRafFallback(() => {\n  const currentMeasureTasks = pendingMeasureTasks;\n  pendingMeasureTasks = [];\n  currentMeasureTasks.forEach((task) => {\n    safeExec(task);\n  });\n\n  // We use promises to provide correct order for Mutation Observer callback microtasks\n  Promise.resolve()\n    .then(() => {\n      setPhase('mutate');\n\n      const currentMutationTasks = pendingMutationTasks;\n      pendingMutationTasks = [];\n\n      currentMutationTasks.forEach((task) => {\n        safeExec(task);\n      });\n    })\n    .then(() => {\n      setPhase('measure');\n\n      const pendingForceReflowMutationTasks: NoneToVoidFunction[] = [];\n      // Will include tasks created during the loop\n      for (const task of pendingForceReflowTasks) {\n        safeExec(() => {\n          const mutationTask = task();\n          if (mutationTask) {\n            pendingForceReflowMutationTasks.push(mutationTask);\n          }\n        });\n      }\n      pendingForceReflowTasks = [];\n\n      return pendingForceReflowMutationTasks;\n    })\n    .then((pendingForceReflowMutationTasks) => {\n      setPhase('mutate');\n\n      // Will include tasks created during the loop\n      for (const task of pendingForceReflowMutationTasks) {\n        safeExec(task);\n      }\n    })\n    .then(() => {\n      setPhase('measure');\n    });\n});\n\nexport function requestMeasure(cb: NoneToVoidFunction) {\n  pendingMeasureTasks.push(cb);\n  runUpdatePassOnRaf();\n}\n\nexport function requestMutation(cb: NoneToVoidFunction) {\n  pendingMutationTasks.push(cb);\n  runUpdatePassOnRaf();\n}\n\nexport function requestNextMutation(cb: () => (NoneToVoidFunction | void)) {\n  requestMeasure(() => {\n    requestMutation(cb);\n  });\n}\n\nexport function requestForcedReflow(cb: () => (NoneToVoidFunction | void)) {\n  pendingForceReflowTasks.push(cb);\n  runUpdatePassOnRaf();\n}\n\nfunction throttleWithRafFallback<F extends AnyToVoidFunction>(fn: F) {\n  return throttleWith((throttledFn: NoneToVoidFunction) => {\n    fastRaf(throttledFn, true);\n  }, fn);\n}\n\nexport * from './stricterdom';\n","// https://gist.github.com/paulirish/5d52fb081b3570c81e3a\n\nexport default {\n  Element: {\n    props: [\n      'clientLeft', 'clientTop', 'clientWidth', 'clientHeight',\n      'scrollWidth', 'scrollHeight', 'scrollLeft', 'scrollTop',\n    ] as const,\n    methods: [\n      'getClientRects', 'getBoundingClientRect',\n      'scrollBy', 'scrollTo', 'scrollIntoView', 'scrollIntoViewIfNeeded',\n    ] as const,\n  },\n  HTMLElement: {\n    props: [\n      'offsetLeft', 'offsetTop', 'offsetWidth', 'offsetHeight', 'offsetParent',\n      'innerText',\n    ] as const,\n    methods: ['focus'] as const,\n  },\n  window: {\n    props: [\n      'scrollX', 'scrollY',\n      'innerHeight', 'innerWidth',\n    ] as const,\n    methods: ['getComputedStyle'] as const,\n  },\n  VisualViewport: {\n    props: [\n      'height', 'width', 'offsetTop', 'offsetLeft',\n    ] as const,\n  },\n  Document: {\n    props: ['scrollingElement'] as const,\n    methods: ['elementFromPoint'] as const,\n  },\n  HTMLInputElement: {\n    methods: ['select'] as const,\n  },\n  MouseEvent: {\n    props: ['layerX', 'layerY', 'offsetX', 'offsetY'] as const,\n  },\n  Range: {\n    methods: ['getClientRects', 'getBoundingClientRect'] as const,\n  },\n};\n","import LAYOUT_CAUSES from './layoutCauses';\n\ntype Entities = keyof typeof LAYOUT_CAUSES;\ntype Phase =\n  'measure'\n  | 'mutate';\ntype ErrorHandler = (error: Error) => any;\n\n// eslint-disable-next-line no-console\nconst DEFAULT_ERROR_HANDLER = console.error;\n\nlet onError: ErrorHandler = DEFAULT_ERROR_HANDLER;\n\nconst nativeMethods = new Map<string, AnyFunction>();\n\nlet phase: Phase = 'measure';\nlet isStrict = false;\nlet observer: MutationObserver | undefined;\n\nexport function setPhase(newPhase: Phase) {\n  phase = newPhase;\n}\n\nexport function getPhase() {\n  return phase;\n}\n\nexport function enableStrict() {\n  if (isStrict) return;\n\n  isStrict = true;\n  setupLayoutDetectors();\n  setupMutationObserver();\n}\n\nexport function disableStrict() {\n  if (!isStrict) return;\n\n  clearMutationObserver();\n  clearLayoutDetectors();\n  isStrict = false;\n}\n\nexport function forceMeasure(cb: () => any) {\n  if (phase !== 'mutate') {\n    throw new Error('The current phase is \\'measure\\'');\n  }\n\n  phase = 'measure';\n  const result = cb();\n  phase = 'mutate';\n\n  return result;\n}\n\nexport function setHandler(handler?: ErrorHandler) {\n  onError = handler || DEFAULT_ERROR_HANDLER;\n}\n\nfunction setupLayoutDetectors() {\n  Object.entries(LAYOUT_CAUSES).forEach(([name, causes]) => {\n    const entity = window[name as Entities];\n    if (!entity) return;\n    const prototype = typeof entity === 'object' ? entity : entity.prototype;\n\n    if ('props' in causes) {\n      causes.props.forEach((prop) => {\n        const nativeGetter = Object.getOwnPropertyDescriptor(prototype, prop)?.get;\n        if (!nativeGetter) {\n          return;\n        }\n\n        nativeMethods.set(`${name}#${prop}`, nativeGetter);\n\n        Object.defineProperty(prototype, prop, {\n          get() {\n            onMeasure(prop);\n\n            return nativeGetter.call(this);\n          },\n        });\n      });\n    }\n\n    if ('methods' in causes) {\n      causes.methods.forEach((method) => {\n        const nativeMethod = (prototype as any)[method]!;\n        nativeMethods.set(`${name}#${method}`, nativeMethod);\n\n        // eslint-disable-next-line func-names\n        (prototype as any)[method] = function (...args: any[]) {\n          onMeasure(method);\n\n          return nativeMethod.apply(this, args);\n        };\n      });\n    }\n  });\n}\n\nfunction clearLayoutDetectors() {\n  Object.entries(LAYOUT_CAUSES).forEach(([name, causes]) => {\n    const entity = window[name as Entities];\n    if (!entity) return;\n    const prototype = typeof entity === 'object' ? entity : entity.prototype;\n\n    if ('props' in causes) {\n      causes.props.forEach((prop) => {\n        const nativeGetter = nativeMethods.get(`${name}#${prop}`);\n        if (!nativeGetter) {\n          return;\n        }\n\n        Object.defineProperty(prototype, prop, { get: nativeGetter });\n      });\n    }\n\n    if ('methods' in causes) {\n      causes.methods.forEach((method) => {\n        (prototype as any)[method] = nativeMethods.get(`${name}#${method}`)!;\n      });\n    }\n  });\n\n  nativeMethods.clear();\n}\n\nfunction setupMutationObserver() {\n  observer = new MutationObserver((mutations) => {\n    if (phase !== 'mutate') {\n      mutations.forEach(({ target, type, attributeName }) => {\n        if (!document.contains(target)) {\n          return;\n        }\n\n        if (type === 'childList' && target instanceof HTMLElement && target.contentEditable) {\n          return;\n        }\n\n        if (attributeName?.startsWith('data-')) {\n          return;\n        }\n\n        // eslint-disable-next-line no-console\n        onError(new Error(`Unexpected mutation detected: \\`${type === 'attributes' ? attributeName : type}\\``));\n      });\n    }\n  });\n\n  observer.observe(document.body, {\n    childList: true,\n    attributes: true,\n    subtree: true,\n    characterData: false,\n  });\n}\n\nfunction clearMutationObserver() {\n  observer?.disconnect();\n  observer = undefined;\n}\n\nfunction onMeasure(propName: string) {\n  if (phase !== 'measure') {\n    onError(new Error(`Unexpected measurement detected: \\`${propName}\\``));\n  }\n}\n","import { DEBUG } from '../config';\n\ntype Handler = (e: Event) => void;\ntype DelegationRegistry = Map<Element, Handler>;\n\nconst NON_BUBBLEABLE_EVENTS = new Set(['scroll', 'mouseenter', 'mouseleave', 'load']);\n\nconst documentEventCounters: Record<string, number> = {};\nconst delegationRegistryByEventType: Record<string, DelegationRegistry> = {};\nconst delegatedEventTypesByElement = new Map<Element, Set<string>>();\n\nexport function addEventListener(element: Element, propName: string, handler: Handler, asCapture = false) {\n  const eventType = resolveEventType(propName, element);\n  if (canUseEventDelegation(eventType, element, asCapture)) {\n    addDelegatedListener(eventType, element, handler);\n  } else {\n    element.addEventListener(eventType, handler, asCapture);\n  }\n}\n\nexport function removeEventListener(element: Element, propName: string, handler: Handler, asCapture = false) {\n  const eventType = resolveEventType(propName, element);\n  if (canUseEventDelegation(eventType, element, asCapture)) {\n    removeDelegatedListener(eventType, element);\n  } else {\n    element.removeEventListener(eventType, handler, asCapture);\n  }\n}\n\nfunction resolveEventType(propName: string, element: Element) {\n  const eventType = propName\n    .replace(/^on/, '')\n    .replace(/Capture$/, '').toLowerCase();\n\n  if (eventType === 'change' && element.tagName !== 'SELECT') {\n    // React behavior repeated here.\n    // https://stackoverflow.com/questions/38256332/in-react-whats-the-difference-between-onchange-and-oninput\n    return 'input';\n  }\n\n  if (eventType === 'doubleclick') {\n    return 'dblclick';\n  }\n\n  // Replace focus/blur by their \"bubbleable\" versions\n  if (eventType === 'focus') {\n    return 'focusin';\n  }\n\n  if (eventType === 'blur') {\n    return 'focusout';\n  }\n\n  return eventType;\n}\n\nfunction canUseEventDelegation(realEventType: string, element: Element, asCapture: boolean) {\n  return (\n    !asCapture\n    && !NON_BUBBLEABLE_EVENTS.has(realEventType)\n    && element.tagName !== 'VIDEO'\n    && element.tagName !== 'IFRAME'\n  );\n}\n\nfunction addDelegatedListener(eventType: string, element: Element, handler: Handler) {\n  if (!documentEventCounters[eventType]) {\n    documentEventCounters[eventType] = 0;\n    document.addEventListener(eventType, handleEvent);\n  }\n\n  resolveDelegationRegistry(eventType).set(element, handler);\n  resolveDelegatedEventTypes(element).add(eventType);\n  documentEventCounters[eventType]++;\n}\n\nfunction removeDelegatedListener(eventType: string, element: Element) {\n  documentEventCounters[eventType]--;\n  if (!documentEventCounters[eventType]) {\n    // Synchronous deletion on 0 will cause perf degradation in the case of 1 element\n    // which is not a real case, so it's ok to do it this way\n    document.removeEventListener(eventType, handleEvent);\n  }\n\n  delegationRegistryByEventType[eventType].delete(element);\n  delegatedEventTypesByElement.get(element)!.delete(eventType);\n}\n\nexport function removeAllDelegatedListeners(element: Element) {\n  const eventTypes = delegatedEventTypesByElement.get(element);\n  if (!eventTypes) {\n    return;\n  }\n\n  eventTypes.forEach((eventType) => removeDelegatedListener(eventType, element));\n  delegatedEventTypesByElement.delete(element);\n}\n\nfunction handleEvent(realEvent: Event) {\n  const events = delegationRegistryByEventType[realEvent.type];\n\n  if (events) {\n    let furtherCallsPrevented = false;\n    let current: Element = realEvent.target as Element;\n\n    const stopPropagation = () => {\n      furtherCallsPrevented = true;\n    };\n\n    const preventDefault = () => {\n      realEvent.preventDefault();\n    };\n\n    // Proxy is a simplest way to provide an access to the event property\n    const event = new Proxy(realEvent, {\n      get(target, p) {\n        if (p === 'currentTarget') {\n          return current;\n        }\n        if (p === 'stopPropagation' || p === 'stopImmediatePropagation') {\n          return stopPropagation;\n        }\n        if (p === 'preventDefault') {\n          // \"this\" is changed to proxy and one can't call methods via it\n          return preventDefault;\n        }\n        return Reflect.get(target, p);\n      },\n    });\n\n    // This can also be limited by teact root\n    while (current && current !== document.body) {\n      const handler = events.get(current);\n      if (handler) {\n        handler(event);\n        if (furtherCallsPrevented) {\n          return;\n        }\n      }\n\n      current = current.parentNode as Element;\n    }\n  }\n}\n\nfunction resolveDelegationRegistry(eventType: string) {\n  if (!delegationRegistryByEventType[eventType]) {\n    delegationRegistryByEventType[eventType] = new Map();\n  }\n\n  return delegationRegistryByEventType[eventType];\n}\n\nfunction resolveDelegatedEventTypes(element: Element) {\n  const existing = delegatedEventTypesByElement.get(element);\n  if (existing) {\n    return existing;\n  }\n\n  const newSet = new Set<string>();\n  delegatedEventTypesByElement.set(element, newSet);\n\n  return newSet;\n}\n\nif (DEBUG) {\n  document.addEventListener('dblclick', () => {\n    const documentListenersCount = Object.keys(documentEventCounters).length;\n    const delegatedHandlersCount1 = Object.values(documentEventCounters)\n      .reduce((acc, counter) => acc + counter, 0);\n    const delegationRegistriesCount = Object.keys(delegationRegistryByEventType).length;\n    const delegatedHandlersCount2 = Object.values(delegationRegistryByEventType)\n      .reduce((acc, delegationRegistry) => acc + delegationRegistry.size, 0);\n    const delegationElementsCount = delegatedEventTypesByElement.size;\n    const delegatedEventTypesCount = Array.from(delegatedEventTypesByElement.values())\n      .reduce((acc, eventTypes) => acc + eventTypes.size, 0);\n\n    // eslint-disable-next-line no-console\n    console.warn('DELEGATED EVENTS STATS', {\n      delegatedHandlersCount1,\n      delegatedHandlersCount2,\n      delegatedEventTypesCount,\n      delegationRegistriesCount,\n      delegationElementsCount,\n      documentListenersCount,\n    });\n  });\n}\n","import type { ChangeEvent } from 'react';\n\nimport type { Signal } from '../util/signals';\nimport type {\n  VirtualElement,\n  VirtualElementChildren,\n  VirtualElementComponent,\n  VirtualElementFragment,\n  VirtualElementParent,\n  VirtualElementReal,\n  VirtualElementTag,\n} from './teact';\n\nimport { DEBUG } from '../config';\nimport { unique } from '../util/iteratees';\nimport { addEventListener, removeAllDelegatedListeners, removeEventListener } from './dom-events';\nimport {\n  captureImmediateEffects,\n  hasElementChanged,\n  isParentElement,\n  mountComponent,\n  MountState,\n  renderComponent,\n  unmountComponent,\n  VirtualType,\n} from './teact';\n\ninterface VirtualDomHead {\n  children: [VirtualElement] | [];\n}\n\ninterface SelectionState {\n  selectionStart: number | null;\n  selectionEnd: number | null;\n  isCaretAtEnd: boolean;\n}\n\ntype CurrentContext = Record<string, Signal<unknown>>;\n\ntype DOMElement = HTMLElement | SVGElement;\n\nconst FILTERED_ATTRIBUTES = new Set(['key', 'ref', 'teactFastList', 'teactOrderKey']);\nconst HTML_ATTRIBUTES = new Set(['dir', 'role', 'form']);\nconst CONTROLLABLE_TAGS = ['INPUT', 'TEXTAREA', 'SELECT'];\nconst MAPPED_ATTRIBUTES: { [k: string]: string } = {\n  autoPlay: 'autoplay',\n  autoComplete: 'autocomplete',\n};\nconst INDEX_KEY_PREFIX = '__indexKey#';\n\nconst headsByElement = new WeakMap<Element, VirtualDomHead>();\nconst extraClasses = new WeakMap<Element, Set<string>>();\nconst extraStyles = new WeakMap<Element, Record<string, string>>();\n\nfunction render($element: VirtualElement | undefined, parentEl: HTMLElement) {\n  if (!headsByElement.has(parentEl)) {\n    headsByElement.set(parentEl, { children: [] });\n  }\n\n  const runImmediateEffects = captureImmediateEffects();\n  const $head = headsByElement.get(parentEl)!;\n  const $renderedChild = renderWithVirtual(parentEl, $head.children[0], $element, $head, {}, 0);\n  runImmediateEffects?.();\n\n  $head.children = $renderedChild ? [$renderedChild] : [];\n\n  return undefined;\n}\n\nfunction renderWithVirtual<T extends VirtualElement | undefined>(\n  parentEl: DOMElement,\n  $current: VirtualElement | undefined,\n  $new: T,\n  $parent: VirtualElementParent | VirtualDomHead,\n  currentContext: CurrentContext,\n  index: number,\n  options: {\n    skipComponentUpdate?: boolean;\n    nextSibling?: ChildNode;\n    forceMoveToEnd?: boolean;\n    fragment?: DocumentFragment;\n    isSvg?: true;\n  } = {},\n): T {\n  const { skipComponentUpdate, fragment } = options;\n  let { nextSibling, isSvg } = options;\n\n  const isCurrentComponent = $current?.type === VirtualType.Component;\n  const isNewComponent = $new?.type === VirtualType.Component;\n  const $newAsReal = $new as VirtualElementReal;\n\n  const isCurrentFragment = !isCurrentComponent && $current?.type === VirtualType.Fragment;\n  const isNewFragment = !isNewComponent && $new?.type === VirtualType.Fragment;\n\n  if (!isSvg && $new?.type === VirtualType.Tag && $new.tag === 'svg') {\n    isSvg = true;\n  }\n\n  if (\n    !skipComponentUpdate\n    && isCurrentComponent && isNewComponent\n    && !hasElementChanged($current!, $new!)\n  ) {\n    $new = updateComponent($current, $new as VirtualElementComponent) as typeof $new;\n  }\n\n  // Parent element may have changed, so we need to update the listener closure.\n  if (\n    !skipComponentUpdate\n    && isNewComponent\n    && ($new as VirtualElementComponent).componentInstance.mountState === MountState.Mounted\n  ) {\n    setupComponentUpdateListener(parentEl, $new as VirtualElementComponent, $parent, currentContext, index);\n  }\n\n  if ($current === $new) {\n    return $new;\n  }\n\n  if (DEBUG && $new) {\n    const newTarget = 'target' in $new && $new.target;\n    if (newTarget && (!$current || ('target' in $current && newTarget !== $current.target))) {\n      throw new Error('[Teact] Cached virtual element was moved within tree');\n    }\n  }\n\n  if (!$current && $new) {\n    if (isNewComponent || isNewFragment) {\n      if (isNewComponent) {\n        $new = initComponent(\n          parentEl, $new as VirtualElementComponent, $parent, currentContext, index,\n        ) as unknown as typeof $new;\n        currentContext = ($new as VirtualElementComponent).componentInstance.context ?? currentContext;\n      }\n\n      mountChildren(parentEl, $new as VirtualElementComponent | VirtualElementFragment, currentContext, {\n        nextSibling, fragment, isSvg,\n      });\n    } else {\n      const canSetTextContent = !fragment\n        && !nextSibling\n        && $newAsReal.type === VirtualType.Text\n        && $parent.children.length === 1\n        && !parentEl.firstChild;\n\n      if (canSetTextContent) {\n        parentEl.textContent = $newAsReal.value;\n        $newAsReal.target = parentEl.firstChild!;\n      } else {\n        const node = createNode($newAsReal, currentContext, isSvg);\n        $newAsReal.target = node;\n        insertBefore(fragment || parentEl, node, nextSibling);\n\n        if ($newAsReal.type === VirtualType.Tag) {\n          setElementRef($newAsReal, node as DOMElement);\n        }\n      }\n    }\n  } else if ($current && !$new) {\n    remount(parentEl, $current, currentContext, undefined);\n  } else if ($current && $new) {\n    if (hasElementChanged($current, $new)) {\n      if (!nextSibling) {\n        nextSibling = getNextSibling($current);\n      }\n\n      if (isNewComponent || isNewFragment) {\n        if (isNewComponent) {\n          $new = initComponent(\n            parentEl, $new as VirtualElementComponent, $parent, currentContext, index,\n          ) as unknown as typeof $new;\n          currentContext = ($new as VirtualElementComponent).componentInstance.context ?? currentContext;\n        }\n\n        remount(parentEl, $current, currentContext, undefined);\n        mountChildren(parentEl, $new as VirtualElementComponent | VirtualElementFragment, currentContext, {\n          nextSibling, fragment, isSvg,\n        });\n      } else {\n        const node = createNode($newAsReal, currentContext, isSvg);\n        $newAsReal.target = node;\n        remount(parentEl, $current, currentContext, node, nextSibling);\n\n        if ($newAsReal.type === VirtualType.Tag) {\n          setElementRef($newAsReal, node as DOMElement);\n        }\n      }\n    } else {\n      const isComponent = isCurrentComponent && isNewComponent;\n      const isFragment = isCurrentFragment && isNewFragment;\n\n      if (isComponent || isFragment) {\n        renderChildren(\n          $current,\n          $new as VirtualElementComponent | VirtualElementFragment,\n          currentContext,\n          parentEl,\n          nextSibling,\n          options.forceMoveToEnd,\n        );\n      } else {\n        const $currentAsReal = $current as VirtualElementReal;\n        const currentTarget = $currentAsReal.target!;\n\n        $newAsReal.target = currentTarget;\n        $currentAsReal.target = undefined; // Help GC\n\n        const isTag = $current.type === VirtualType.Tag;\n        if (isTag) {\n          const $newAsTag = $new as VirtualElementTag;\n\n          setElementRef($current, undefined);\n          setElementRef($newAsTag, currentTarget as DOMElement);\n\n          if (nextSibling || options.forceMoveToEnd) {\n            insertBefore(parentEl, currentTarget, nextSibling);\n          }\n\n          updateAttributes($current, $newAsTag, currentTarget as DOMElement, isSvg);\n          renderChildren($current, $newAsTag, currentContext, currentTarget as DOMElement, undefined, undefined, isSvg);\n        }\n      }\n    }\n  }\n\n  return $new;\n}\n\nfunction initComponent(\n  parentEl: DOMElement,\n  $element: VirtualElementComponent,\n  $parent: VirtualElementParent | VirtualDomHead,\n  currentContext: CurrentContext,\n  index: number,\n) {\n  const { componentInstance } = $element;\n\n  $element.componentInstance.context = currentContext;\n\n  if (componentInstance.mountState === MountState.New) {\n    $element = mountComponent(componentInstance);\n    setupComponentUpdateListener(parentEl, $element, $parent, currentContext, index);\n  }\n\n  return $element;\n}\n\nfunction updateComponent($current: VirtualElementComponent, $new: VirtualElementComponent) {\n  $current.componentInstance.props = $new.componentInstance.props;\n\n  return renderComponent($current.componentInstance);\n}\n\nfunction setupComponentUpdateListener(\n  parentEl: DOMElement,\n  $element: VirtualElementComponent,\n  $parent: VirtualElementParent | VirtualDomHead,\n  currentContext: CurrentContext,\n  index: number,\n) {\n  const { componentInstance } = $element;\n\n  componentInstance.onUpdate = () => {\n    $parent.children[index] = renderWithVirtual(\n      parentEl,\n      $parent.children[index],\n      componentInstance.$element,\n      $parent,\n      currentContext,\n      index,\n      { skipComponentUpdate: true },\n    );\n  };\n}\n\nfunction mountChildren(\n  parentEl: DOMElement,\n  $element: VirtualElementComponent | VirtualElementFragment,\n  currentContext: CurrentContext,\n  options: {\n    nextSibling?: ChildNode;\n    fragment?: DocumentFragment;\n    isSvg?: true;\n  },\n) {\n  const { children } = $element;\n  for (let i = 0, l = children.length; i < l; i++) {\n    const $child = children[i];\n    const $renderedChild = renderWithVirtual(parentEl, undefined, $child, $element, currentContext, i, options);\n    if ($renderedChild !== $child) {\n      children[i] = $renderedChild;\n    }\n  }\n}\n\nfunction unmountChildren(\n  parentEl: DOMElement, $element: VirtualElementComponent | VirtualElementFragment, currentContext: CurrentContext,\n) {\n  for (const $child of $element.children) {\n    renderWithVirtual(parentEl, $child, undefined, $element, currentContext, -1);\n  }\n}\n\nfunction createNode($element: VirtualElementReal, currentContext: CurrentContext, isSvg?: true): Node {\n  if ($element.type === VirtualType.Empty) {\n    return document.createTextNode('');\n  }\n\n  if ($element.type === VirtualType.Text) {\n    return document.createTextNode($element.value);\n  }\n\n  const { tag, props, children } = $element;\n  const element = isSvg ? document.createElementNS('http://www.w3.org/2000/svg', tag) : document.createElement(tag);\n\n  processControlled(tag, props);\n\n  // eslint-disable-next-line no-restricted-syntax\n  for (const key in props) {\n    if (!props.hasOwnProperty(key)) continue;\n\n    if (props[key] !== undefined) {\n      setAttribute(element, key, props[key], isSvg);\n    }\n  }\n\n  processUncontrolledOnMount(element, props);\n\n  for (let i = 0, l = children.length; i < l; i++) {\n    const $child = children[i];\n    const $renderedChild = renderWithVirtual(element, undefined, $child, $element, currentContext, i, { isSvg });\n    if ($renderedChild !== $child) {\n      children[i] = $renderedChild;\n    }\n  }\n\n  return element;\n}\n\nfunction remount(\n  parentEl: DOMElement,\n  $current: VirtualElement,\n  currentContext: CurrentContext,\n  node: Node | undefined,\n  componentNextSibling?: ChildNode,\n) {\n  const isComponent = $current.type === VirtualType.Component;\n  const isFragment = !isComponent && $current.type === VirtualType.Fragment;\n\n  if (isComponent || isFragment) {\n    if (isComponent) {\n      unmountComponent($current.componentInstance);\n    }\n\n    unmountChildren(parentEl, $current, currentContext);\n\n    if (node) {\n      insertBefore(parentEl, node, componentNextSibling);\n    }\n  } else {\n    if (node) {\n      parentEl.replaceChild(node, $current.target!);\n    } else {\n      parentEl.removeChild($current.target!);\n    }\n\n    unmountRealTree($current);\n  }\n}\n\nfunction unmountRealTree($element: VirtualElement) {\n  if ($element.type === VirtualType.Component) {\n    unmountComponent($element.componentInstance);\n  } else if ($element.type !== VirtualType.Fragment) {\n    if ($element.type === VirtualType.Tag) {\n      extraClasses.delete($element.target!);\n      setElementRef($element, undefined);\n      removeAllDelegatedListeners($element.target!);\n    }\n\n    $element.target = undefined; // Help GC\n\n    if ($element.type !== VirtualType.Tag) {\n      return;\n    }\n  }\n\n  for (const $child of $element.children) {\n    unmountRealTree($child);\n  }\n}\n\nfunction insertBefore(parentEl: DOMElement | DocumentFragment, node: Node, nextSibling?: ChildNode) {\n  if (nextSibling) {\n    parentEl.insertBefore(node, nextSibling);\n  } else {\n    parentEl.appendChild(node);\n  }\n}\n\nfunction getNextSibling($current: VirtualElement): ChildNode | undefined {\n  if ($current.type === VirtualType.Component || $current.type === VirtualType.Fragment) {\n    const lastChild = $current.children[$current.children.length - 1];\n    return getNextSibling(lastChild);\n  }\n\n  return $current.target!.nextSibling || undefined;\n}\n\nfunction renderChildren(\n  $current: VirtualElementParent,\n  $new: VirtualElementParent,\n  currentContext: CurrentContext,\n  currentEl: DOMElement,\n  nextSibling?: ChildNode,\n  forceMoveToEnd = false,\n  isSvg?: true,\n) {\n  if (DEBUG) {\n    DEBUG_checkKeyUniqueness($new.children);\n  }\n\n  if (('props' in $new) && $new.props.teactFastList) {\n    renderFastListChildren($current, $new, currentContext, currentEl);\n    return;\n  }\n\n  const currentChildren = $current.children;\n  const newChildren = $new.children;\n\n  const currentChildrenLength = currentChildren.length;\n  const newChildrenLength = newChildren.length;\n  const maxLength = Math.max(currentChildrenLength, newChildrenLength);\n\n  const fragment = newChildrenLength > currentChildrenLength ? document.createDocumentFragment() : undefined;\n  const lastCurrentChild = $current.children[currentChildrenLength - 1];\n  const fragmentNextSibling = fragment && (\n    nextSibling || (lastCurrentChild ? getNextSibling(lastCurrentChild) : undefined)\n  );\n\n  for (let i = 0; i < maxLength; i++) {\n    const $renderedChild = renderWithVirtual(\n      currentEl,\n      currentChildren[i],\n      newChildren[i],\n      $new,\n      currentContext,\n      i,\n      i >= currentChildrenLength ? { fragment, isSvg } : { nextSibling, forceMoveToEnd, isSvg },\n    );\n\n    if ($renderedChild && $renderedChild !== newChildren[i]) {\n      newChildren[i] = $renderedChild;\n    }\n  }\n\n  if (fragment) {\n    insertBefore(currentEl, fragment, fragmentNextSibling);\n  }\n}\n\n// This function allows to prepend/append a bunch of new DOM nodes to the top/bottom of preserved ones.\n// It also allows to selectively move particular preserved nodes within their DOM list.\nfunction renderFastListChildren(\n  $current: VirtualElementParent, $new: VirtualElementParent, currentContext: CurrentContext, currentEl: DOMElement,\n) {\n  const currentChildren = $current.children;\n  const newChildren = $new.children;\n\n  const newKeys = new Set();\n  for (const $newChild of newChildren) {\n    const key = 'props' in $newChild ? $newChild.props.key : undefined;\n\n    if (DEBUG && isParentElement($newChild)) {\n      // eslint-disable-next-line no-null/no-null\n      if (key === undefined || key === null) {\n        // eslint-disable-next-line no-console\n        console.warn('Missing `key` in `teactFastList`');\n      }\n\n      if ($newChild.type === VirtualType.Fragment) {\n        throw new Error('[Teact] Fragment can not be child of container with `teactFastList`');\n      }\n    }\n\n    newKeys.add(key);\n  }\n\n  // Build a collection of old children that also remain in the new list\n  let currentRemainingIndex = 0;\n  const remainingByKey: Record<string, { $element: VirtualElement; index: number; orderKey?: number }> = {};\n  for (let i = 0, l = currentChildren.length; i < l; i++) {\n    const $currentChild = currentChildren[i];\n\n    let key = 'props' in $currentChild ? $currentChild.props.key : undefined;\n    // eslint-disable-next-line no-null/no-null\n    const isKeyPresent = key !== undefined && key !== null;\n\n    // First we process removed children\n    if (isKeyPresent && !newKeys.has(key)) {\n      renderWithVirtual(currentEl, $currentChild, undefined, $new, currentContext, -1);\n\n      continue;\n    } else if (!isKeyPresent) {\n      const $newChild = newChildren[i];\n      const newChildKey = ($newChild && 'props' in $newChild) ? $newChild.props.key : undefined;\n      // If a non-key element remains at the same index we preserve it with a virtual `key`\n      if ($newChild && !newChildKey) {\n        key = `${INDEX_KEY_PREFIX}${i}`;\n        // Otherwise, we just remove it\n      } else {\n        renderWithVirtual(currentEl, $currentChild, undefined, $new, currentContext, -1);\n\n        continue;\n      }\n    }\n\n    // Then we build up info about remaining children\n    remainingByKey[key] = {\n      $element: $currentChild,\n      index: currentRemainingIndex++,\n      orderKey: 'props' in $currentChild ? $currentChild.props.teactOrderKey : undefined,\n    };\n  }\n\n  let fragmentIndex: number | undefined;\n  let fragmentSize: number | undefined;\n\n  let currentPreservedIndex = 0;\n\n  for (let i = 0, l = newChildren.length; i < l; i++) {\n    const $newChild = newChildren[i];\n    const key = 'props' in $newChild ? $newChild.props.key : `${INDEX_KEY_PREFIX}${i}`;\n    const currentChildInfo = remainingByKey[key];\n\n    if (!currentChildInfo) {\n      if (fragmentSize === undefined) {\n        fragmentIndex = i;\n        fragmentSize = 0;\n      }\n\n      fragmentSize++;\n      continue;\n    }\n\n    // This prepends new children to the top\n    if (fragmentSize) {\n      renderFragment(fragmentIndex!, fragmentSize, currentEl, $new, currentContext);\n      fragmentSize = undefined;\n      fragmentIndex = undefined;\n    }\n\n    // Now we check if a preserved node was moved within preserved list\n    const newOrderKey = 'props' in $newChild ? $newChild.props.teactOrderKey : undefined;\n    // That is indicated by a changed `teactOrderKey` value\n    const shouldMoveNode = (\n      currentChildInfo.index !== currentPreservedIndex && (!newOrderKey || currentChildInfo.orderKey !== newOrderKey)\n    );\n    const isMovingDown = shouldMoveNode && currentPreservedIndex > currentChildInfo.index;\n\n    if (!shouldMoveNode || isMovingDown) {\n      currentPreservedIndex++;\n    }\n\n    const nextSibling = currentEl.childNodes[isMovingDown ? i + 1 : i];\n    const options = shouldMoveNode ? (nextSibling ? { nextSibling } : { forceMoveToEnd: true }) : undefined;\n\n    const $renderedChild = renderWithVirtual(\n      currentEl, currentChildInfo.$element, $newChild, $new, currentContext, i, options,\n    );\n    if ($renderedChild !== $newChild) {\n      newChildren[i] = $renderedChild;\n    }\n  }\n\n  // This appends new children to the bottom\n  if (fragmentSize) {\n    renderFragment(fragmentIndex!, fragmentSize, currentEl, $new, currentContext);\n  }\n}\n\nfunction renderFragment(\n  fragmentIndex: number,\n  fragmentSize: number,\n  parentEl: DOMElement,\n  $parent: VirtualElementParent,\n  currentContext: CurrentContext,\n) {\n  const nextSibling = parentEl.childNodes[fragmentIndex];\n\n  if (fragmentSize === 1) {\n    const $child = $parent.children[fragmentIndex];\n    const $renderedChild = renderWithVirtual(\n      parentEl, undefined, $child, $parent, currentContext, fragmentIndex, { nextSibling },\n    );\n    if ($renderedChild !== $child) {\n      $parent.children[fragmentIndex] = $renderedChild;\n    }\n\n    return;\n  }\n\n  const fragment = document.createDocumentFragment();\n\n  for (let i = fragmentIndex; i < fragmentIndex + fragmentSize; i++) {\n    const $child = $parent.children[i];\n    const $renderedChild = renderWithVirtual(parentEl, undefined, $child, $parent, currentContext, i, { fragment });\n    if ($renderedChild !== $child) {\n      $parent.children[i] = $renderedChild;\n    }\n  }\n\n  insertBefore(parentEl, fragment, nextSibling);\n}\n\nfunction setElementRef($element: VirtualElementTag, element: DOMElement | undefined) {\n  const { ref } = $element.props;\n\n  if (typeof ref === 'object') {\n    ref.current = element;\n  } else if (typeof ref === 'function') {\n    ref(element);\n  }\n}\n\nfunction processControlled(tag: string, props: AnyLiteral) {\n  const isValueControlled = props.value !== undefined;\n  const isCheckedControlled = props.checked !== undefined;\n  const isControlled = (isValueControlled || isCheckedControlled) && CONTROLLABLE_TAGS.includes(tag.toUpperCase());\n  if (!isControlled) {\n    return;\n  }\n\n  const {\n    value, checked, onInput, onChange,\n  } = props;\n\n  props.onChange = undefined;\n  props.onInput = (e: ChangeEvent<HTMLInputElement>) => {\n    onInput?.(e);\n    onChange?.(e);\n\n    if (value !== undefined && value !== e.currentTarget.value) {\n      const { selectionStart, selectionEnd } = e.currentTarget;\n      const isCaretAtEnd = selectionStart === selectionEnd && selectionEnd === e.currentTarget.value.length;\n\n      e.currentTarget.value = value;\n\n      if (typeof selectionStart === 'number' && typeof selectionEnd === 'number') {\n        e.currentTarget.setSelectionRange(selectionStart, selectionEnd);\n\n        const selectionState: SelectionState = { selectionStart, selectionEnd, isCaretAtEnd };\n        // eslint-disable-next-line no-underscore-dangle\n        e.currentTarget.dataset.__teactSelectionState = JSON.stringify(selectionState);\n      }\n    }\n\n    if (checked !== undefined) {\n      e.currentTarget.checked = checked;\n    }\n  };\n}\n\nfunction processUncontrolledOnMount(element: DOMElement, props: AnyLiteral) {\n  if (!CONTROLLABLE_TAGS.includes(element.tagName)) {\n    return;\n  }\n\n  if (props.defaultValue) {\n    setAttribute(element, 'value', props.defaultValue);\n  }\n\n  if (props.defaultChecked) {\n    setAttribute(element, 'checked', props.defaultChecked);\n  }\n}\n\nfunction updateAttributes($current: VirtualElementTag, $new: VirtualElementTag, element: DOMElement, isSvg?: true) {\n  processControlled(element.tagName, $new.props);\n\n  const currentEntries = Object.entries($current.props);\n  const newEntries = Object.entries($new.props);\n\n  for (const [key, currentValue] of currentEntries) {\n    const newValue = $new.props[key];\n\n    if (\n      currentValue !== undefined\n      && (\n        newValue === undefined\n        || (currentValue !== newValue && key.startsWith('on'))\n      )\n    ) {\n      removeAttribute(element, key, currentValue);\n    }\n  }\n\n  for (const [key, newValue] of newEntries) {\n    const currentValue = $current.props[key];\n\n    if (newValue !== undefined && newValue !== currentValue) {\n      setAttribute(element, key, newValue, isSvg);\n    }\n  }\n}\n\nfunction setAttribute(element: DOMElement, key: string, value: any, isSvg?: true) {\n  if (key === 'className') {\n    updateClassName(element, value, isSvg);\n  } else if (key === 'value') {\n    const inputEl = element as HTMLInputElement;\n\n    if (inputEl.value !== value) {\n      inputEl.value = value;\n\n      // eslint-disable-next-line no-underscore-dangle\n      const selectionStateJson = inputEl.dataset.__teactSelectionState;\n      if (selectionStateJson) {\n        const { selectionStart, selectionEnd, isCaretAtEnd } = JSON.parse(selectionStateJson) as SelectionState;\n\n        if (isCaretAtEnd) {\n          const length = inputEl.value.length;\n          inputEl.setSelectionRange(length, length);\n        } else if (typeof selectionStart === 'number' && typeof selectionEnd === 'number') {\n          inputEl.setSelectionRange(selectionStart, selectionEnd);\n        }\n      }\n    }\n  } else if (key === 'style') {\n    updateStyle(element, value);\n  } else if (key === 'dangerouslySetInnerHTML') {\n    // eslint-disable-next-line no-underscore-dangle\n    element.innerHTML = value.__html;\n  } else if (key.startsWith('on')) {\n    addEventListener(element, key, value, key.endsWith('Capture'));\n  } else if (isSvg || key.startsWith('data-') || key.startsWith('aria-') || HTML_ATTRIBUTES.has(key)) {\n    element.setAttribute(key, value);\n  } else if (!FILTERED_ATTRIBUTES.has(key)) {\n    (element as any)[MAPPED_ATTRIBUTES[key] || key] = value;\n  }\n}\n\nfunction removeAttribute(element: DOMElement, key: string, value: any) {\n  if (key === 'className') {\n    updateClassName(element, '');\n  } else if (key === 'value') {\n    (element as HTMLInputElement).value = '';\n  } else if (key === 'style') {\n    updateStyle(element, '');\n  } else if (key === 'dangerouslySetInnerHTML') {\n    element.innerHTML = '';\n  } else if (key.startsWith('on')) {\n    removeEventListener(element, key, value, key.endsWith('Capture'));\n  } else if (!FILTERED_ATTRIBUTES.has(key)) {\n    element.removeAttribute(key);\n  }\n}\n\nfunction updateClassName(element: DOMElement, value: string, isSvg?: true) {\n  if (isSvg) {\n    element.setAttribute('class', value);\n    return;\n  }\n\n  const htmlElement = element as HTMLElement;\n  const extra = extraClasses.get(element);\n  if (!extra) {\n    htmlElement.className = value;\n    return;\n  }\n\n  const extraArray = Array.from(extra);\n  if (value) {\n    extraArray.push(value);\n  }\n\n  htmlElement.className = extraArray.join(' ');\n}\n\nfunction updateStyle(element: DOMElement, value: string) {\n  element.style.cssText = value;\n\n  const extraObject = extraStyles.get(element);\n  if (extraObject) {\n    applyExtraStyles(element);\n  }\n}\n\nexport function addExtraClass(element: DOMElement, className: string, forceSingle = false) {\n  if (!forceSingle) {\n    const classNames = className.split(' ');\n    if (classNames.length > 1) {\n      for (const cn of classNames) {\n        addExtraClass(element, cn, true);\n      }\n\n      return;\n    }\n  }\n\n  element.classList.add(className);\n\n  const classList = extraClasses.get(element);\n  if (classList) {\n    classList.add(className);\n  } else {\n    extraClasses.set(element, new Set([className]));\n  }\n}\n\nexport function removeExtraClass(element: DOMElement, className: string, forceSingle = false) {\n  if (!forceSingle) {\n    const classNames = className.split(' ');\n    if (classNames.length > 1) {\n      for (const cn of classNames) {\n        removeExtraClass(element, cn, true);\n      }\n\n      return;\n    }\n  }\n\n  element.classList.remove(className);\n\n  const classList = extraClasses.get(element);\n  if (classList) {\n    classList.delete(className);\n\n    if (!classList.size) {\n      extraClasses.delete(element);\n    }\n  }\n}\n\nexport function toggleExtraClass(element: DOMElement, className: string, force?: boolean, forceSingle = false) {\n  if (!forceSingle) {\n    const classNames = className.split(' ');\n    if (classNames.length > 1) {\n      for (const cn of classNames) {\n        toggleExtraClass(element, cn, force, true);\n      }\n\n      return;\n    }\n  }\n\n  element.classList.toggle(className, force);\n\n  if (element.classList.contains(className)) {\n    addExtraClass(element, className);\n  } else {\n    removeExtraClass(element, className);\n  }\n}\n\nexport function setExtraStyles(element: DOMElement, styles: Partial<CSSStyleDeclaration> & AnyLiteral) {\n  extraStyles.set(element, styles);\n  applyExtraStyles(element);\n}\n\nfunction applyExtraStyles(element: DOMElement) {\n  const standardStyles = Object.entries(extraStyles.get(element)!).reduce<Record<string, string>>(\n    (acc, [prop, value]) => {\n      if (prop.startsWith('--')) {\n        element.style.setProperty(prop, value);\n      } else {\n        acc[prop] = value;\n      }\n\n      return acc;\n    },\n    {},\n  );\n\n  Object.assign(element.style, standardStyles);\n}\n\n// eslint-disable-next-line @typescript-eslint/naming-convention\nfunction DEBUG_checkKeyUniqueness(children: VirtualElementChildren) {\n  const firstChild = children[0];\n  if (firstChild && 'props' in firstChild && firstChild.props.key !== undefined) {\n    const keys = children.reduce((acc: any[], child) => {\n      if ('props' in child && child.props.key) {\n        acc.push(child.props.key);\n      }\n\n      return acc;\n    }, []);\n\n    if (keys.length !== unique(keys).length) {\n      // eslint-disable-next-line no-console\n      console.warn('[Teact] Duplicated keys:', keys.filter((e, i, a) => a.indexOf(e) !== i), children);\n      throw new Error('[Teact] Children keys are not unique');\n    }\n  }\n}\n\nconst TeactDOM = { render };\nexport default TeactDOM;\n","import type { ReactElement } from 'react';\n\nimport { DEBUG, DEBUG_MORE } from '../config';\nimport { logUnequalProps } from '../util/arePropsShallowEqual';\nimport { incrementOverlayCounter } from '../util/debugOverlay';\nimport { orderBy } from '../util/iteratees';\nimport safeExec from '../util/safeExec';\nimport { throttleWith } from '../util/schedulers';\nimport { createSignal, isSignal, type Signal } from '../util/signals';\nimport { requestMeasure, requestMutation } from '../lib/fasterdom/fasterdom';\n\nexport type Props = AnyLiteral;\nexport type FC<P extends Props = any> = (props: P) => any;\n// eslint-disable-next-line @typescript-eslint/naming-convention\nexport type FC_withDebug =\n  FC\n  & { DEBUG_contentComponentName?: string };\n\nexport enum VirtualType {\n  Empty,\n  Text,\n  Tag,\n  Component,\n  Fragment,\n}\n\ninterface VirtualElementEmpty {\n  type: VirtualType.Empty;\n  target?: Node;\n}\n\ninterface VirtualElementText {\n  type: VirtualType.Text;\n  target?: Node;\n  value: string;\n}\n\nexport interface VirtualElementTag {\n  type: VirtualType.Tag;\n  target?: HTMLElement | SVGElement;\n  tag: string;\n  props: Props;\n  children: VirtualElementChildren;\n}\n\nexport interface VirtualElementComponent {\n  type: VirtualType.Component;\n  componentInstance: ComponentInstance;\n  props: Props;\n  children: VirtualElementChildren;\n}\n\nexport interface VirtualElementFragment {\n  type: VirtualType.Fragment;\n  children: VirtualElementChildren;\n}\n\nexport type StateHookSetter<T> = (newValue: ((current: T) => T) | T) => void;\n\nexport enum MountState {\n  New,\n  Mounted,\n  Unmounted,\n}\n\ninterface ComponentInstance {\n  id: number;\n  $element: VirtualElementComponent;\n  Component: FC;\n  name: string;\n  props: Props;\n  renderedValue?: any;\n  mountState: MountState;\n  context?: Record<string, Signal<unknown>>;\n  hooks?: {\n    state?: {\n      cursor: number;\n      byCursor: {\n        value: any;\n        nextValue: any;\n        setter: StateHookSetter<any>;\n      }[];\n    };\n    effects?: {\n      cursor: number;\n      byCursor: {\n        dependencies?: readonly any[];\n        schedule: NoneToVoidFunction;\n        cleanup?: NoneToVoidFunction;\n        releaseSignals?: NoneToVoidFunction;\n      }[];\n    };\n    memos?: {\n      cursor: number;\n      byCursor: {\n        value: any;\n        dependencies: any[];\n      }[];\n    };\n    refs?: {\n      cursor: number;\n      byCursor: {\n        current: any;\n      }[];\n    };\n  };\n  prepareForFrame?: () => void;\n  forceUpdate?: () => void;\n  onUpdate?: () => void;\n}\n\nexport type VirtualElement =\n  VirtualElementEmpty\n  | VirtualElementText\n  | VirtualElementTag\n  | VirtualElementComponent\n  | VirtualElementFragment;\nexport type VirtualElementParent =\n  VirtualElementTag\n  | VirtualElementComponent\n  | VirtualElementFragment;\nexport type VirtualElementChildren = VirtualElement[];\nexport type VirtualElementReal = Exclude<VirtualElement, VirtualElementComponent | VirtualElementFragment>;\n\n// Compatibility with JSX types\nexport type TeactNode =\n  ReactElement\n  | string\n  | number\n  | boolean\n  | TeactNode[];\n\ntype Effect = () => (NoneToVoidFunction | void);\ntype EffectCleanup = NoneToVoidFunction;\n\nexport type Context<T> = {\n  defaultValue?: T;\n  contextId: string;\n  Provider: FC<{ value: T; children: TeactNode }>;\n};\n\nconst Fragment = Symbol('Fragment');\n\nconst DEBUG_RENDER_THRESHOLD = 7;\nconst DEBUG_EFFECT_THRESHOLD = 7;\nconst DEBUG_SILENT_RENDERS_FOR = new Set(['TeactMemoWrapper', 'TeactNContainer', 'Button', 'ListItem', 'MenuItem']);\n\nlet contextCounter = 0;\n\nlet lastComponentId = 0;\nlet renderingInstance: ComponentInstance;\n\nexport function isParentElement($element: VirtualElement): $element is VirtualElementParent {\n  return (\n    $element.type === VirtualType.Tag\n    || $element.type === VirtualType.Component\n    || $element.type === VirtualType.Fragment\n  );\n}\n\nfunction createElement(\n  source: string | FC | typeof Fragment,\n  props: Props,\n  ...children: any[]\n): VirtualElementParent | VirtualElementChildren {\n  if (source === Fragment) {\n    return buildFragmentElement(children);\n  } else if (typeof source === 'function') {\n    return createComponentInstance(source, props || {}, children);\n  } else {\n    return buildTagElement(source, props || {}, children);\n  }\n}\n\nfunction buildFragmentElement(children: any[]): VirtualElementFragment {\n  return {\n    type: VirtualType.Fragment,\n    children: buildChildren(children, true),\n  };\n}\n\nfunction createComponentInstance(Component: FC, props: Props, children: any[]): VirtualElementComponent {\n  if (children?.length) {\n    props.children = children.length === 1 ? children[0] : children;\n  }\n\n  const componentInstance: ComponentInstance = {\n    id: -1,\n    $element: undefined as unknown as VirtualElementComponent,\n    Component,\n    name: Component.name,\n    props,\n    mountState: MountState.New,\n  };\n\n  componentInstance.$element = buildComponentElement(componentInstance);\n\n  return componentInstance.$element;\n}\n\nfunction buildComponentElement(\n  componentInstance: ComponentInstance,\n  children?: VirtualElementChildren,\n): VirtualElementComponent {\n  return {\n    type: VirtualType.Component,\n    componentInstance,\n    props: componentInstance.props,\n    children: children ? buildChildren(children, true) : [],\n  };\n}\n\nfunction buildTagElement(tag: string, props: Props, children: any[]): VirtualElementTag {\n  return {\n    type: VirtualType.Tag,\n    tag,\n    props,\n    children: buildChildren(children),\n  };\n}\n\nfunction buildChildren(children: any[], noEmpty = false): VirtualElement[] {\n  const cleanChildren = dropEmptyTail(children, noEmpty);\n  const newChildren = [];\n\n  for (let i = 0, l = cleanChildren.length; i < l; i++) {\n    const child = cleanChildren[i];\n    if (Array.isArray(child)) {\n      newChildren.push(...buildChildren(child, noEmpty));\n    } else {\n      newChildren.push(buildChildElement(child));\n    }\n  }\n\n  return newChildren;\n}\n\n// We only need placeholders in the middle of collection (to ensure other elements order).\nfunction dropEmptyTail(children: any[], noEmpty = false) {\n  let i = children.length - 1;\n\n  for (; i >= 0; i--) {\n    if (!isEmptyPlaceholder(children[i])) {\n      break;\n    }\n  }\n\n  if (i === children.length - 1) {\n    return children;\n  }\n\n  if (i === -1 && noEmpty) {\n    return children.slice(0, 1);\n  }\n\n  return children.slice(0, i + 1);\n}\n\nfunction isEmptyPlaceholder(child: any) {\n  return !child && child !== 0;\n}\n\nfunction buildChildElement(child: any): VirtualElement {\n  if (isEmptyPlaceholder(child)) {\n    return { type: VirtualType.Empty };\n  } else if (isParentElement(child)) {\n    return child;\n  } else {\n    return {\n      type: VirtualType.Text,\n      value: String(child),\n    };\n  }\n}\n\n// eslint-disable-next-line @typescript-eslint/naming-convention\nconst DEBUG_components: AnyLiteral = { TOTAL: { name: 'TOTAL', renders: 0 } };\n// eslint-disable-next-line @typescript-eslint/naming-convention\nconst DEBUG_memos: Record<string, { key: string; calls: number; misses: number; hitRate: number }> = {};\nconst DEBUG_MEMOS_CALLS_THRESHOLD = 20;\n\ndocument.addEventListener('dblclick', () => {\n  // eslint-disable-next-line no-console\n  console.warn('COMPONENTS', orderBy(\n    Object\n      .values(DEBUG_components)\n      .map(({ avgRenderTime, ...state }) => {\n        return { ...state, ...(avgRenderTime !== undefined && { avgRenderTime: Number(avgRenderTime.toFixed(2)) }) };\n      }),\n    'renders',\n    'desc',\n  ));\n\n  // eslint-disable-next-line no-console\n  console.warn('MEMOS', orderBy(\n    Object\n      .values(DEBUG_memos)\n      .filter(({ calls }) => calls >= DEBUG_MEMOS_CALLS_THRESHOLD)\n      .map((state) => ({ ...state, hitRate: Number(state.hitRate.toFixed(2)) })),\n    'hitRate',\n    'asc',\n  ));\n});\n\nlet instancesPendingUpdate = new Set<ComponentInstance>();\nlet idsToExcludeFromUpdate = new Set<number>();\nlet pendingEffects = new Map<string, Effect>();\nlet pendingCleanups = new Map<string, EffectCleanup>();\nlet pendingLayoutEffects = new Map<string, Effect>();\nlet pendingLayoutCleanups = new Map<string, EffectCleanup>();\nlet areImmediateEffectsCaptured = false;\n\n/*\n  Order:\n  - component effect cleanups\n  - component effects\n  - measure tasks\n  - mutation tasks\n  - component updates\n  - component layout effect cleanups\n  - component layout effects\n  - forced layout measure tasks\n  - forced layout mutation tasks\n */\n\nconst runUpdatePassOnRaf = throttleWith(requestMeasure, () => {\n  const runImmediateEffects = captureImmediateEffects();\n\n  idsToExcludeFromUpdate = new Set();\n  const instancesToUpdate = Array\n    .from(instancesPendingUpdate)\n    .sort((a, b) => a.id - b.id);\n  instancesPendingUpdate = new Set();\n\n  const currentCleanups = pendingCleanups;\n  pendingCleanups = new Map();\n  currentCleanups.forEach((cb) => cb());\n\n  const currentEffects = pendingEffects;\n  pendingEffects = new Map();\n  currentEffects.forEach((cb) => cb());\n\n  requestMutation(() => {\n    instancesToUpdate.forEach(prepareComponentForFrame);\n    instancesToUpdate.forEach((instance) => {\n      if (idsToExcludeFromUpdate!.has(instance.id)) {\n        return;\n      }\n\n      forceUpdateComponent(instance);\n    });\n\n    runImmediateEffects?.();\n  });\n});\n\nexport function captureImmediateEffects() {\n  if (areImmediateEffectsCaptured) {\n    return undefined;\n  }\n\n  areImmediateEffectsCaptured = true;\n  return runCapturedImmediateEffects;\n}\n\nfunction runCapturedImmediateEffects() {\n  const currentLayoutCleanups = pendingLayoutCleanups;\n  pendingLayoutCleanups = new Map();\n  currentLayoutCleanups.forEach((cb) => cb());\n\n  const currentLayoutEffects = pendingLayoutEffects;\n  pendingLayoutEffects = new Map();\n  currentLayoutEffects.forEach((cb) => cb());\n\n  areImmediateEffectsCaptured = false;\n}\n\nexport function renderComponent(componentInstance: ComponentInstance) {\n  idsToExcludeFromUpdate.add(componentInstance.id);\n\n  const { Component, props } = componentInstance;\n  let newRenderedValue: any;\n\n  safeExec(() => {\n    renderingInstance = componentInstance;\n    if (componentInstance.hooks) {\n      if (componentInstance.hooks.state) {\n        componentInstance.hooks.state.cursor = 0;\n      }\n      if (componentInstance.hooks.effects) {\n        componentInstance.hooks.effects.cursor = 0;\n      }\n      if (componentInstance.hooks.memos) {\n        componentInstance.hooks.memos.cursor = 0;\n      }\n      if (componentInstance.hooks.refs) {\n        componentInstance.hooks.refs.cursor = 0;\n      }\n    }\n\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    let DEBUG_startAt: number | undefined;\n    if (DEBUG) {\n      const componentName = DEBUG_resolveComponentName(Component);\n      if (!DEBUG_components[componentName]) {\n        DEBUG_components[componentName] = {\n          name: componentName,\n          renders: 0,\n          avgRenderTime: 0,\n        };\n      }\n\n      if (DEBUG_MORE) {\n        if (!DEBUG_SILENT_RENDERS_FOR.has(componentName)) {\n          // eslint-disable-next-line no-console\n          console.log(`[Teact] Render ${componentName}`);\n        }\n      }\n\n      DEBUG_startAt = performance.now();\n    }\n\n    newRenderedValue = Component(props);\n\n    if (DEBUG) {\n      const duration = performance.now() - DEBUG_startAt!;\n      const componentName = DEBUG_resolveComponentName(Component);\n      if (duration > DEBUG_RENDER_THRESHOLD) {\n        // eslint-disable-next-line no-console\n        console.warn(`[Teact] Slow component render: ${componentName}, ${Math.round(duration)} ms`);\n      }\n\n      const { renders, avgRenderTime } = DEBUG_components[componentName];\n      DEBUG_components[componentName].avgRenderTime = (avgRenderTime * renders + duration) / (renders + 1);\n      DEBUG_components[componentName].renders++;\n      DEBUG_components.TOTAL.renders++;\n\n      if (DEBUG_MORE) {\n        incrementOverlayCounter(`${componentName} renders`);\n        incrementOverlayCounter(`${componentName} duration`, duration);\n      }\n    }\n  }, () => {\n    // eslint-disable-next-line no-console\n    console.error(`[Teact] Error while rendering component ${componentInstance.name}`);\n\n    newRenderedValue = componentInstance.renderedValue;\n  });\n\n  if (componentInstance.mountState === MountState.Mounted && newRenderedValue === componentInstance.renderedValue) {\n    return componentInstance.$element;\n  }\n\n  componentInstance.renderedValue = newRenderedValue;\n\n  const children = Array.isArray(newRenderedValue) ? newRenderedValue : [newRenderedValue];\n\n  if (componentInstance.mountState === MountState.New) {\n    componentInstance.$element.children = buildChildren(children, true);\n  } else {\n    componentInstance.$element = buildComponentElement(componentInstance, children);\n  }\n\n  return componentInstance.$element;\n}\n\nexport function hasElementChanged($old: VirtualElement, $new: VirtualElement) {\n  if (typeof $old !== typeof $new) {\n    return true;\n  } else if ($old.type !== $new.type) {\n    return true;\n  } else if ($old.type === VirtualType.Text && $new.type === VirtualType.Text) {\n    return $old.value !== $new.value;\n  } else if ($old.type === VirtualType.Tag && $new.type === VirtualType.Tag) {\n    return ($old.tag !== $new.tag) || ($old.props.key !== $new.props.key);\n  } else if ($old.type === VirtualType.Component && $new.type === VirtualType.Component) {\n    return (\n      $old.componentInstance.Component !== $new.componentInstance.Component\n    ) || (\n      $old.props.key !== $new.props.key\n    );\n  }\n\n  return false;\n}\n\nexport function mountComponent(componentInstance: ComponentInstance) {\n  componentInstance.id = ++lastComponentId;\n  renderComponent(componentInstance);\n  componentInstance.mountState = MountState.Mounted;\n  return componentInstance.$element;\n}\n\nexport function unmountComponent(componentInstance: ComponentInstance) {\n  if (componentInstance.mountState !== MountState.Mounted) {\n    return;\n  }\n\n  idsToExcludeFromUpdate.add(componentInstance.id);\n\n  if (componentInstance.hooks?.effects) {\n    for (const effect of componentInstance.hooks.effects.byCursor) {\n      if (effect.cleanup) {\n        safeExec(effect.cleanup);\n      }\n\n      effect.cleanup = undefined;\n      effect.releaseSignals?.();\n    }\n  }\n\n  componentInstance.mountState = MountState.Unmounted;\n\n  helpGc(componentInstance);\n}\n\n// We need to remove all references to DOM objects. We also clean all other references, just in case\nfunction helpGc(componentInstance: ComponentInstance) {\n  const {\n    effects, state, memos, refs,\n  } = componentInstance.hooks || {};\n\n  if (effects) {\n    for (const hook of effects.byCursor) {\n      hook.schedule = undefined as any;\n      hook.cleanup = undefined as any;\n      hook.releaseSignals = undefined as any;\n      hook.dependencies = undefined;\n    }\n  }\n\n  if (state) {\n    for (const hook of state.byCursor) {\n      hook.value = undefined;\n      hook.nextValue = undefined;\n      hook.setter = undefined as any;\n    }\n  }\n\n  if (memos) {\n    for (const hook of memos.byCursor) {\n      hook.value = undefined as any;\n      hook.dependencies = undefined as any;\n    }\n  }\n\n  if (refs) {\n    for (const hook of refs.byCursor) {\n      hook.current = undefined as any;\n    }\n  }\n\n  componentInstance.hooks = undefined as any;\n  componentInstance.$element = undefined as any;\n  componentInstance.renderedValue = undefined;\n  componentInstance.Component = undefined as any;\n  componentInstance.props = undefined as any;\n  componentInstance.onUpdate = undefined;\n}\n\nfunction prepareComponentForFrame(componentInstance: ComponentInstance) {\n  if (componentInstance.mountState !== MountState.Mounted) {\n    return;\n  }\n\n  if (componentInstance.hooks?.state) {\n    for (const hook of componentInstance.hooks.state.byCursor) {\n      hook.value = hook.nextValue;\n    }\n  }\n}\n\nfunction forceUpdateComponent(componentInstance: ComponentInstance) {\n  if (componentInstance.mountState !== MountState.Mounted || !componentInstance.onUpdate) {\n    return;\n  }\n\n  const currentElement = componentInstance.$element;\n\n  renderComponent(componentInstance);\n\n  if (componentInstance.$element !== currentElement) {\n    componentInstance.onUpdate();\n  }\n}\n\nexport function useState<T>(): [T | undefined, StateHookSetter<T | undefined>];\nexport function useState<T>(initial: T, debugKey?: string): [T, StateHookSetter<T>];\nexport function useState<T>(initial?: T, debugKey?: string): [T, StateHookSetter<T>] {\n  if (!renderingInstance.hooks) {\n    renderingInstance.hooks = {};\n  }\n  if (!renderingInstance.hooks.state) {\n    renderingInstance.hooks.state = { cursor: 0, byCursor: [] };\n  }\n\n  const { cursor, byCursor } = renderingInstance.hooks.state;\n  const componentInstance = renderingInstance;\n\n  if (byCursor[cursor] === undefined) {\n    byCursor[cursor] = {\n      value: initial,\n      nextValue: initial,\n      setter: (newValue: ((current: T) => T) | T) => {\n        if (componentInstance.mountState === MountState.Unmounted) {\n          return;\n        }\n\n        if (typeof newValue === 'function') {\n          newValue = (newValue as (current: T) => T)(byCursor[cursor].nextValue);\n        }\n\n        if (byCursor[cursor].nextValue === newValue) {\n          return;\n        }\n\n        byCursor[cursor].nextValue = newValue;\n\n        instancesPendingUpdate.add(componentInstance);\n        runUpdatePassOnRaf();\n\n        if (DEBUG_MORE) {\n          // eslint-disable-next-line no-console\n          console.log(\n            '[Teact.useState]',\n            DEBUG_resolveComponentName(componentInstance.Component),\n            `State update at cursor #${cursor}${debugKey ? ` (${debugKey})` : ''}, next value: `,\n            byCursor[cursor].nextValue,\n          );\n        }\n      },\n    };\n  }\n\n  renderingInstance.hooks.state.cursor++;\n\n  return [\n    byCursor[cursor].value,\n    byCursor[cursor].setter,\n  ];\n}\n\nfunction useEffectBase(\n  isLayout: boolean,\n  effect: Effect,\n  dependencies?: readonly any[],\n  debugKey?: string,\n) {\n  if (!renderingInstance.hooks) {\n    renderingInstance.hooks = {};\n  }\n  if (!renderingInstance.hooks.effects) {\n    renderingInstance.hooks.effects = { cursor: 0, byCursor: [] };\n  }\n\n  const { cursor, byCursor } = renderingInstance.hooks.effects;\n  const componentInstance = renderingInstance;\n\n  const runEffectCleanup = () => safeExec(() => {\n    const { cleanup } = byCursor[cursor];\n    if (!cleanup) {\n      return;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    let DEBUG_startAt: number | undefined;\n    if (DEBUG) {\n      DEBUG_startAt = performance.now();\n    }\n\n    cleanup();\n\n    if (DEBUG) {\n      const duration = performance.now() - DEBUG_startAt!;\n      const componentName = DEBUG_resolveComponentName(componentInstance.Component);\n      if (duration > DEBUG_EFFECT_THRESHOLD) {\n        // eslint-disable-next-line no-console\n        console.warn(\n          `[Teact] Slow cleanup at effect cursor #${cursor}: ${componentName}, ${Math.round(duration)} ms`,\n        );\n      }\n    }\n  }, () => {\n    // eslint-disable-next-line no-console\n    console.error(`[Teact] Error in effect cleanup at cursor #${cursor} in ${componentInstance.name}`);\n  }, () => {\n    byCursor[cursor].cleanup = undefined;\n  });\n\n  const runEffect = () => safeExec(() => {\n    if (componentInstance.mountState === MountState.Unmounted) {\n      return;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    let DEBUG_startAt: number | undefined;\n    if (DEBUG) {\n      DEBUG_startAt = performance.now();\n    }\n\n    const result = effect();\n    if (typeof result === 'function') {\n      byCursor[cursor].cleanup = result;\n    }\n\n    if (DEBUG) {\n      const duration = performance.now() - DEBUG_startAt!;\n      const componentName = DEBUG_resolveComponentName(componentInstance.Component);\n      if (duration > DEBUG_EFFECT_THRESHOLD) {\n        // eslint-disable-next-line no-console\n        console.warn(`[Teact] Slow effect at cursor #${cursor}: ${componentName}, ${Math.round(duration)} ms`);\n      }\n    }\n  }, () => {\n    // eslint-disable-next-line no-console\n    console.error(`[Teact] Error in effect at cursor #${cursor} in ${componentInstance.name}`);\n  });\n\n  function schedule() {\n    const effectId = `${componentInstance.id}_${cursor}`;\n\n    if (isLayout) {\n      pendingLayoutCleanups.set(effectId, runEffectCleanup);\n      pendingLayoutEffects.set(effectId, runEffect);\n    } else {\n      pendingCleanups.set(effectId, runEffectCleanup);\n      pendingEffects.set(effectId, runEffect);\n    }\n\n    runUpdatePassOnRaf();\n  }\n\n  if (dependencies && byCursor[cursor]?.dependencies) {\n    if (dependencies.some((dependency, i) => dependency !== byCursor[cursor].dependencies![i])) {\n      if (DEBUG && debugKey) {\n        const causedBy = dependencies.reduce((res, newValue, i) => {\n          const prevValue = byCursor[cursor].dependencies![i];\n          if (newValue !== prevValue) {\n            res.push(`${i}: ${prevValue} => ${newValue}`);\n          }\n\n          return res;\n        }, []);\n\n        // eslint-disable-next-line no-console\n        console.log(`[Teact] Effect \"${debugKey}\" caused by dependencies.`, causedBy.join(', '));\n      }\n\n      schedule();\n    }\n  } else {\n    if (debugKey) {\n      // eslint-disable-next-line no-console\n      console.log(`[Teact] Effect \"${debugKey}\" caused by missing dependencies.`);\n    }\n\n    schedule();\n  }\n\n  const isFirstRun = !byCursor[cursor];\n\n  byCursor[cursor] = {\n    ...byCursor[cursor],\n    dependencies,\n    schedule,\n  };\n\n  function setupSignals() {\n    const cleanups = dependencies?.filter(isSignal).map((signal, i) => signal.subscribe(() => {\n      if (debugKey) {\n        // eslint-disable-next-line no-console\n        console.log(`[Teact] Effect \"${debugKey}\" caused by signal #${i} new value:`, signal());\n      }\n\n      byCursor[cursor].schedule();\n    }));\n\n    if (!cleanups?.length) {\n      return undefined;\n    }\n\n    return () => {\n      for (const cleanup of cleanups) {\n        cleanup();\n      }\n    };\n  }\n\n  if (isFirstRun) {\n    byCursor[cursor].releaseSignals = setupSignals();\n  }\n\n  renderingInstance.hooks.effects.cursor++;\n}\n\nexport function useEffect(effect: Effect, dependencies?: readonly any[], debugKey?: string) {\n  return useEffectBase(false, effect, dependencies, debugKey);\n}\n\nexport function useLayoutEffect(effect: Effect, dependencies?: readonly any[], debugKey?: string) {\n  return useEffectBase(true, effect, dependencies, debugKey);\n}\n\nexport function useMemo<T extends any>(\n  resolver: () => T,\n  dependencies: any[],\n  debugKey?: string,\n  debugHitRateKey?: string,\n): T {\n  if (!renderingInstance.hooks) {\n    renderingInstance.hooks = {};\n  }\n  if (!renderingInstance.hooks.memos) {\n    renderingInstance.hooks.memos = { cursor: 0, byCursor: [] };\n  }\n\n  const { cursor, byCursor } = renderingInstance.hooks.memos;\n  let { value } = byCursor[cursor] || {};\n\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  let DEBUG_state: typeof DEBUG_memos[string] | undefined;\n  if (DEBUG && debugHitRateKey) {\n    const instanceKey = `${debugHitRateKey}#${renderingInstance.id}`;\n\n    DEBUG_state = DEBUG_memos[instanceKey];\n    if (!DEBUG_state) {\n      DEBUG_state = {\n        key: instanceKey, calls: 0, misses: 0, hitRate: 0,\n      };\n      DEBUG_memos[instanceKey] = DEBUG_state;\n    }\n\n    DEBUG_state.calls++;\n    DEBUG_state.hitRate = (DEBUG_state.calls - DEBUG_state.misses) / DEBUG_state.calls;\n  }\n\n  if (\n    byCursor[cursor] === undefined\n    || dependencies.length !== byCursor[cursor].dependencies.length\n    || dependencies.some((dependency, i) => dependency !== byCursor[cursor].dependencies[i])\n  ) {\n    if (DEBUG) {\n      if (debugKey) {\n        const msg = `[Teact.useMemo] ${renderingInstance.name} (${debugKey}): Update is caused by:`;\n        if (!byCursor[cursor]) {\n          // eslint-disable-next-line no-console\n          console.log(`${msg} [first render]`);\n        } else {\n          logUnequalProps(byCursor[cursor].dependencies, dependencies, msg, debugKey);\n        }\n      }\n\n      if (DEBUG_state) {\n        DEBUG_state.misses++;\n        DEBUG_state.hitRate = (DEBUG_state.calls - DEBUG_state.misses) / DEBUG_state.calls;\n\n        if (\n          DEBUG_state.calls % 10 === 0\n          && DEBUG_state.calls >= DEBUG_MEMOS_CALLS_THRESHOLD\n          && DEBUG_state.hitRate < 0.25\n        ) {\n          // eslint-disable-next-line no-console\n          console.warn(\n            // eslint-disable-next-line max-len\n            `[Teact] ${DEBUG_state.key}: Hit rate is ${DEBUG_state.hitRate.toFixed(2)} for ${DEBUG_state.calls} calls`,\n          );\n        }\n      }\n    }\n\n    value = resolver();\n  }\n\n  byCursor[cursor] = {\n    value,\n    dependencies,\n  };\n\n  renderingInstance.hooks.memos.cursor++;\n\n  return value;\n}\n\nexport function useCallback<F extends AnyFunction>(newCallback: F, dependencies: any[], debugKey?: string): F {\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  return useMemo(() => newCallback, dependencies, debugKey);\n}\n\nexport function useRef<T>(initial: T): { current: T };\nexport function useRef<T>(): { current: T | undefined }; // TT way (empty is `undefined`)\nexport function useRef<T>(initial: null): { current: T | null }; // React way (empty is `null`)\n// eslint-disable-next-line no-null/no-null\nexport function useRef<T>(initial?: T | null) {\n  if (!renderingInstance.hooks) {\n    renderingInstance.hooks = {};\n  }\n  if (!renderingInstance.hooks.refs) {\n    renderingInstance.hooks.refs = { cursor: 0, byCursor: [] };\n  }\n\n  const { cursor, byCursor } = renderingInstance.hooks.refs;\n  if (!byCursor[cursor]) {\n    byCursor[cursor] = {\n      current: initial,\n    };\n  }\n\n  renderingInstance.hooks.refs.cursor++;\n\n  return byCursor[cursor];\n}\n\nexport function createContext<T>(defaultValue?: T): Context<T> {\n  const contextId = String(contextCounter++);\n\n  function TeactContextProvider(props: { value: T; children: TeactNode }) {\n    const [getValue, setValue] = useSignal(props.value ?? defaultValue);\n    // Create a new object to avoid mutations in the parent context\n    renderingInstance.context = { ...renderingInstance.context };\n\n    renderingInstance.context[contextId] = getValue;\n    setValue(props.value);\n    return props.children;\n  }\n\n  TeactContextProvider.DEBUG_contentComponentName = contextId;\n\n  const context = {\n    defaultValue,\n    contextId,\n    Provider: TeactContextProvider,\n  };\n\n  return context;\n}\n\nexport function useContextSignal<T>(context: Context<T>) {\n  const [getDefaultValue] = useSignal(context.defaultValue);\n\n  return renderingInstance.context?.[context.contextId] || getDefaultValue;\n}\n\nexport function useSignal<T>(initial?: T) {\n  const signalRef = useRef<ReturnType<typeof createSignal<T>>>();\n  signalRef.current ??= createSignal<T>(initial);\n  return signalRef.current;\n}\n\nexport function memo<T extends FC_withDebug>(Component: T, debugKey?: string) {\n  function TeactMemoWrapper(props: Props) {\n    return useMemo(\n      () => createElement(Component, props),\n      // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n      Object.values(props),\n      debugKey,\n      DEBUG_MORE ? DEBUG_resolveComponentName(renderingInstance.Component) : undefined,\n    );\n  }\n\n  TeactMemoWrapper.DEBUG_contentComponentName = DEBUG_resolveComponentName(Component);\n\n  return TeactMemoWrapper as T;\n}\n\n// eslint-disable-next-line @typescript-eslint/naming-convention\nexport function DEBUG_resolveComponentName(Component: FC_withDebug) {\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  const { name, DEBUG_contentComponentName } = Component;\n\n  if (name === 'TeactNContainer') {\n    return `container>${DEBUG_contentComponentName}`;\n  }\n\n  if (name === 'TeactMemoWrapper') {\n    return `memo>${DEBUG_contentComponentName}`;\n  }\n\n  if (name === 'TeactContextProvider') {\n    return `context>id${DEBUG_contentComponentName}`;\n  }\n\n  return name + (DEBUG_contentComponentName ? `>${DEBUG_contentComponentName}` : '');\n}\n\nexport default {\n  createElement,\n  Fragment,\n};\n","export default function arePropsShallowEqual(currentProps: AnyLiteral, newProps: AnyLiteral) {\n  if (currentProps === newProps) {\n    return true;\n  }\n\n  const currentKeys = Object.keys(currentProps);\n  const currentKeysLength = currentKeys.length;\n  const newKeysLength = Object.keys(newProps).length;\n\n  if (currentKeysLength !== newKeysLength) {\n    return false;\n  }\n\n  if (currentKeysLength === 0) {\n    return true;\n  }\n\n  for (let i = 0; i < currentKeysLength; i++) {\n    const prop = currentKeys[i];\n    if (currentProps[prop] !== newProps[prop]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexport function logUnequalProps(currentProps: AnyLiteral, newProps: AnyLiteral, msg: string, debugKey = '') {\n  const currentKeys = Object.keys(currentProps);\n  const currentKeysLength = currentKeys.length;\n  const newKeysLength = Object.keys(newProps).length;\n\n  if (currentKeysLength !== newKeysLength) {\n    // eslint-disable-next-line no-console\n    console.log(`${msg} LENGTH`);\n    return;\n  }\n\n  // eslint-disable-next-line no-console\n  console.log(msg);\n  currentKeys.forEach((res, prop) => {\n    if (currentProps[prop] !== newProps[prop]) {\n      // eslint-disable-next-line no-console\n      console.log(debugKey, prop, ':', currentProps[prop], '=>', newProps[prop]);\n    }\n  });\n}\n","export function createCallbackManager<T extends AnyToVoidFunction = AnyToVoidFunction>() {\n  const callbacks = new Set<T>();\n\n  function addCallback(cb: T) {\n    callbacks.add(cb);\n\n    return () => {\n      removeCallback(cb);\n    };\n  }\n\n  function removeCallback(cb: T) {\n    callbacks.delete(cb);\n  }\n\n  function runCallbacks(...args: Parameters<T>) {\n    callbacks.forEach((callback) => {\n      callback(...args);\n    });\n  }\n\n  function hasCallbacks() {\n    return Boolean(callbacks.size);\n  }\n\n  return {\n    runCallbacks,\n    addCallback,\n    removeCallback,\n    hasCallbacks,\n  };\n}\n\nexport type CallbackManager<T extends AnyToVoidFunction = AnyToVoidFunction>\n  = ReturnType<typeof createCallbackManager<T>>;\n","import { throttle } from './schedulers';\n\nconst KEYS_TO_IGNORE = new Set([\n  'TeactMemoWrapper renders',\n  'TeactNContainer renders',\n  'Button renders',\n]);\nconst MIN_RENDERS_TO_SHOW = 5;\nconst MIN_DURATION_TO_SHOW = 2;\nconst BG_GREEN = ' style=\"background: lightgreen\"';\n\nlet counters: Record<string, {\n  value: number;\n  lastUpdateAt: number;\n}> = {};\n\nconst renderCountersThrottled = throttle(renderCounters, 500, false);\n\nlet loggerEl: HTMLDivElement;\n\nexport function debugToOverlay(text: string) {\n  if (!loggerEl) {\n    setupOverlay();\n  }\n\n  const date = new Date();\n  const dateFormatted = `${date.toLocaleTimeString()}.${date.getMilliseconds()}`;\n  const wasAtBottom = loggerEl.scrollTop + 10 >= loggerEl.scrollHeight - loggerEl.offsetHeight;\n\n  loggerEl.innerHTML += `${dateFormatted}: ${text}<br/>`;\n\n  if (wasAtBottom) {\n    loggerEl.scrollTop = loggerEl.scrollHeight;\n  }\n}\n\nexport function incrementOverlayCounter(key: string, value = 1) {\n  const now = Date.now();\n  if (!counters[key]) {\n    counters[key] = { value, lastUpdateAt: now };\n  } else {\n    counters[key].value += value;\n    counters[key].lastUpdateAt = now;\n  }\n\n  renderCountersThrottled();\n}\n\nexport function renderCounters() {\n  if (!loggerEl) {\n    setupOverlay();\n  }\n\n  const halfSecondAgo = Date.now() - 500;\n  const [maxRenders, maxDuration] = Object.entries(counters).reduce((acc, [key, { value }]) => {\n    if (KEYS_TO_IGNORE.has(key)) {\n      return acc;\n    }\n\n    if (key.includes('renders') && value > acc[0]) {\n      acc[0] = value;\n    }\n\n    if (key.includes('duration') && value > acc[1]) {\n      acc[1] = value;\n    }\n\n    return acc;\n  }, [0, 0]);\n\n  loggerEl.innerHTML = Object\n    .entries(counters)\n    .filter(([key, { value }]) => (\n      (!KEYS_TO_IGNORE.has(key)) && (\n        (key.includes('renders') && value > MIN_RENDERS_TO_SHOW)\n        || (key.includes('duration') && value > MIN_DURATION_TO_SHOW)\n      )\n    ))\n    .sort((a, b) => (\n      b[1].lastUpdateAt - a[1].lastUpdateAt\n    ))\n    .map(([key, { value, lastUpdateAt }]) => ([\n      `<div style=\"background: #ff0000${factorToHex(value / (key.includes('renders') ? maxRenders : maxDuration))}\">`,\n      `  <span${lastUpdateAt > halfSecondAgo ? BG_GREEN : ''}>${key}: ${Math.round(value)}</span>`,\n      '</div>',\n    ].join('\\n')))\n    .join('\\n');\n}\n\nfunction setupOverlay() {\n  loggerEl = document.createElement('div');\n  loggerEl.style.cssText = 'position: absolute; left: 0; bottom: 25px; z-index: 9998; width: 260px; height: 200px;'\n    + ' border: 1px solid #555; background: rgba(255, 255, 255, 0.9); overflow: auto; font-size: 10px;';\n  document.body.appendChild(loggerEl);\n\n  const clearEl = document.createElement('a');\n  clearEl.style.cssText = 'position: absolute; left: 222px; bottom: 198px; z-index: 9999; font-size: 20px; '\n    + 'cursor: pointer;';\n  clearEl.innerText = '🔄';\n  clearEl.addEventListener('click', () => {\n    counters = {};\n    renderCountersThrottled();\n  });\n  document.body.appendChild(clearEl);\n}\n\nfunction factorToHex(factor: number) {\n  return Math.round(255 * factor).toString(16).padStart(2, '0');\n}\n","window.addEventListener('error', handleErrorEvent);\nwindow.addEventListener('unhandledrejection', handleErrorEvent);\n\nfunction handleErrorEvent(e: ErrorEvent | PromiseRejectionEvent) {\n  // https://stackoverflow.com/questions/49384120/resizeobserver-loop-limit-exceeded\n  if (e instanceof ErrorEvent && e.message === 'ResizeObserver loop limit exceeded') {\n    return;\n  }\n\n  e.preventDefault();\n\n  handleError(e instanceof ErrorEvent ? (e.error || e.message) : e.reason);\n}\n\nexport function handleError(err: Error) {\n  // eslint-disable-next-line no-console\n  console.error(err);\n}\n","type OrderDirection =\n  'asc'\n  | 'desc';\n\ninterface OrderCallback<T> {\n  (member: T): any;\n}\n\nexport function orderBy<T>(\n  collection: T[],\n  orderRule: (keyof T) | OrderCallback<T> | ((keyof T) | OrderCallback<T>)[],\n  mode: OrderDirection | [OrderDirection, OrderDirection] = 'asc',\n): T[] {\n  function compareValues(a: T, b: T, currentOrderRule: (keyof T) | OrderCallback<T>, isAsc: boolean) {\n    const aValue = (typeof currentOrderRule === 'function' ? currentOrderRule(a) : a[currentOrderRule]) || 0;\n    const bValue = (typeof currentOrderRule === 'function' ? currentOrderRule(b) : b[currentOrderRule]) || 0;\n\n    return isAsc ? aValue - bValue : bValue - aValue;\n  }\n\n  if (Array.isArray(orderRule)) {\n    const [mode1, mode2] = Array.isArray(mode) ? mode : [mode, mode];\n    const [orderRule1, orderRule2] = orderRule;\n    const isAsc1 = mode1 === 'asc';\n    const isAsc2 = mode2 === 'asc';\n\n    return collection.sort((a, b) => {\n      return compareValues(a, b, orderRule1, isAsc1) || compareValues(a, b, orderRule2, isAsc2);\n    });\n  }\n\n  const isAsc = mode === 'asc';\n  return collection.sort((a, b) => {\n    return compareValues(a, b, orderRule, isAsc);\n  });\n}\n\nexport function unique<T extends any>(array: T[]): T[] {\n  return Array.from(new Set(array));\n}\n","import { DEBUG_MORE } from '../config';\nimport { handleError } from './handleError';\n\nconst SAFE_EXEC_ENABLED = !DEBUG_MORE;\n\nexport default function safeExec(cb: Function, rescue?: (err: Error) => void, always?: NoneToVoidFunction) {\n  if (!SAFE_EXEC_ENABLED) {\n    return cb();\n  }\n\n  try {\n    return cb();\n  } catch (err: any) {\n    rescue?.(err);\n    handleError(err);\n    return undefined;\n  } finally {\n    always?.();\n  }\n}\n","export type Scheduler = typeof requestAnimationFrame | typeof onTickEnd;\n\nexport function throttle<F extends AnyToVoidFunction>(\n  fn: F,\n  ms: number,\n  shouldRunFirst = true,\n) {\n  let interval: number | undefined;\n  let isPending: boolean;\n  let args: Parameters<F>;\n\n  return (..._args: Parameters<F>) => {\n    isPending = true;\n    args = _args;\n\n    if (!interval) {\n      if (shouldRunFirst) {\n        isPending = false;\n        fn(...args);\n      }\n\n      // eslint-disable-next-line no-restricted-globals\n      interval = self.setInterval(() => {\n        if (!isPending) {\n          // eslint-disable-next-line no-restricted-globals\n          self.clearInterval(interval!);\n          interval = undefined;\n          return;\n        }\n\n        isPending = false;\n        fn(...args);\n      }, ms);\n    }\n  };\n}\n\nexport function throttleWithTickEnd<F extends AnyToVoidFunction>(fn: F) {\n  return throttleWith(onTickEnd, fn);\n}\n\nexport function throttleWith<F extends AnyToVoidFunction>(schedulerFn: Scheduler, fn: F) {\n  let waiting = false;\n  let args: Parameters<F>;\n\n  return (..._args: Parameters<F>) => {\n    args = _args;\n\n    if (!waiting) {\n      waiting = true;\n\n      schedulerFn(() => {\n        waiting = false;\n        fn(...args);\n      });\n    }\n  };\n}\n\nexport function onIdle(cb: NoneToVoidFunction, timeout?: number) {\n  // eslint-disable-next-line no-restricted-globals\n  if (self.requestIdleCallback) {\n    // eslint-disable-next-line no-restricted-globals\n    self.requestIdleCallback(cb, { timeout });\n  } else {\n    onTickEnd(cb);\n  }\n}\n\nconst FAST_RAF_TIMEOUT_FALLBACK_MS = 300;\n\nlet fastRafCallbacks: Set<NoneToVoidFunction> | undefined;\nlet fastRafFallbackCallbacks: Set<NoneToVoidFunction> | undefined;\nlet fastRafFallbackTimeout: number | undefined;\n\n// May result in an immediate execution if called from another RAF callback which was scheduled\n// (and therefore is executed) earlier than RAF callback scheduled by `fastRaf`\nexport function fastRaf(callback: NoneToVoidFunction, withTimeoutFallback = false) {\n  if (!fastRafCallbacks) {\n    fastRafCallbacks = new Set([callback]);\n\n    requestAnimationFrame(() => {\n      const currentCallbacks = fastRafCallbacks!;\n\n      fastRafCallbacks = undefined;\n      fastRafFallbackCallbacks = undefined;\n\n      if (fastRafFallbackTimeout) {\n        clearTimeout(fastRafFallbackTimeout);\n        fastRafFallbackTimeout = undefined;\n      }\n\n      currentCallbacks.forEach((cb) => cb());\n    });\n  } else {\n    fastRafCallbacks.add(callback);\n  }\n\n  if (withTimeoutFallback) {\n    if (!fastRafFallbackCallbacks) {\n      fastRafFallbackCallbacks = new Set([callback]);\n    } else {\n      fastRafFallbackCallbacks.add(callback);\n    }\n\n    if (!fastRafFallbackTimeout) {\n      fastRafFallbackTimeout = window.setTimeout(() => {\n        const currentTimeoutCallbacks = fastRafFallbackCallbacks!;\n\n        if (fastRafCallbacks) {\n          currentTimeoutCallbacks.forEach(fastRafCallbacks.delete, fastRafCallbacks);\n        }\n        fastRafFallbackCallbacks = undefined;\n\n        if (fastRafFallbackTimeout) {\n          clearTimeout(fastRafFallbackTimeout);\n          fastRafFallbackTimeout = undefined;\n        }\n\n        currentTimeoutCallbacks.forEach((cb) => cb());\n      }, FAST_RAF_TIMEOUT_FALLBACK_MS);\n    }\n  }\n}\n\nlet onTickEndCallbacks: NoneToVoidFunction[] | undefined;\n\nexport function onTickEnd(callback: NoneToVoidFunction) {\n  if (!onTickEndCallbacks) {\n    onTickEndCallbacks = [callback];\n\n    Promise.resolve().then(() => {\n      const currentCallbacks = onTickEndCallbacks!;\n      onTickEndCallbacks = undefined;\n      currentCallbacks.forEach((cb) => cb());\n    });\n  } else {\n    onTickEndCallbacks.push(callback);\n  }\n}\n\nlet beforeUnloadCallbacks: NoneToVoidFunction[] | undefined;\n\nexport function onBeforeUnload(callback: NoneToVoidFunction, isLast = false) {\n  if (!beforeUnloadCallbacks) {\n    beforeUnloadCallbacks = [];\n    // eslint-disable-next-line no-restricted-globals\n    self.addEventListener('beforeunload', () => {\n      beforeUnloadCallbacks!.forEach((cb) => cb());\n    });\n  }\n\n  if (isLast) {\n    beforeUnloadCallbacks.push(callback);\n  } else {\n    beforeUnloadCallbacks.unshift(callback);\n  }\n\n  return () => {\n    beforeUnloadCallbacks = beforeUnloadCallbacks!.filter((cb) => cb !== callback);\n  };\n}\n","import type { CallbackManager } from './callbacks';\nimport { createCallbackManager } from './callbacks';\n\ninterface SignalState<T> {\n  value: T;\n  effects: CallbackManager;\n}\n\nconst SIGNAL_MARK = Symbol('SIGNAL_MARK');\n\nexport type Signal<T = any> = ((() => T) & {\n  readonly [SIGNAL_MARK]: symbol;\n  subscribe: (cb: AnyToVoidFunction) => NoneToVoidFunction;\n});\n\nexport type SignalSetter = (newValue: any) => void;\n\nexport function isSignal(obj: any): obj is Signal {\n  return typeof obj === 'function' && SIGNAL_MARK in obj;\n}\n\n// A shorthand to unsubscribe effect from all signals\nconst unsubscribesByEffect = new Map<NoneToVoidFunction, Set<NoneToVoidFunction>>();\n\nlet currentEffect: NoneToVoidFunction | undefined;\n\nexport function createSignal<T>(defaultValue?: T) {\n  const state: SignalState<typeof defaultValue> = {\n    value: defaultValue,\n    effects: createCallbackManager(),\n  };\n\n  function subscribe(effect: NoneToVoidFunction) {\n    const unsubscribe = state.effects.addCallback(effect);\n\n    if (!unsubscribesByEffect.has(effect)) {\n      unsubscribesByEffect.set(effect, new Set([unsubscribe]));\n    } else {\n      unsubscribesByEffect.get(effect)!.add(unsubscribe);\n    }\n\n    return () => {\n      unsubscribe();\n\n      const unsubscribes = unsubscribesByEffect.get(effect)!;\n      unsubscribes.delete(unsubscribe);\n      if (!unsubscribes.size) {\n        unsubscribesByEffect.delete(effect);\n      }\n    };\n  }\n\n  function getter() {\n    if (currentEffect) {\n      subscribe(currentEffect);\n    }\n\n    return state.value;\n  }\n\n  function setter(newValue: T) {\n    if (state.value === newValue) {\n      return;\n    }\n\n    state.value = newValue;\n    state.effects.runCallbacks();\n  }\n\n  const signal = Object.assign(getter as Signal<T>, {\n    [SIGNAL_MARK]: SIGNAL_MARK,\n    subscribe,\n  });\n\n  return [signal, setter] as const;\n}\n\nexport function cleanupEffect(effect: NoneToVoidFunction) {\n  unsubscribesByEffect.get(effect)?.forEach((unsubscribe) => {\n    unsubscribe();\n  });\n  unsubscribesByEffect.delete(effect);\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import React, { useState } from '../src/teact/teact';\nimport TeactDOM from '../src/teact/teact-dom';\n\nTeactDOM.render(\n  <App />,\n  document.getElementById('root')!,\n);\n\nfunction App() {\n  return (\n    <div>\n      <h2>Hello Teact!</h2>\n\n      <Child />\n      <Checkbox />\n    </div>\n  );\n}\n\nfunction Child() {\n  return (\n    <div>\n      This is your first component.\n    </div>\n  );\n}\n\nfunction Checkbox() {\n  const [isChecked, setIsChecked] = useState(true);\n\n  function handleCheck() {\n    setIsChecked((current) => !current);\n  }\n\n  return (\n    <label>\n      <input type=\"checkbox\" checked={isChecked} onChange={handleCheck} />\n      This is a controlled form element.\n    </label>\n  );\n}\n"],"names":["DEBUG","DEBUG_MORE","fastRaf","throttleWith","safeExec","setPhase","pendingMeasureTasks","pendingMutationTasks","pendingForceReflowTasks","runUpdatePassOnRaf","throttleWithRafFallback","currentMeasureTasks","forEach","task","Promise","resolve","then","currentMutationTasks","pendingForceReflowMutationTasks","mutationTask","push","requestMeasure","cb","requestMutation","requestNextMutation","requestForcedReflow","fn","throttledFn","Element","props","methods","HTMLElement","window","VisualViewport","Document","HTMLInputElement","MouseEvent","Range","LAYOUT_CAUSES","DEFAULT_ERROR_HANDLER","console","error","onError","nativeMethods","Map","phase","isStrict","observer","newPhase","getPhase","enableStrict","setupLayoutDetectors","setupMutationObserver","disableStrict","clearMutationObserver","clearLayoutDetectors","forceMeasure","Error","result","setHandler","handler","Object","entries","name","causes","entity","prototype","prop","nativeGetter","getOwnPropertyDescriptor","get","set","defineProperty","onMeasure","call","method","nativeMethod","args","apply","clear","MutationObserver","mutations","target","type","attributeName","document","contains","contentEditable","startsWith","observe","body","childList","attributes","subtree","characterData","disconnect","undefined","propName","NON_BUBBLEABLE_EVENTS","Set","documentEventCounters","delegationRegistryByEventType","delegatedEventTypesByElement","addEventListener","element","asCapture","eventType","resolveEventType","canUseEventDelegation","addDelegatedListener","removeEventListener","removeDelegatedListener","replace","toLowerCase","tagName","realEventType","has","handleEvent","resolveDelegationRegistry","resolveDelegatedEventTypes","add","removeAllDelegatedListeners","eventTypes","realEvent","events","furtherCallsPrevented","current","stopPropagation","preventDefault","event","Proxy","p","Reflect","parentNode","existing","newSet","documentListenersCount","keys","length","delegatedHandlersCount1","values","reduce","acc","counter","delegationRegistriesCount","delegatedHandlersCount2","delegationRegistry","size","delegationElementsCount","delegatedEventTypesCount","Array","from","warn","unique","captureImmediateEffects","hasElementChanged","isParentElement","mountComponent","MountState","renderComponent","unmountComponent","VirtualType","FILTERED_ATTRIBUTES","HTML_ATTRIBUTES","CONTROLLABLE_TAGS","MAPPED_ATTRIBUTES","autoPlay","autoComplete","INDEX_KEY_PREFIX","headsByElement","WeakMap","extraClasses","extraStyles","render","$element","parentEl","children","runImmediateEffects","$head","$renderedChild","renderWithVirtual","$current","$new","$parent","currentContext","index","options","skipComponentUpdate","fragment","nextSibling","isSvg","isCurrentComponent","Component","isNewComponent","$newAsReal","isCurrentFragment","Fragment","isNewFragment","Tag","tag","updateComponent","componentInstance","mountState","Mounted","setupComponentUpdateListener","newTarget","initComponent","context","mountChildren","canSetTextContent","Text","firstChild","textContent","value","node","createNode","insertBefore","setElementRef","remount","getNextSibling","isComponent","isFragment","renderChildren","forceMoveToEnd","$currentAsReal","currentTarget","isTag","$newAsTag","updateAttributes","New","onUpdate","i","l","$child","unmountChildren","Empty","createTextNode","createElementNS","createElement","processControlled","key","hasOwnProperty","setAttribute","processUncontrolledOnMount","componentNextSibling","replaceChild","removeChild","unmountRealTree","appendChild","lastChild","currentEl","DEBUG_checkKeyUniqueness","teactFastList","renderFastListChildren","currentChildren","newChildren","currentChildrenLength","newChildrenLength","maxLength","Math","max","createDocumentFragment","lastCurrentChild","fragmentNextSibling","newKeys","$newChild","currentRemainingIndex","remainingByKey","$currentChild","isKeyPresent","newChildKey","orderKey","teactOrderKey","fragmentIndex","fragmentSize","currentPreservedIndex","currentChildInfo","renderFragment","newOrderKey","shouldMoveNode","isMovingDown","childNodes","ref","isValueControlled","isCheckedControlled","checked","isControlled","includes","toUpperCase","onInput","onChange","e","selectionStart","selectionEnd","isCaretAtEnd","setSelectionRange","selectionState","dataset","__teactSelectionState","JSON","stringify","defaultValue","defaultChecked","currentEntries","newEntries","currentValue","newValue","removeAttribute","updateClassName","inputEl","selectionStateJson","parse","updateStyle","innerHTML","__html","endsWith","htmlElement","extra","className","extraArray","join","style","cssText","extraObject","applyExtraStyles","addExtraClass","forceSingle","classNames","split","cn","classList","removeExtraClass","remove","toggleExtraClass","force","toggle","setExtraStyles","styles","standardStyles","setProperty","assign","child","filter","a","indexOf","TeactDOM","logUnequalProps","incrementOverlayCounter","orderBy","createSignal","isSignal","Symbol","DEBUG_RENDER_THRESHOLD","DEBUG_EFFECT_THRESHOLD","DEBUG_SILENT_RENDERS_FOR","contextCounter","lastComponentId","renderingInstance","source","buildFragmentElement","createComponentInstance","buildTagElement","buildChildren","id","buildComponentElement","noEmpty","cleanChildren","dropEmptyTail","isArray","buildChildElement","isEmptyPlaceholder","slice","String","DEBUG_components","TOTAL","renders","DEBUG_memos","DEBUG_MEMOS_CALLS_THRESHOLD","map","avgRenderTime","state","Number","toFixed","calls","hitRate","instancesPendingUpdate","idsToExcludeFromUpdate","pendingEffects","pendingCleanups","pendingLayoutEffects","pendingLayoutCleanups","areImmediateEffectsCaptured","instancesToUpdate","sort","b","currentCleanups","currentEffects","prepareComponentForFrame","instance","forceUpdateComponent","runCapturedImmediateEffects","currentLayoutCleanups","currentLayoutEffects","newRenderedValue","hooks","cursor","effects","memos","refs","DEBUG_startAt","componentName","DEBUG_resolveComponentName","log","performance","now","duration","round","renderedValue","$old","byCursor","effect","cleanup","releaseSignals","Unmounted","helpGc","hook","schedule","dependencies","nextValue","setter","currentElement","useState","initial","debugKey","useEffectBase","isLayout","runEffectCleanup","runEffect","effectId","some","dependency","causedBy","res","prevValue","isFirstRun","setupSignals","cleanups","signal","subscribe","useEffect","useLayoutEffect","useMemo","resolver","debugHitRateKey","DEBUG_state","instanceKey","misses","msg","useCallback","newCallback","useRef","createContext","contextId","TeactContextProvider","useSignal","getValue","setValue","DEBUG_contentComponentName","Provider","useContextSignal","getDefaultValue","signalRef","memo","TeactMemoWrapper","arePropsShallowEqual","currentProps","newProps","currentKeys","currentKeysLength","newKeysLength","createCallbackManager","callbacks","addCallback","removeCallback","runCallbacks","callback","hasCallbacks","Boolean","throttle","KEYS_TO_IGNORE","MIN_RENDERS_TO_SHOW","MIN_DURATION_TO_SHOW","BG_GREEN","counters","renderCountersThrottled","renderCounters","loggerEl","debugToOverlay","text","setupOverlay","date","Date","dateFormatted","toLocaleTimeString","getMilliseconds","wasAtBottom","scrollTop","scrollHeight","offsetHeight","lastUpdateAt","halfSecondAgo","maxRenders","maxDuration","factorToHex","clearEl","innerText","factor","toString","padStart","handleErrorEvent","ErrorEvent","message","handleError","reason","err","collection","orderRule","mode","compareValues","currentOrderRule","isAsc","aValue","bValue","mode1","mode2","orderRule1","orderRule2","isAsc1","isAsc2","array","SAFE_EXEC_ENABLED","rescue","always","ms","shouldRunFirst","interval","isPending","_args","self","setInterval","clearInterval","throttleWithTickEnd","onTickEnd","schedulerFn","waiting","onIdle","timeout","requestIdleCallback","FAST_RAF_TIMEOUT_FALLBACK_MS","fastRafCallbacks","fastRafFallbackCallbacks","fastRafFallbackTimeout","withTimeoutFallback","requestAnimationFrame","currentCallbacks","clearTimeout","setTimeout","currentTimeoutCallbacks","onTickEndCallbacks","beforeUnloadCallbacks","onBeforeUnload","isLast","unshift","SIGNAL_MARK","obj","unsubscribesByEffect","currentEffect","unsubscribe","unsubscribes","getter","cleanupEffect","React","getElementById","App","Child","Checkbox","isChecked","setIsChecked","handleCheck"],"sourceRoot":""}